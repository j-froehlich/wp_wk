(function(a){if(typeof wpcf7==="undefined"||wpcf7===null){return}a(function(){var c=a("#welcome-panel");var b;b=function(d){a.post(ajaxurl,{action:"wpcf7-update-welcome-panel",visible:d,welcomepanelnonce:a("#welcomepanelnonce").val()})};a("a.welcome-panel-close",c).click(function(d){d.preventDefault();c.addClass("hidden");b(0)});a("#contact-form-editor").tabs({active:wpcf7.activeTab,activate:function(d,e){a("#active-tab").val(e.newTab.index())}});a("#contact-form-editor-tabs").focusin(function(d){a("#contact-form-editor .keyboard-interaction").css("visibility","visible")}).focusout(function(d){a("#contact-form-editor .keyboard-interaction").css("visibility","hidden")});wpcf7.toggleMail2("input:checkbox.toggle-form-table");a("input:checkbox.toggle-form-table").click(function(d){wpcf7.toggleMail2(this)});if(""===a("#title").val()){a("#title").focus()}wpcf7.titleHint();a(".contact-form-editor-box-mail span.mailtag").click(function(e){var d=document.createRange();d.selectNodeContents(this);window.getSelection().addRange(d)});wpcf7.updateConfigErrors();a("[data-config-field]").change(function(){var d=a("#post_ID").val();if(!d||-1==d){return}var e=[];a(this).closest("form").find("[data-config-field]").each(function(){e.push({name:a(this).attr("name").replace(/^wpcf7-/,"").replace(/-/g,"_"),value:a(this).val()})});e.push({name:"context",value:"dry-run"});a.ajax({method:"POST",url:wpcf7.apiSettings.getRoute("/contact-forms/"+d),beforeSend:function(f){f.setRequestHeader("X-WP-Nonce",wpcf7.apiSettings.nonce)},data:e}).done(function(f){wpcf7.configValidator.errors=f.config_errors;wpcf7.updateConfigErrors()})});a(window).on("beforeunload",function(d){var e=false;a('#wpcf7-admin-form-element :input[type!="hidden"]').each(function(){if(a(this).is(":checkbox, :radio")){if(this.defaultChecked!=a(this).is(":checked")){e=true}}else{if(a(this).is("select")){a(this).find("option").each(function(){if(this.defaultSelected!=a(this).is(":selected")){e=true}})}else{if(this.defaultValue!=a(this).val()){e=true}}}});if(e){d.returnValue=wpcf7.saveAlert;return wpcf7.saveAlert}});a("#wpcf7-admin-form-element").submit(function(){if("copy"!=this.action.value){a(window).off("beforeunload")}if("save"==this.action.value){a("#publishing-action .spinner").addClass("is-active")}})});wpcf7.toggleMail2=function(c){var b=a(c);var d=a("fieldset",b.closest(".contact-form-editor-box-mail"));if(b.is(":checked")){d.removeClass("hidden")}else{d.addClass("hidden")}};wpcf7.updateConfigErrors=function(){var e=wpcf7.configValidator.errors;var d={total:0};a("[data-config-field]").each(function(){a(this).removeAttr("aria-invalid");a(this).next("ul.config-error").remove();var g=a(this).attr("data-config-field");if(e[g]){var f=a("<ul></ul>").attr({role:"alert","class":"config-error"});a.each(e[g],function(j,l){var m=a("<li></li>").text(l.message);if(l.link){var h=a("<a></a>").attr({href:l.link,"class":"external dashicons dashicons-external"}).append(a("<span></span>").attr({"class":"screen-reader-text"}).text(wpcf7.configValidator.howToCorrect));m=m.append(" ").append(h)}m.appendTo(f);var k=g.replace(/^mail_\d+\./,"mail.").replace(/\..*$/,"");if(!d[k]){d[k]=0}d[k]+=1;d.total+=1});a(this).after(f).attr({"aria-invalid":"true"})}});a("#contact-form-editor-tabs > li").each(function(){var g=a(this);g.find("span.dashicons").remove();var h=g.attr("id").replace(/-panel-tab$/,"");a.each(e,function(j,l){j=j.replace(/^mail_\d+\./,"mail.");if(j.replace(/\..*$/,"")==h.replace("-","_")){var k=a('<span class="dashicons dashicons-warning"></span>');g.find("a.ui-tabs-anchor").first().append(k);return false}});var i=a("#"+h+"-panel > div.config-error:first");i.empty();if(d[h.replace("-","_")]){i.append('<span class="dashicons dashicons-warning"></span> ');if(1<d[h.replace("-","_")]){var f=wpcf7.configValidator.manyErrorsInTab.replace("%d",d[h]);i.append(f)}else{i.append(wpcf7.configValidator.oneErrorInTab)}}});a("#misc-publishing-actions .misc-pub-section.config-error").remove();if(d.total){var c=a("<div></div>").addClass("misc-pub-section config-error").append('<span class="dashicons dashicons-warning"></span> ');if(1<d.total){c.append(wpcf7.configValidator.manyErrors.replace("%d",d.total))}else{c.append(wpcf7.configValidator.oneError)}var b=a("<a></a>").attr({href:wpcf7.configValidator.docUrl,"class":"external dashicons dashicons-external"}).append(a("<span></span>").attr({"class":"screen-reader-text"}).text(wpcf7.configValidator.howToCorrect));c.append(" ").append(b);a("#misc-publishing-actions").append(c)}};wpcf7.titleHint=function(){var c=a("#title");var b=a("#title-prompt-text");if(""===c.val()){b.removeClass("screen-reader-text")}b.click(function(){a(this).addClass("screen-reader-text");c.focus()});c.blur(function(){if(""===a(this).val()){b.removeClass("screen-reader-text")}}).focus(function(){b.addClass("screen-reader-text")}).keydown(function(d){b.addClass("screen-reader-text");a(this).unbind(d)})};wpcf7.apiSettings.getRoute=function(c){var b=wpcf7.apiSettings.root;b=b.replace(wpcf7.apiSettings.namespace,wpcf7.apiSettings.namespace+c);return b}})(jQuery);