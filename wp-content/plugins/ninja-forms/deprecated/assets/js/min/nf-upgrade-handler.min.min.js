jQuery(document).ready(function(c){function b(e){this.upgrade=e,this.process=function(g,f,h){g="undefined"!=typeof g?g:0,total_step="undefined"!=typeof total_step?total_step:0,h="undefined"!=typeof h?h:[],console.log("Upgrade: "+this.upgrade),c.post(ajaxurl,{upgrade:this.upgrade,step:parseInt(g),total_steps:parseInt(f),args:h,action:"nf_upgrade_handler"},function(k){var j=c("#nf_upgrade_"+d.upgrade);try{k=c.parseJSON(k)}catch(m){return j.find(".spinner").css("display","none").css("visibility","hidden"),j.find(".dashicons-no").css("display","block"),j.find(".nf-upgrade-handler__errors__text").html("Bad Response :'(<br/>"+m+"<br />"+k),void j.find(".nf-upgrade-handler__errors").slideDown()}if(console.log("DEBUG: NF_UpgradeHandler step response: "),console.log(k),void 0==k){return j.find(".spinner").css("display","none").css("visibility","hidden"),j.find(".dashicons-no").css("display","block"),j.find(".nf-upgrade-handler__errors__text").html("Empty Response :'("),void j.find(".nf-upgrade-handler__errors").slideDown()}if(k.errors){j.find(".spinner").css("display","none").css("visibility","hidden"),j.find(".dashicons-no").css("display","block");var l="";return c.each(k.errors,function(n,i){l=l+"["+n+"] "+i+"<br />"}),j.find(".nf-upgrade-handler__errors__text").html("Processing Error :'(<br />"+l),j.find(".nf-upgrade-handler__errors").slideDown(),void c("#progressbar_"+k.upgrade).slideUp()}c("#progressbar_"+k.upgrade).progressbar({value:100*(k.step/k.total_steps)});return j.find(".spinner").css("display","block").css("visibility","visible"),j.find(".dashicons-no").css("display","none"),j.find(".inside").slideDown(),void 0!=k.complete?(j.find(".inside").slideUp(),j.find(".spinner").css("display","none").css("visibility","hidden"),j.find(".dashicons-yes").css("display","block"),void 0!=k.nextUpgrade?(d.upgrade=k.nextUpgrade,c("#nf_upgrade_"+d.upgrade).find(".spinner").css("display","block").css("visibility","visible"),c("#nf_upgrade_"+d.upgrade).find(".inside").slideDown(),void d.process()):(console.log('DEBUG: NF_UpgradeHandler says "It is finished!"'),void c(".nf-upgrade-complete").nfAdminModal("open"))):void d.process(k.step,k.total_steps,k.args)}).fail(function(){alert("error")})}}if(c(".nf-upgrade-complete").nfAdminModal({title:nfUpgradeHandler.nf_upgrade_complete_title,buttons:".nf-upgrade-complete-buttons"}),"undefined"!=typeof nfUpgradeHandler){console.log("DEBUG: NF_UpgradeHandler first upgrades is "+nfUpgradeHandler.upgrade);var d=new b(nfUpgradeHandler.upgrade);c(".progressbar").progressbar({value:0});var a=c("#nf_upgrade_"+d.upgrade);a.find(".spinner").css("display","block").css("visibility","visible"),a.find(".dashicons-no").css("display","none"),a.find(".inside").slideDown(),d.process()}else{document.location.href="admin.php?page=ninja-forms"}});