"use strict";(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(d){function a(f,c,g){function i(k){var e=d.wheelEventPixels(k)["horizontal"==j.orientation?"x":"y"],l=j.pos;j.moveTo(j.pos+e);j.pos!=l&&d.e_preventDefault(k)}this.orientation=c;this.scroll=g;this.screen=this.total=this.size=1;this.pos=0;this.node=document.createElement("div");this.node.className=f+"-"+c;this.inner=this.node.appendChild(document.createElement("div"));var j=this;d.on(this.inner,"mousedown",function(l){function k(){d.off(document,"mousemove",m);d.off(document,"mouseup",k)}function m(e){if(1!=e.which){return k()}j.moveTo(n+j.total/j.size*(e[p]-o))}if(1==l.which){d.e_preventDefault(l);var p="horizontal"==j.orientation?"pageX":"pageY",o=l[p],n=j.pos;d.on(document,"mousemove",m);d.on(document,"mouseup",k)}});d.on(this.node,"click",function(h){d.e_preventDefault(h);var e=j.inner.getBoundingClientRect();j.moveTo(j.pos+("horizontal"==j.orientation?h.clientX<e.left?-1:h.clientX>e.right?1:0:h.clientY<e.top?-1:h.clientY>e.bottom?1:0)*j.screen)});d.on(this.node,"mousewheel",i);d.on(this.node,"DOMMouseScroll",i)}function b(f,e,g){this.addClass=f;this.horiz=new a(f,"horizontal",g);e(this.horiz.node);this.vert=new a(f,"vertical",g);e(this.vert.node);this.width=null}a.prototype.setPos=function(e,c){0>e&&(e=0);e>this.total-this.screen&&(e=this.total-this.screen);if(!c&&e==this.pos){return !1}this.pos=e;this.inner.style["horizontal"==this.orientation?"left":"top"]=this.size/this.total*e+"px";return !0};a.prototype.moveTo=function(c){this.setPos(c)&&this.scroll(c,this.orientation)};a.prototype.update=function(g,f,i){var h=this.screen!=f||this.total!=g||this.size!=i;h&&(this.screen=f,this.total=g,this.size=i);g=this.size/this.total*this.screen;10>g&&(this.size-=10-g,g=10);this.inner.style["horizontal"==this.orientation?"width":"height"]=g+"px";this.setPos(this.pos,h)};b.prototype.update=function(g){if(null==this.width){var f=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;f&&(this.width=parseInt(f.height))}var f=this.width||0,i=g.scrollWidth>g.clientWidth+1,h=g.scrollHeight>g.clientHeight+1;this.vert.node.style.display=h?"block":"none";this.horiz.node.style.display=i?"block":"none";h&&(this.vert.update(g.scrollHeight,g.clientHeight,g.viewHeight-(i?f:0)),this.vert.node.style.bottom=i?f+"px":"0");i&&(this.horiz.update(g.scrollWidth,g.clientWidth,g.viewWidth-(h?f:0)-g.barLeft),this.horiz.node.style.right=h?f+"px":"0",this.horiz.node.style.left=g.barLeft+"px");return{right:h?f:0,bottom:i?f:0}};b.prototype.setScrollTop=function(c){this.vert.setPos(c)};b.prototype.setScrollLeft=function(c){this.horiz.setPos(c)};b.prototype.clear=function(){var c=this.horiz.node.parentNode;c.removeChild(this.horiz.node);c.removeChild(this.vert.node)};d.scrollbarModel.simple=function(e,c){return new b("CodeMirror-simplescroll",e,c)};d.scrollbarModel.overlay=function(e,c){return new b("CodeMirror-overlayscroll",e,c)}});