"use strict";var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,e,f){b instanceof String&&(b=String(b));for(var d=b.length,c=0;c<d;c++){var a=b[c];if(e.call(f,a,c,b)){return{i:c,v:a}}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,d,e,c){if(d){e=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var b=a[c];b in e||(e[b]={});e=e[b]}a=a[a.length-1];c=e[a];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6-impl","es3");(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define(b):a.CodeMirror=b()})(this,function(){function fN(r){return new RegExp("(^|\\s)"+r+"(?:$|\\s)\\s*")}function gx(t){for(var r=t.childNodes.length;0<r;--r){t.removeChild(t.firstChild)}return t}function gC(t,r){return gx(t).appendChild(r)}function fQ(t,r,v,u){t=document.createElement(t);v&&(t.className=v);u&&(t.style.cssText=u);if("string"==typeof r){t.appendChild(document.createTextNode(r))}else{if(r){for(v=0;v<r.length;++v){t.appendChild(r[v])}}}return t}function gk(t,r,v,u){t=fQ(t,r,v,u);t.setAttribute("role","presentation");return t}function ew(t,r){3==r.nodeType&&(r=r.parentNode);if(t.contains){return t.contains(r)}do{if(11==r.nodeType&&(r=r.host),r==t){return !0}}while(r=r.parentNode)}function bI(){try{var t=document.activeElement}catch(r){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;){t=t.shadowRoot.activeElement}return t}function q(t,r){var u=t.className;fN(r).test(u)||(t.className+=(u?" ":"")+r)}function f4(t,r){t=t.split(" ");for(var u=0;u<t.length;u++){t[u]&&!fN(t[u]).test(r)&&(r+=" "+t[u])}return r}function fH(t){var r=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,r)}}function c(t,r,v){r||(r={});for(var u in t){!t.hasOwnProperty(u)||!1===v&&r.hasOwnProperty(u)||(r[u]=t[u])}return r}function e0(t,r,x,w,v){null==r&&(r=t.search(/[^\s\u00a0]/),-1==r&&(r=t.length));w=w||0;for(v=v||0;;){var u=t.indexOf("\t",w);if(0>u||u>=r){return v+(r-w)}v+=u-w;v+=x-v%x;w=u+1}}function go(t,r){for(var u=0;u<t.length;++u){if(t[u]==r){return u}}return -1}function fs(t,r,y){for(var x=0,w=0;;){var v=t.indexOf("\t",x);-1==v&&(v=t.length);var u=v-x;if(v==t.length||w+u>=r){return x+Math.min(u,r-w)}w+=v-x;w+=y-w%y;x=v+1;if(w>=r){return x}}}function e5(r){for(;fA.length<=r;){fA.push(fK(fA)+" ")}return fA[r]}function fK(r){return r[r.length-1]}function fl(t,r){for(var v=[],u=0;u<t.length;u++){v[u]=r(t[u],u)}return v}function g0(t,r,w){for(var v=0,u=w(r);v<t.length&&w(t[v])<=u;){v++}t.splice(v,0,r)}function dZ(){}function dK(t,r){Object.create?t=Object.create(t):(dZ.prototype=t,t=new dZ);r&&c(r,t);return t}function eQ(r){return/\w/.test(r)||"\u0080"<r&&(r.toUpperCase()!=r.toLowerCase()||gw.test(r))}function eY(t,r){return r?-1<r.source.indexOf("\\w")&&eQ(t)?!0:r.test(t):eQ(t)}function dw(t){for(var r in t){if(t.hasOwnProperty(r)&&t[r]){return !1}}return !0}function eB(r){return 768<=r.charCodeAt(0)&&fT.test(r)}function c9(t,r,u){for(;(0>u?0<r:r<t.length)&&eB(t.charAt(r));){r+=u}return r}function eJ(t,r,v){for(;;){if(1>=Math.abs(r-v)){return t(r)?r:v}var u=Math.floor((r+v)/2);t(u)?v=u:r=u}}function fw(t,r,v){this.input=v;this.scrollbarFiller=fQ("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=fQ("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=gk("div",null,"CodeMirror-code");this.selectionDiv=fQ("div",null,null,"position: relative; z-index: 1");this.cursorDiv=fQ("div",null,"CodeMirror-cursors");this.measure=fQ("div",null,"CodeMirror-measure");this.lineMeasure=fQ("div",null,"CodeMirror-measure");this.lineSpace=gk("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var u=gk("div",[this.lineSpace],"CodeMirror-lines");this.mover=fQ("div",[u],null,"position: relative");this.sizer=fQ("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=fQ("div",null,null,"position: absolute; height: 30px; width: 1px;");this.gutters=fQ("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=fQ("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=fQ("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");gG&&8>gJ&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);gl||j&&bV||(this.scroller.draggable=!0);t&&(t.appendChild?t.appendChild(this.wrapper):t(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=r.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;v.init(this)}function fP(t,r){r-=t.first;if(0>r||r>=t.size){throw Error("There is no line "+(r+t.first)+" in the document.")}for(;!t.lines;){for(var w=0;;++w){var v=t.children[w],u=v.chunkSize();if(r<u){t=v;break}r-=u}}return t.lines[r]}function hl(t,r,w){var v=[],u=r.line;t.iter(r.line,w.line+1,function(x){x=x.text;u==w.line&&(x=x.slice(0,w.ch));u==r.line&&(x=x.slice(r.ch));v.push(x);++u});return v}function em(t,r,v){var u=[];t.iter(r,v,function(w){u.push(w.text)});return u}function c5(t,r){if(r-=t.height){for(;t;t=t.parent){t.height+=r}}}function gE(t){if(null==t.parent){return null}var r=t.parent;t=go(r.lines,t);for(var v=r.parent;v;r=v,v=v.parent){for(var u=0;v.children[u]!=r;++u){t+=v.children[u].chunkSize()}}return t+r.first}function gR(t,r){var x=t.first;t:do{for(var w=0;w<t.children.length;++w){var v=t.children[w],u=v.height;if(r<u){t=v;continue t}r-=u;x+=v.chunkSize()}return x}while(!t.lines);for(w=0;w<t.lines.length;++w){v=t.lines[w].height;if(r<v){break}r-=v}return x+w}function bH(t,r){return r>=t.first&&r<t.first+t.size}function d0(t,r){return String(t.lineNumberFormatter(r+t.firstLineNumber))}function fR(t,r,u){void 0===u&&(u=null);if(!(this instanceof fR)){return new fR(t,r,u)}this.line=t;this.ch=r;this.sticky=u}function gK(t,r){return t.line-r.line||t.ch-r.ch}function dL(t,r){return t.sticky==r.sticky&&0==gK(t,r)}function dx(r){return fR(r.line,r.ch)}function eu(t,r){return 0>gK(t,r)?r:t}function d7(t,r){return 0>gK(t,r)?t:r}function fM(t,r){if(r.line<t.first){return fR(t.first,0)}var u=t.first+t.size-1;if(r.line>u){return fR(u,fP(t,u).text.length)}t=fP(t,r.line).text.length;u=r.ch;r=null==u||u>t?fR(r.line,t):0>u?fR(r.line,0):r;return r}function cV(t,r){for(var v=[],u=0;u<r.length;u++){v[u]=fM(t,r[u])}return v}function dT(t,r,u){this.marker=t;this.from=r;this.to=u}function bm(t,r){if(t){for(var v=0;v<t.length;++v){var u=t[v];if(u.marker==r){return u}}}}function di(E,D){if(D.full){return null}var C=bH(E,D.from.line)&&fP(E,D.from.line).markedSpans,B=bH(E,D.to.line)&&fP(E,D.to.line).markedSpans;if(!C&&!B){return null}E=D.from.ch;var A=D.to.ch,z=0==gK(D.from,D.to),y;if(C){for(var x=0;x<C.length;++x){var w=C[x],v=w.marker;if(null==w.from||(v.inclusiveLeft?w.from<=E:w.from<E)||!(w.from!=E||"bookmark"!=v.type||z&&w.marker.insertLeft)){var u=null==w.to||(v.inclusiveRight?w.to>=E:w.to>E);(y||(y=[])).push(new dT(v,w.from,u?null:w.to))}}}var C=y,r;if(B){for(y=0;y<B.length;++y){if(x=B[y],w=x.marker,null==x.to||(w.inclusiveRight?x.to>=A:x.to>A)||x.from==A&&"bookmark"==w.type&&(!z||x.marker.insertLeft)){v=null==x.from||(w.inclusiveLeft?x.from<=A:x.from<A),(r||(r=[])).push(new dT(w,v?null:x.from-A,null==x.to?null:x.to-A))}}}B=1==D.text.length;A=fK(D.text).length+(B?E:0);if(C){for(z=0;z<C.length;++z){if(y=C[z],null==y.to){(x=bm(r,y.marker),x)?B&&(y.to=null==x.to?null:x.to+A):y.to=E}}}if(r){for(E=0;E<r.length;++E){z=r[E],null!=z.to&&(z.to+=A),null==z.from?bm(C,z.marker)||(z.from=A,B&&(C||(C=[])).push(z)):(z.from+=A,B&&(C||(C=[])).push(z))}}C&&(C=cA(C));r&&r!=C&&(r=cA(r));E=[C];if(!B){D=D.text.length-2;var t;if(0<D&&C){for(B=0;B<C.length;++B){null==C[B].to&&(t||(t=[])).push(new dT(C[B].marker,null,null))}}for(C=0;C<D;++C){E.push(t)}E.push(r)}return E}function cA(t){for(var r=0;r<t.length;++r){var u=t[r];null!=u.from&&u.from==u.to&&!1!==u.marker.clearWhenEmpty&&t.splice(r--,1)}return t.length?t:null}function e9(B,A,z){var y=null;B.iter(A.line,z.line+1,function(D){if(D.markedSpans){for(var C=0;C<D.markedSpans.length;++C){var E=D.markedSpans[C].marker;!E.readOnly||y&&-1!=go(y,E)||(y||(y=[])).push(E)}}});if(!y){return null}B=[{from:A,to:z}];for(A=0;A<y.length;++A){z=y[A];for(var x=z.find(0),w=0;w<B.length;++w){var v=B[w];if(!(0>gK(v.to,x.from)||0<gK(v.from,x.to))){var u=[w,1],t=gK(v.from,x.from),r=gK(v.to,x.to);(0>t||!z.inclusiveLeft&&!t)&&u.push({from:v.from,to:x.from});(0<r||!z.inclusiveRight&&!r)&&u.push({from:x.to,to:v.to});B.splice.apply(B,u);w+=u.length-3}}}return B}function cm(t){var r=t.markedSpans;if(r){for(var u=0;u<r.length;++u){r[u].marker.detachLine(t)}t.markedSpans=null}}function b0(t,r){if(r){for(var u=0;u<r.length;++u){r[u].marker.attachLine(t)}t.markedSpans=r}}function bM(t,r){var w=t.lines.length-r.lines.length;if(0!=w){return w}var w=t.find(),v=r.find(),u=gK(w.from,v.from)||(t.inclusiveLeft?-1:0)-(r.inclusiveLeft?-1:0);return u?-u:(w=gK(w.to,v.to)||(t.inclusiveRight?1:0)-(r.inclusiveRight?1:0))?w:r.id-t.id}function f7(t,r){t=hs&&t.markedSpans;if(t){for(var w,v=0;v<t.length;++v){if(w=t[v],w.marker.collapsed&&null==(r?w.from:w.to)&&(!u||0>bM(u,w.marker))){var u=w.marker}}}return u}function br(A,z,y,x,w){A=fP(A,z);if(A=hs&&A.markedSpans){for(z=0;z<A.length;++z){var v=A[z];if(v.marker.collapsed){var u=v.marker.find(0),t=gK(u.from,y)||(v.marker.inclusiveLeft?-1:0)-(w.inclusiveLeft?-1:0),r=gK(u.to,x)||(v.marker.inclusiveRight?1:0)-(w.inclusiveRight?1:0);if(!(0<=t&&0>=r||0>=t&&0<=r)&&(0>=t&&(v.marker.inclusiveRight&&w.inclusiveLeft?0<=gK(u.to,y):0<gK(u.to,y))||0<=t&&(v.marker.inclusiveRight&&w.inclusiveLeft?0>=gK(u.from,x):0>gK(u.from,x)))){return !0}}}}}function cR(t){for(var r;r=f7(t,!0);){t=r.find(-1,!0).line}return t}function cW(t,r){t=fP(t,r);var u=cR(t);return t==u?r:gE(u)}function cH(t,r){if(r>t.lastLine()){return r}var u=fP(t,r);if(!fL(t,u)){return r}for(;t=f7(u,!1);){u=t.find(1,!0).line}return gE(u)+1}function fL(t,r){var w=hs&&r.markedSpans;if(w){for(var v,u=0;u<w.length;++u){if(v=w[u],v.marker.collapsed&&(null==v.from||!v.marker.widgetNode&&0==v.from&&v.marker.inclusiveLeft&&cB(t,r,v))){return !0}}}}function cB(t,r,w){if(null==w.to){return r=w.marker.find(1,!0),cB(t,r.line,bm(r.line.markedSpans,w.marker))}if(w.marker.inclusiveRight&&w.to==r.text.length){return !0}for(var v,u=0;u<r.markedSpans.length;++u){if(v=r.markedSpans[u],v.marker.collapsed&&!v.marker.widgetNode&&v.from==w.to&&(null==v.to||v.to!=w.from)&&(v.marker.inclusiveLeft||w.marker.inclusiveRight)&&cB(t,r,v)){return !0}}}function cw(t){t=cR(t);for(var r=0,w=t.parent,v=0;v<w.lines.length;++v){var u=w.lines[v];if(u==t){break}else{r+=u.height}}for(t=w.parent;t;w=t,t=w.parent){for(v=0;v<t.children.length&&(u=t.children[v],u!=w);++v){r+=u.height}}return r}function dE(t){if(0==t.height){return 0}for(var r=t.text.length,v,u=t;v=f7(u,!0);){v=v.find(0,!0),u=v.from.line,r+=v.from.ch-v.to.ch}for(u=t;v=f7(u,!1);){t=v.find(0,!0),r-=u.text.length-t.from.ch,u=t.to.line,r+=u.text.length-t.to.ch}return r}function cn(t){var r=t.display;t=t.doc;r.maxLine=fP(t,t.first);r.maxLineLength=dE(r.maxLine);r.maxLineChanged=!0;t.iter(function(u){var v=dE(u);v>r.maxLineLength&&(r.maxLineLength=v,r.maxLine=u)})}function eU(t,r,y,x){if(!t){return x(r,y,"ltr")}for(var w=!1,v=0;v<t.length;++v){var u=t[v];if(u.from<y&&u.to>r||r==y&&u.to==r){x(Math.max(u.from,r),Math.min(u.to,y),1==u.level?"rtl":"ltr"),w=!0}}w||x(r,y,"ltr")}function b1(t,r,x){var w;a0=null;for(var v=0;v<t.length;++v){var u=t[v];if(u.from<r&&u.to>r){return v}u.to==r&&(u.from!=u.to&&"before"==x?w=v:a0=v);u.from==r&&(u.from!=u.to&&"before"!=x?w=v:a0=v)}return null!=w?w:a0}function gY(t,r){var u=t.order;null==u&&(u=t.order=eF(t.text,r));return u}function bN(t,r,u){r=c9(t.text,r+u,u);return 0>r||r>t.text.length?null:r}function bs(t,r,u){t=bN(t,r.ch,u);return null==t?null:new fR(r.line,t,0>u?"after":"before")}function cI(A,z,y,x,w){if(A&&(A=gY(y,z.doc.direction))){A=0>w?fK(A):A[0];var v=0>w==(1==A.level)?"after":"before";if(0<A.level){var u=cK(z,y);var t=0>w?y.text.length-1:0;var r=bn(z,u,t).top;t=eJ(function(B){return bn(z,u,B).top==r},0>w==(1==A.level)?A.from:A.to-1,t);"before"==v&&(t=bN(y,t,1))}else{t=0>w?A.to:A.from}return new fR(x,t,v)}return new fR(x,0>w?y.text.length:0,0>w?"before":"after")}function g2(E,D,C,B){var A=gY(D,E.doc.direction);if(!A){return bs(D,C,B)}C.ch>=D.text.length?(C.ch=D.text.length,C.sticky="before"):0>=C.ch&&(C.ch=0,C.sticky="after");var z=b1(A,C.ch,C.sticky),y=A[z];if("ltr"==E.doc.direction&&0==y.level%2&&(0<B?y.to>C.ch:y.from<C.ch)){return bs(D,C,B)}var x=function(F,G){return bN(D,F instanceof fR?F.ch:F,G)},w,v=function(F){if(!E.options.lineWrapping){return{begin:0,end:D.text.length}}var G=w=w||cK(E,D);F=fu(E,D,bn(E,G,F),"line").top;return gA(E,D,G,F)},u=v("before"==C.sticky?x(C,-1):C.ch);if("rtl"==E.doc.direction||1==y.level){var r=1==y.level==0>B,t=x(C,r?1:-1);if(null!=t&&(r?t<=y.to&&t<=u.end:t>=y.from&&t>=u.begin)){return new fR(C.line,t,r?"before":"after")}}y=function(H,F,N){for(var M=function(P,O){return O?new fR(C.line,x(P,1),"before"):new fR(C.line,P,"after")};0<=H&&H<A.length;H+=F){var L=A[H],J=0<F==(1!=L.level),G=J?N.begin:x(N.end,-1);if(L.from<=G&&G<L.to){return M(G,J)}G=J?L.from:x(L.to,-1);if(N.begin<=G&&G<N.end){return M(G,J)}}};if(z=y(z+B,B,u)){return z}u=0<B?u.end:x(u.begin,-1);return null==u||0<B&&u==D.text.length||!(z=y(0<B?0:A.length-1,B,v(u)))?null:z}function fZ(t,r,v){if(t.removeEventListener){t.removeEventListener(r,v,!1)}else{if(t.detachEvent){t.detachEvent("on"+r,v)}else{var u=(t=t._handlers)&&t[r];u&&(v=go(u,v),-1<v&&(t[r]=u.slice(0,v).concat(u.slice(v+1))))}}}function gv(t,r){var w=t._handlers&&t._handlers[r]||dq;if(w.length){for(var v=Array.prototype.slice.call(arguments,2),u=0;u<w.length;++u){w[u].apply(null,v)}}}function gr(t,r,u){"string"==typeof r&&(r={type:r,preventDefault:function(){this.defaultPrevented=!0}});gv(t,u||r.type,t,r);return g3(r)||r.codemirrorIgnore}function fV(t){var r=t._handlers&&t._handlers.cursorActivity;if(r){t=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]);for(var u=0;u<r.length;++u){-1==go(t,r[u])&&t.push(r[u])}}}function eL(t,r){return 0<(t._handlers&&t._handlers[r]||dq).length}function g5(r){r.prototype.on=function(t,u){fO(this,t,u)};r.prototype.off=function(t,u){fZ(this,t,u)}}function gj(r){r.preventDefault?r.preventDefault():r.returnValue=!1}function fy(r){r.stopPropagation?r.stopPropagation():r.cancelBubble=!0}function g3(r){return null!=r.defaultPrevented?r.defaultPrevented:0==r.returnValue}function aN(r){gj(r);fy(r)}function fj(t){var r=t.which;null==r&&(t.button&1?r=1:t.button&2?r=3:t.button&4&&(r=2));d9&&t.ctrlKey&&1==r&&(r=3);return r}function eq(t){if(null==gB){var r=fQ("span","\u200b");gC(t,fQ("span",[r,document.createTextNode("x")]));0!=t.firstChild.offsetHeight&&(gB=1>=r.offsetWidth&&2<r.offsetHeight&&!(gG&&8>gJ))}t=gB?fQ("span","\u200b"):fQ("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");t.setAttribute("cm-text","");return t}function d4(t,r){2<arguments.length&&(r.dependencies=Array.prototype.slice.call(arguments,2));fW[t]=r}function c3(t){if("string"==typeof t&&gF.hasOwnProperty(t)){t=gF[t]}else{if(t&&"string"==typeof t.name&&gF.hasOwnProperty(t.name)){var r=gF[t.name];"string"==typeof r&&(r={name:r});t=dK(r,t);t.name=r.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t)){return c3("application/xml")}if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t)){return c3("application/json")}}}return"string"==typeof t?{name:t}:t||{name:"null"}}function fz(t,r){r=c3(r);var w=fW[r.name];if(!w){return fz(t,"text/plain")}t=w(t,r);if(fY.hasOwnProperty(r.name)){var w=fY[r.name],v;for(v in w){w.hasOwnProperty(v)&&(t.hasOwnProperty(v)&&(t["_"+v]=t[v]),t[v]=w[v])}}t.name=r.name;r.helperType&&(t.helperType=r.helperType);if(r.modeProps){for(var u in r.modeProps){t[u]=r.modeProps[u]}}return t}function dP(t,r){t=fY.hasOwnProperty(t)?fY[t]:fY[t]={};c(r,t)}function e7(t,r){if(!0===r){return r}if(t.copyState){return t.copyState(r)}t={};for(var v in r){var u=r[v];u instanceof Array&&(u=u.concat([]));t[v]=u}return t}function fk(t,r){for(var u;t.innerMode;){u=t.innerMode(r);if(!u||u.mode==t){break}r=u.state;t=u.mode}return u||{mode:t,state:r}}function eW(t,r,u){return t.startState?t.startState(r,u):!0}function eH(t,r,z,y){var x=[t.state.modeGen],w={};es(t,r.text,t.doc.mode,z,function(B,A){return x.push(B,A)},w,y);y=z.state;for(var v=function(D){var C=t.state.overlays[D],B=1,A=0;z.state=!0;es(t,r.text,C.mode,z,function(F,E){for(var G=B;A<F;){var H=x[B];H>F&&x.splice(B,1,F,x[B+1],H);B+=2;A=Math.min(F,H)}if(E){if(C.opaque){x.splice(G,B-G,F,"overlay "+E),B=G+2}else{for(;G<B;G+=2){F=x[G+1],x[G+1]=(F?F+" ":"")+"overlay "+E}}}},w)},u=0;u<t.state.overlays.length;++u){v(u)}z.state=y;return{styles:x,classes:w.bgClass||w.textClass?w:null}}function d5(t,r,x){if(!r.styles||r.styles[0]!=t.state.modeGen){var w=az(t,gE(r)),v=r.text.length>t.options.maxHighlightLength&&e7(t.doc.mode,w.state),u=eH(t,r,w);v&&(w.state=v);r.stateAfter=w.save(!v);r.styles=u.styles;u.classes?r.styleClasses=u.classes:r.styleClasses&&(r.styleClasses=null);x===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return r.styles}function az(t,r,z){var y=t.doc,x=t.display;if(!y.mode.startState){return new a1(y,!0,r)}var w=dA(t,r,z),v=w>y.first&&fP(y,w-1).stateAfter,u=v?a1.fromSaved(y,v,w):new a1(y,eW(y.mode),w);y.iter(w,r,function(A){eX(t,A.text,u);var B=u.line;A.stateAfter=B==r-1||0==B%5||B>=x.viewFrom&&B<x.viewTo?u.save():null;u.nextLine()});z&&(y.modeFrontier=u.line);return u}function eX(t,r,w,v){var u=t.doc.mode;t=new gt(r,t.options.tabSize,w);t.start=t.pos=v||0;for(""==r&&dR(u,w.state);!t.eol();){eI(u,t,w.state),t.start=t.pos}}function dR(t,r){if(t.blankLine){return t.blankLine(r)}if(t.innerMode&&(t=fk(t,r),t.mode.blankLine)){return t.mode.blankLine(t.state)}}function eI(t,r,x,w){for(var v=0;10>v;v++){w&&(w[0]=fk(t,x).mode);var u=t.token(r,x);if(r.pos>r.start){return u}}throw Error("Mode "+t.name+" failed to advance stream.")}function dC(A,z,y,x){var w=A.doc,v=w.mode;z=fM(w,z);var u=fP(w,z.line);y=az(A,z.line,y);A=new gt(u.text,A.options.tabSize,y);var t;for(x&&(t=[]);(x||A.pos<z.ch)&&!A.eol();){A.start=A.pos;var r=eI(v,A,y.state);x&&t.push(new dn(A,r,e7(w.mode,y.state)))}return x?t:new dn(A,r,y.state)}function c1(t,r){if(t){for(;;){var v=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!v){break}t=t.slice(0,v.index)+t.slice(v.index+v[0].length);var u=v[1]?"bgClass":"textClass";null==r[u]?r[u]=v[2]:(new RegExp("(?:^|s)"+v[2]+"(?:$|s)")).test(r[u])||(r[u]+=" "+v[2])}}return t}function es(F,E,D,C,B,A,z){var y=D.flattenSpans;null==y&&(y=F.options.flattenSpans);var x=0,w=null,v=new gt(E,F.options.tabSize,C),t=F.options.addModeClass&&[null];for(""==E&&c1(dR(D,C.state),A);!v.eol();){if(v.pos>F.options.maxHighlightLength){y=!1;z&&eX(F,E,C,v.pos);v.pos=E.length;var u=null}else{u=c1(eI(D,v,C.state,t),A)}if(t){var r=t[0].name;r&&(u="m-"+(u?r+" "+u:r))}if(!y||w!=u){for(;x<v.start;){x=Math.min(v.start,x+5000),B(x,w)}w=u}v.start=v.pos}for(;x<v.pos;){F=Math.min(v.pos,x+5000),B(F,w),x=F}}function dA(A,z,y){for(var x,w,v=A.doc,u=y?-1:z-(A.doc.mode.innerMode?1000:100);z>u;--z){if(z<=v.first){return v.first}var t=fP(v,z-1),r=t.stateAfter;if(r&&(!y||z+(r instanceof cP?r.lookAhead:0)<=v.modeFrontier)){return z}t=e0(t.text,null,A.options.tabSize);if(null==w||x>t){w=z-1,x=t}}return w}function dl(t,r){t.modeFrontier=Math.min(t.modeFrontier,r);if(!(t.highlightFrontier<r-10)){for(var w=t.first,v=r-1;v>w;v--){var u=fP(t,v).stateAfter;if(u&&(!(u instanceof cP)||v+u.lookAhead<r)){w=v+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,w)}}function cN(t,r){if(!t||/^\s*$/.test(t)){return null}r=r.addModeClass?cZ:cL;return r[t]||(r[t]=t.replace(/\S+/g,"cm-$&"))}function cs(af,ae){var ad=gk("span",null,null,gl?"padding-right: .1px":null),ad={pre:gk("pre",[ad],"CodeMirror-line"),content:ad,col:0,pos:0,cm:af,trailingSpace:!1,splitSpaces:(gG||gl)&&af.getOption("lineWrapping")};ae.measure={};for(var ac=0;ac<=(ae.rest?ae.rest.length:0);ac++){var ab=ac?ae.rest[ac-1]:ae.line,aa=void 0;ad.pos=0;ad.addToken=cq;var Z=af.display.measure;if(null!=et){Z=et}else{var Y=gC(Z,document.createTextNode("A\u062eA")),W=ak(Y,0,1).getBoundingClientRect(),Y=ak(Y,1,2).getBoundingClientRect();gx(Z);Z=W&&W.left!=W.right?et=3>Y.right-W.right:!1}Z&&(aa=gY(ab,af.doc.direction))&&(ad.addToken=b4(ad.addToken,aa));ad.map=[];var V=ae!=af.display.externalMeasured&&gE(ab);af:{var U=Y=W=Z=void 0,S=void 0,T=void 0,Q=void 0,aa=ad,V=d5(af,ab,V),O=ab.markedSpans,M=ab.text,L=0;if(O){for(var J=M.length,E=0,R=1,G="",H=0;;){if(H==E){S=U=Y=W=T="";Z=null;for(var H=Infinity,X=[],F=void 0,N=0;N<O.length;++N){var D=O[N],P=D.marker;"bookmark"==P.type&&D.from==E&&P.widgetNode?X.push(P):D.from<=E&&(null==D.to||D.to>E||P.collapsed&&D.to==E&&D.from==E)?(null!=D.to&&D.to!=E&&H>D.to&&(H=D.to,U=""),P.className&&(S+=" "+P.className),P.css&&(T=(T?T+";":"")+P.css),P.startStyle&&D.from==E&&(Y+=" "+P.startStyle),P.endStyle&&D.to==H&&(F||(F=[])).push(P.endStyle,D.to),P.title&&!W&&(W=P.title),P.collapsed&&(!Z||0>bM(Z.marker,P))&&(Z=D)):D.from>E&&H>D.from&&(H=D.from)}if(F){for(N=0;N<F.length;N+=2){F[N+1]==H&&(U+=" "+F[N])}}if(!Z||Z.from==E){for(F=0;F<X.length;++F){b6(aa,0,X[F])}}if(Z&&(Z.from||0)==E){b6(aa,(null==Z.to?J+1:Z.to)-E,Z.marker,null==Z.from);if(null==Z.to){break af}Z.to==E&&(Z=!1)}}if(E>=J){break}for(X=Math.min(J,H);;){if(G){F=E+G.length;Z||(N=F>X?G.slice(0,X-E):G,aa.addToken(aa,N,Q?Q+S:S,Y,E+N.length==H?U:"",W,T));if(F>=X){G=G.slice(X-E);E=X;break}E=F;Y=""}G=M.slice(L,L=V[R++]);Q=cN(V[R++],aa.cm.options)}}}else{for(Z=1;Z<V.length;Z+=2){aa.addToken(aa,M.slice(L,L=V[Z]),cN(V[Z+1],aa.cm.options))}}}ab.styleClasses&&(ab.styleClasses.bgClass&&(ad.bgClass=f4(ab.styleClasses.bgClass,ad.bgClass||"")),ab.styleClasses.textClass&&(ad.textClass=f4(ab.styleClasses.textClass,ad.textClass||"")));0==ad.map.length&&ad.map.push(0,0,ad.content.appendChild(eq(af.display.measure)));0==ac?(ae.measure.map=ad.map,ae.measure.cache={}):((ae.measure.maps||(ae.measure.maps=[])).push(ad.map),(ae.measure.caches||(ae.measure.caches=[])).push({}))}gl&&(ac=ad.content.lastChild,/\bcm-tab\b/.test(ac.className)||ac.querySelector&&ac.querySelector(".cm-tab"))&&(ad.content.className="cm-tab-wrap-hack");gv(af,"renderLine",af,ae.line,ad.pre);ad.pre.className&&(ad.textClass=f4(ad.pre.className,ad.textClass||""));return ad}function bQ(t){var r=fQ("span","\u2022","cm-invalidchar");r.title="\\u"+t.charCodeAt(0).toString(16);r.setAttribute("aria-label",r.title);return r}function cq(H,G,F,E,D,C,B){if(G){if(H.splitSpaces){var A=H.trailingSpace;if(1<G.length&&!/  /.test(G)){A=G}else{for(var z="",y=0;y<G.length;y++){var x=G.charAt(y);" "!=x||!A||y!=G.length-1&&32!=G.charCodeAt(y+1)||(x="\u00a0");z+=x;A=" "==x}A=z}}else{A=G}z=A;y=H.cm.state.specialChars;x=!1;if(y.test(G)){A=document.createDocumentFragment();for(var v=0;;){y.lastIndex=v;var w=y.exec(G),u=w?w.index-v:G.length-v;if(u){var t=document.createTextNode(z.slice(v,v+u));gG&&9>gJ?A.appendChild(fQ("span",[t])):A.appendChild(t);H.map.push(H.pos,H.pos+u,t);H.col+=u;H.pos+=u}if(!w){break}v+=u+1;"\t"==w[0]?(w=H.cm.options.tabSize,w-=H.col%w,u=A.appendChild(fQ("span",e5(w),"cm-tab")),u.setAttribute("role","presentation"),u.setAttribute("cm-text","\t"),H.col+=w):("\r"==w[0]||"\n"==w[0]?(u=A.appendChild(fQ("span","\r"==w[0]?"\u240d":"\u2424","cm-invalidchar")),u.setAttribute("cm-text",w[0])):(u=H.cm.options.specialCharPlaceholder(w[0]),u.setAttribute("cm-text",w[0]),gG&&9>gJ?A.appendChild(fQ("span",[u])):A.appendChild(u)),H.col+=1);H.map.push(H.pos,H.pos+1,u);H.pos++}}else{H.col+=G.length,A=document.createTextNode(z),H.map.push(H.pos,H.pos+G.length,A),gG&&9>gJ&&(x=!0),H.pos+=G.length}H.trailingSpace=32==z.charCodeAt(G.length-1);if(F||E||D||x||B){return G=F||"",E&&(G+=E),D&&(G+=D),E=fQ("span",[A],G,B),C&&(E.title=C),H.content.appendChild(E)}H.content.appendChild(A)}}function b4(t,r){return function(E,D,C,B,A,z,y){C=C?C+" cm-force-border":"cm-force-border";for(var x=E.pos,w=x+D.length;;){for(var u=void 0,v=0;v<r.length&&!(u=r[v],u.to>x&&u.from<=x);v++){}if(u.to>=w){return t(E,D,C,B,A,z,y)}t(E,D.slice(0,u.to-x),C,B,null,z,y);B=null;D=D.slice(u.to-x);x=u.to}}}function b6(t,r,w,v){var u=!v&&w.widgetNode;u&&t.map.push(t.pos,t.pos+r,u);!v&&t.cm.display.input.needsContentAttribute&&(u||(u=t.content.appendChild(document.createElement("span"))),u.setAttribute("cm-marker",w.id));u&&(t.cm.display.input.setUneditable(u),t.content.appendChild(u));t.pos+=r;t.trailingSpace=!1}function bS(t,r,w){for(var v=this.line=r,u;v=f7(v,!1);){v=v.find(1,!0).line,(u||(u=[])).push(v)}this.size=(this.rest=u)?gE(fK(this.rest))-w+1:1;this.node=this.text=null;this.hidden=fL(t,r)}function cu(t,r,w){var v=[],u;for(u=r;u<w;){r=new bS(t.doc,fP(t.doc,u),u),u+=r.size,v.push(r)}return v}function bC(t,r){if(t=t.ownsGroup){try{var x=t.delayedCallbacks,w=0;do{for(;w<x.length;w++){x[w].call(null)}for(var v=0;v<t.ops.length;v++){var u=t.ops[v];if(u.cursorActivityHandlers){for(;u.cursorActivityCalled<u.cursorActivityHandlers.length;){u.cursorActivityHandlers[u.cursorActivityCalled++].call(null,u.cm)}}}}while(w<x.length)}finally{fB=null,r(t)}}}function gn(t,r){var y=t._handlers&&t._handlers[r]||dq;if(y.length){var x=Array.prototype.slice.call(arguments,2);if(fB){var w=fB.delayedCallbacks}else{i?w=i:(w=i=[],setTimeout(a9,0))}for(var v=function(z){w.push(function(){return y[z].apply(null,x)})},u=0;u<y.length;++u){v(u)}}}function a9(){var t=i;i=null;for(var r=0;r<t.length;++r){t[r]()}}function bE(B,A,z,y){for(var x=0;x<A.changes.length;x++){var w=A.changes[x];if("text"==w){var w=B,v=A,u=v.text.className,t=bj(w,v);v.text==v.node&&(v.node=t.pre);v.text.parentNode.replaceChild(t.pre,v.text);v.text=t.pre;t.bgClass!=v.bgClass||t.textClass!=v.textClass?(v.bgClass=t.bgClass,v.textClass=t.textClass,d6(w,v)):u&&(v.text.className=u)}else{if("gutter"==w){aX(B,A,z,y)}else{if("class"==w){d6(B,A)}else{if("widget"==w){w=B;v=A;u=y;v.alignable&&(v.alignable=null);for(var t=v.node.firstChild,r;t;t=r){r=t.nextSibling,"CodeMirror-linewidget"==t.className&&v.node.removeChild(t)}aK(w,v,u)}}}}}A.changes=null}function hr(r){r.node==r.text&&(r.node=fQ("div",null,null,"position: relative"),r.text.parentNode&&r.text.parentNode.replaceChild(r.node,r.text),r.node.appendChild(r.text),gG&&8>gJ&&(r.node.style.zIndex=2));return r.node}function bj(t,r){var u=t.display.externalMeasured;return u&&u.line==r.line?(t.display.externalMeasured=null,r.measure=u.measure,u.built):cs(t,r)}function d6(t,r){var v=r.bgClass?r.bgClass+" "+(r.line.bgClass||""):r.line.bgClass;v&&(v+=" CodeMirror-linebackground");if(r.background){v?r.background.className=v:(r.background.parentNode.removeChild(r.background),r.background=null)}else{if(v){var u=hr(r);r.background=u.insertBefore(fQ("div",null,v),u.firstChild);t.display.input.setUneditable(r.background)}}r.line.wrapClass?hr(r).className=r.line.wrapClass:r.node!=r.text&&(r.node.className="");r.text.className=(r.textClass?r.textClass+" "+(r.line.textClass||""):r.line.textClass)||""}function aX(t,r,y,x){r.gutter&&(r.node.removeChild(r.gutter),r.gutter=null);r.gutterBackground&&(r.node.removeChild(r.gutterBackground),r.gutterBackground=null);if(r.line.gutterClass){var w=hr(r);r.gutterBackground=fQ("div",null,"CodeMirror-gutter-background "+r.line.gutterClass,"left: "+(t.options.fixedGutter?x.fixedPos:-x.gutterTotalWidth)+"px; width: "+x.gutterTotalWidth+"px");t.display.input.setUneditable(r.gutterBackground);w.insertBefore(r.gutterBackground,r.text)}w=r.line.gutterMarkers;if(t.options.lineNumbers||w){var v=hr(r),u=r.gutter=fQ("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?x.fixedPos:-x.gutterTotalWidth)+"px");t.display.input.setUneditable(u);v.insertBefore(u,r.text);r.line.gutterClass&&(u.className+=" "+r.line.gutterClass);!t.options.lineNumbers||w&&w["CodeMirror-linenumbers"]||(r.lineNumber=u.appendChild(fQ("div",d0(t.options,y),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+x.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px")));if(w){for(r=0;r<t.options.gutters.length;++r){y=t.options.gutters[r],(v=w.hasOwnProperty(y)&&w[y])&&u.appendChild(fQ("div",[v],"CodeMirror-gutter-elt","left: "+x.gutterLeft[y]+"px; width: "+x.gutterWidth[y]+"px"))}}}}function aV(t,r,w,v){var u=bj(t,r);r.text=r.node=u.pre;u.bgClass&&(r.bgClass=u.bgClass);u.textClass&&(r.textClass=u.textClass);d6(t,r);aX(t,r,w,v);aK(t,r,v);return r.node}function aK(t,r,v){aw(t,r.line,r,v,!0);if(r.rest){for(var u=0;u<r.rest.length;u++){aw(t,r.rest[u],r,v,!1)}}}function aw(E,D,C,B,A){if(D.widgets){var z=hr(C),y=0;for(D=D.widgets;y<D.length;++y){var x=D[y],w=fQ("div",[x.node],"CodeMirror-linewidget");x.handleMouseEvents||w.setAttribute("cm-ignore-events","true");var v=x,u=w,r=B;if(v.noHScroll){(C.alignable||(C.alignable=[])).push(u);var t=r.wrapperWidth;u.style.left=r.fixedPos+"px";v.coverGutter||(t-=r.gutterTotalWidth,u.style.paddingLeft=r.gutterTotalWidth+"px");u.style.width=t+"px"}v.coverGutter&&(u.style.zIndex=5,u.style.position="relative",v.noHScroll||(u.style.marginLeft=-r.gutterTotalWidth+"px"));E.display.input.setUneditable(w);A&&x.above?z.insertBefore(w,C.gutter||C.text):z.appendChild(w);gn(x,"redraw")}}}function gX(t){if(null!=t.height){return t.height}var r=t.doc.cm;if(!r){return 0}if(!ew(document.body,t.node)){var u="position: relative;";t.coverGutter&&(u+="margin-left: -"+r.display.gutters.offsetWidth+"px;");t.noHScroll&&(u+="width: "+r.display.wrapper.clientWidth+"px;");gC(r.display.measure,fQ("div",[t.node],null,u))}return t.height=t.node.parentNode.offsetHeight}function aA(t,r){for(r=r.target||r.srcElement;r!=t.wrapper;r=r.parentNode){if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==t.sizer&&r!=t.mover){return !0}}}function dS(r){return r.mover.offsetHeight-r.lineSpace.offsetHeight}function K(t){if(t.cachedPaddingH){return t.cachedPaddingH}var r=gC(t.measure,fQ("pre","x")),r=window.getComputedStyle?window.getComputedStyle(r):r.currentStyle,r={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};isNaN(r.left)||isNaN(r.right)||(t.cachedPaddingH=r);return r}function ci(r){return 30-r.display.nativeBarWidth}function eS(r){return r.display.scroller.clientWidth-ci(r)-r.display.barWidth}function dD(r){return r.display.scroller.clientHeight-ci(r)-r.display.barHeight}function f(t,r,v){if(t.line==r){return{map:t.measure.map,cache:t.measure.cache}}for(var u=0;u<t.rest.length;u++){if(t.rest[u]==r){return{map:t.measure.maps[u],cache:t.measure.caches[u]}}}for(r=0;r<t.rest.length;r++){if(gE(t.rest[r])>v){return{map:t.measure.maps[r],cache:t.measure.caches[r],before:!0}}}}function dp(t,r){if(r>=t.display.viewFrom&&r<t.display.viewTo){return t.display.view[eD(t,r)]}if((t=t.display.externalMeasured)&&r>=t.lineN&&r<t.lineN+t.size){return t}}function cK(t,r){var w=gE(r),v=dp(t,w);v&&!v.text?v=null:v&&v.changes&&(bE(t,v,w,c2(t)),t.curOp.forceUpdate=!0);if(!v){var u=cR(r);v=gE(u);u=t.display.externalMeasured=new bS(t.doc,u,v);u.lineN=v;v=u.built=cs(t,u);u.text=v.pre;gC(t.display.lineMeasure,v.pre);v=u}t=f(v,r,w);return{line:r,view:v,rect:null,map:t.map,cache:t.cache,before:t.before,hasHeights:!1}}function bn(F,E,D,C,B){E.before&&(D=-1);var A=D+(C||"");if(E.cache.hasOwnProperty(A)){F=E.cache[A]}else{E.rect||(E.rect=E.view.text.getBoundingClientRect());if(!E.hasHeights){var z=E.view,y=E.rect,x=F.options.lineWrapping,w=x&&eS(F);if(!z.measure.heights||x&&z.measure.width!=w){var v=z.measure.heights=[];if(x){for(z.measure.width=w,z=z.text.firstChild.getClientRects(),x=0;x<z.length-1;x++){var w=z[x],t=z[x+1];2<Math.abs(w.bottom-t.bottom)&&v.push((w.bottom+t.top)/2-y.top)}}v.push(y.bottom-y.top)}E.hasHeights=!0}v=C;z=ho(E.map,D,v);C=z.node;y=z.start;x=z.end;D=z.collapse;if(3==C.nodeType){for(var u=0;4>u;u++){for(;y&&eB(E.line.text.charAt(z.coverStart+y));){--y}for(;z.coverStart+x<z.coverEnd&&eB(E.line.text.charAt(z.coverStart+x));){++x}if(gG&&9>gJ&&0==y&&x==z.coverEnd-z.coverStart){var r=C.parentNode.getBoundingClientRect()}else{r=ak(C,y,x).getClientRects();x=gU;if("left"==v){for(w=0;w<r.length&&(x=r[w]).left==x.right;w++){}}else{for(w=r.length-1;0<=w&&(x=r[w]).left==x.right;w--){}}r=x}if(r.left||r.right||0==y){break}x=y;--y;D="right"}gG&&11>gJ&&((u=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=cO?u=cO:(v=gC(F.display.measure,fQ("span","x")),u=v.getBoundingClientRect(),v=ak(v,0,1).getBoundingClientRect(),u=cO=1<Math.abs(u.left-v.left)),u=!u),u||(u=screen.logicalXDPI/screen.deviceXDPI,v=screen.logicalYDPI/screen.deviceYDPI,r={left:r.left*u,right:r.right*u,top:r.top*v,bottom:r.bottom*v}))}else{0<y&&(D=v="right"),r=F.options.lineWrapping&&1<(u=C.getClientRects()).length?u["right"==v?u.length-1:0]:C.getBoundingClientRect()}!(gG&&9>gJ)||y||r&&(r.left||r.right)||(r=(r=C.parentNode.getClientRects()[0])?{left:r.left,right:r.left+bA(F.display),top:r.top,bottom:r.bottom}:gU);C=r.top-E.rect.top;y=r.bottom-E.rect.top;u=(C+y)/2;v=E.view.measure.heights;for(z=0;z<v.length-1&&!(u<v[z]);z++){}D={left:("right"==D?r.right:r.left)-E.rect.left,right:("left"==D?r.left:r.right)-E.rect.left,top:z?v[z-1]:0,bottom:v[z]};r.left||r.right||(D.bogus=!0);F.options.singleCursorHeightPerLine||(D.rtop=C,D.rbottom=y);F=D;F.bogus||(E.cache[A]=F)}return{left:F.left,right:F.right,top:B?F.rtop:F.top,bottom:B?F.rbottom:F.bottom}}function ho(B,A,z){for(var y,x,w,v,u,t,r=0;r<B.length;r+=3){u=B[r];t=B[r+1];if(A<u){x=0,w=1,v="left"}else{if(A<t){x=A-u,w=x+1}else{if(r==B.length-3||A==t&&B[r+3]>A){w=t-u,x=w-1,A>=t&&(v="right")}}}if(null!=x){y=B[r+2];u==t&&z==(y.insertLeft?"left":"right")&&(v=z);if("left"==z&&0==x){for(;r&&B[r-2]==B[r-3]&&B[r-1].insertLeft;){y=B[(r-=3)+2],v="left"}}if("right"==z&&x==t-u){for(;r<B.length-3&&B[r+3]==B[r+4]&&!B[r+5].insertLeft;){y=B[(r+=3)+2],v="right"}}break}}return{node:y,start:x,end:w,collapse:v,coverStart:u,coverEnd:t}}function bx(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest)){for(var r=0;r<t.rest.length;r++){t.measure.caches[r]={}}}}function a4(t){t.display.externalMeasure=null;gx(t.display.lineMeasure);for(var r=0;r<t.display.view.length;r++){bx(t.display.view[r])}}function a7(r){a4(r);r.display.cachedCharWidth=r.display.cachedTextHeight=r.display.cachedPaddingH=null;r.options.lineWrapping||(r.display.maxLineChanged=!0);r.display.lineNumChars=null}function aQ(){return b8&&bU?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function aD(){return b8&&bU?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function fu(t,r,x,w,v){if(!v&&r.widgets){for(v=0;v<r.widgets.length;++v){if(r.widgets[v].above){var u=gX(r.widgets[v]);x.top+=u;x.bottom+=u}}}if("line"==w){return x}w||(w="local");r=cw(r);r="local"==w?r+t.display.lineSpace.offsetTop:r-t.display.viewOffset;if("page"==w||"window"==w){t=t.display.lineSpace.getBoundingClientRect(),r+=t.top+("window"==w?0:aD()),w=t.left+("window"==w?0:aQ()),x.left+=w,x.right+=w}x.top+=r;x.bottom+=r;return x}function ao(t,r,v){if("div"==v){return r}var u=r.left;r=r.top;"page"==v?(u-=aQ(),r-=aD()):"local"!=v&&v||(v=t.display.sizer.getBoundingClientRect(),u+=v.left,r+=v.top);t=t.display.lineSpace.getBoundingClientRect();return{left:u-t.left,top:r-t.top}}function bG(t,r,x,w,v){w||(w=fP(t.doc,r.line));var u=w;r=r.ch;w=bn(t,cK(t,w),r,v);return fu(t,u,w,x)}function dV(D,C,B,A,z,y){function x(E,F){E=bn(D,z,E,F?"right":"left",y);F?E.left=E.right:E.right=E.left;return fu(D,A,E,B)}function w(F,E,G){return x(G?F-1:F,0!=v[E].level%2!=G)}A=A||fP(D.doc,C.line);z||(z=cK(D,A));var v=gY(A,D.doc.direction),u=C.ch;C=C.sticky;u>=A.text.length?(u=A.text.length,C="before"):0>=u&&(u=0,C="after");if(!v){return x("before"==C?u-1:u,"before"==C)}var t=b1(v,u,C),r=a0,t=w(u,t,"before"==C);null!=r&&(t.other=w(u,r,"before"!=C));return t}function m(t,r){var u=0;r=fM(t.doc,r);t.options.lineWrapping||(u=bA(t.display)*r.ch);r=fP(t.doc,r.line);t=cw(r)+t.display.lineSpace.offsetTop;return{left:u,right:u,top:t,bottom:t+r.height}}function ct(t,r,x){var w=t.doc;x+=t.display.viewOffset;if(0>x){return t=fR(w.first,0,null),t.xRel=-1,t.outside=!0,t}var v=gR(w,x),u=w.first+w.size-1;if(v>u){return t=fP(w,u).text.length,t=fR(w.first+w.size-1,t,null),t.xRel=1,t.outside=!0,t}0>r&&(r=0);for(u=fP(w,v);;){if(w=aI(t,u,v,r,x),u=(v=f7(u,!1))&&v.find(0,!0),v&&(w.ch>u.from.ch||w.ch==u.from.ch&&0<w.xRel)){v=gE(u=u.to.line)}else{return w}}}function gA(t,r,x,w){var v=r.text.length,u=eJ(function(y){return fu(t,r,bn(t,x,y-1),"line").bottom<=w},v,0),v=eJ(function(y){return fu(t,r,bn(t,x,y),"line").top>w},u,v);return{begin:u,end:v}}function aI(F,E,D,C,B){B-=cw(E);var A=0,z=E.text.length,y=cK(F,E);if(gY(E,F.doc.direction)){if(F.options.lineWrapping){var x=gA(F,E,y,B);A=x.begin;z=x.end}D=new fR(D,Math.floor(A+(z-A)/2));var w=dV(F,D,"line",E,y).left;x=w<C?1:-1;var v=w-C,t=Math.ceil((z-A)/4);F:do{w=v;var u=D;for(var r=0;r<t;++r){var G=D;D=g2(F,E,D,x);if(null==D||D.ch<A||z<=("before"==D.sticky?D.ch-1:D.ch)){D=G;break F}}v=dV(F,D,"line",E,y).left-C;1<t&&(t=Math.min(t,Math.ceil(Math.abs(v)/(Math.abs(v-w)/t))),x=0>v?1:-1)}while(0!=v&&(1<t||0>x!=0>v&&Math.abs(v)<=Math.abs(w)));if(Math.abs(v)>Math.abs(w)){if(0>v==0>w){throw Error("Broke out of infinite loop in coordsCharInner")}D=u}}else{A=eJ(function(J){var H=fu(F,E,bn(F,y,J),"line");return H.top>B?(z=Math.min(J,z),!0):H.bottom<=B?!1:H.left>C?!0:H.right<C?!1:C-H.left<H.right-C},A,z),A=c9(E.text,A,1),D=new fR(D,A,A==z?"before":"after")}A=dV(F,D,"line",E,y);if(B<A.top||A.bottom<B){D.outside=!0}D.xRel=C<A.left?-1:C>A.right?1:0;return D}function eo(t){if(null!=t.cachedTextHeight){return t.cachedTextHeight}if(null==d2){d2=fQ("pre");for(var r=0;49>r;++r){d2.appendChild(document.createTextNode("x")),d2.appendChild(fQ("br"))}d2.appendChild(document.createTextNode("x"))}gC(t.measure,d2);r=d2.offsetHeight/50;3<r&&(t.cachedTextHeight=r);gx(t.measure);return r||1}function bA(t){if(null!=t.cachedCharWidth){return t.cachedCharWidth}var r=fQ("span","xxxxxxxxxx"),u=fQ("pre",[r]);gC(t.measure,u);r=r.getBoundingClientRect();r=(r.right-r.left)/10;2<r&&(t.cachedCharWidth=r);return r||10}function c2(t){for(var r=t.display,y={},x={},w=r.gutters.clientLeft,v=r.gutters.firstChild,u=0;v;v=v.nextSibling,++u){y[t.options.gutters[u]]=v.offsetLeft+v.clientLeft+w,x[t.options.gutters[u]]=v.clientWidth}return{fixedPos:b7(r),gutterTotalWidth:r.gutters.offsetWidth,gutterLeft:y,gutterWidth:x,wrapperWidth:r.wrapper.clientWidth}}function b7(r){return r.scroller.getBoundingClientRect().left-r.sizer.getBoundingClientRect().left}function hv(t){var r=eo(t.display),v=t.options.lineWrapping,u=v&&Math.max(5,t.display.scroller.clientWidth/bA(t.display)-3);return function(y){if(fL(t.doc,y)){return 0}var x=0;if(y.widgets){for(var w=0;w<y.widgets.length;w++){y.widgets[w].height&&(x+=y.widgets[w].height)}}return v?x+(Math.ceil(y.text.length/u)||1)*r:x+r}}function bT(t){var r=t.doc,u=hv(t);r.iter(function(w){var v=u(w);v!=w.height&&c5(w,v)})}function dN(A,z,y,x){var w=A.display;if(!y&&"true"==(z.target||z.srcElement).getAttribute("cm-not-content")){return null}y=w.lineSpace.getBoundingClientRect();try{var v=z.clientX-y.left;var u=z.clientY-y.top}catch(r){return null}z=ct(A,v,u);var t;x&&1==z.xRel&&(t=fP(A.doc,z.line).text).length==z.ch&&(x=e0(t,t.length,A.options.tabSize)-t.length,z=fR(z.line,Math.max(0,Math.round((v-K(A.display).left)/bA(A.display))-x)));return z}function eD(t,r){if(r>=t.display.viewTo){return null}r-=t.display.viewFrom;if(0>r){return null}t=t.display.view;for(var u=0;u<t.length;u++){if(r-=t[u].size,0>r){return u}}}function aT(r){r.display.input.showSelection(r.display.input.prepareSelection())}function g9(A,z){for(var y=A.doc,x={},w=x.cursors=document.createDocumentFragment(),v=x.selection=document.createDocumentFragment(),u=0;u<y.sel.ranges.length;u++){if(!1!==z||u!=y.sel.primIndex){var t=y.sel.ranges[u];if(!(t.from().line>=A.display.viewTo||t.to().line<A.display.viewFrom)){var r=t.empty();(r||A.options.showCursorWhenSelecting)&&gN(A,t.head,w);r||au(A,t,v)}}}return x}function gN(t,r,v){r=dV(t,r,"div",null,null,!t.options.singleCursorHeightPerLine);var u=v.appendChild(fQ("div","\u00a0","CodeMirror-cursor"));u.style.left=r.left+"px";u.style.top=r.top+"px";u.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px";r.other&&(t=v.appendChild(fQ("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),t.style.display="",t.style.left=r.other.left+"px",t.style.top=r.other.top+"px",t.style.height=0.85*(r.other.bottom-r.other.top)+"px")}function au(D,C,B){function A(F,E,G,H){0>E&&(E=0);E=Math.round(E);H=Math.round(H);w.appendChild(fQ("div",null,"CodeMirror-selected","position: absolute; left: "+F+"px;\n                             top: "+E+"px; width: "+(null==G?t-F:G)+"px;\n                             height: "+(H-E)+"px"))}function z(E,M,J){var H=fP(x,E),G=H.text.length,F,L;eU(gY(H,x.direction),M||0,null==J?G:J,function(Q,S,R){var O=bG(D,fR(E,Q),"div",H,"left"),P;if(Q==S){var N=O;R=P=O.left}else{N=bG(D,fR(E,S-1),"div",H,"right"),"rtl"==R&&(R=O,O=N,N=R),R=O.left,P=N.right}null==M&&0==Q&&(R=u);3<N.top-O.top&&(A(R,O.top,null,O.bottom),R=u,O.bottom<N.top&&A(R,O.bottom,null,N.top));null==J&&S==G&&(P=t);if(!F||O.top<F.top||O.top==F.top&&O.left<F.left){F=O}if(!L||N.bottom>L.bottom||N.bottom==L.bottom&&N.right>L.right){L=N}R<u+1&&(R=u);A(R,N.top,P-R,N.bottom)});return{start:F,end:L}}var y=D.display,x=D.doc,w=document.createDocumentFragment(),v=K(D.display),u=v.left,t=Math.max(y.sizerWidth,eS(D)-y.sizer.offsetLeft)-v.right,y=C.from();C=C.to();if(y.line==C.line){z(y.line,y.ch,C.ch)}else{var r=fP(x,y.line),v=fP(x,C.line),v=cR(r)==cR(v),y=z(y.line,y.ch,v?r.text.length+1:null).end;C=z(C.line,v?0:null,C.ch).start;v&&(y.top<C.top-2?(A(y.right,y.top,null,y.bottom),A(u,C.top,C.left,C.bottom)):A(y.right,y.top,C.left-y.right,y.bottom));y.bottom<C.top&&A(u,y.bottom,null,C.top)}B.appendChild(w)}function bF(t){if(t.state.focused){var r=t.display;clearInterval(r.blinker);var u=!0;r.cursorDiv.style.visibility="";0<t.options.cursorBlinkRate?r.blinker=setInterval(function(){return r.cursorDiv.style.visibility=(u=!u)?"":"hidden"},t.options.cursorBlinkRate):0>t.options.cursorBlinkRate&&(r.cursorDiv.style.visibility="hidden")}}function f2(r){r.state.focused||(r.display.input.focus(),bk(r))}function fF(r){r.state.delayingBlurEvent=!0;setTimeout(function(){r.state.delayingBlurEvent&&(r.state.delayingBlurEvent=!1,aG(r))},100)}function bk(t,r){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1);"nocursor"!=t.options.readOnly&&(t.state.focused||(gv(t,"focus",t,r),t.state.focused=!0,q(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),gl&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),bF(t))}function aG(t,r){t.state.delayingBlurEvent||(t.state.focused&&(gv(t,"blur",t,r),t.state.focused=!1,dz(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function bl(t){t=t.display;for(var r=t.lineDiv.offsetTop,x=0;x<t.view.length;x++){var w=t.view[x];if(!w.hidden){if(gG&&8>gJ){var v=w.node.offsetTop+w.node.offsetHeight;var u=v-r;r=v}else{u=w.node.getBoundingClientRect(),u=u.bottom-u.top}v=w.line.height-u;2>u&&(u=eo(t));if(0.005<v||-0.005>v){if(c5(w.line,u),fq(w.line),w.rest){for(u=0;u<w.rest.length;u++){fq(w.rest[u])}}}}}}function fq(t){if(t.widgets){for(var r=0;r<t.widgets.length;++r){t.widgets[r].height=t.widgets[r].node.parentNode.offsetHeight}}}function aY(t,r,x){var w=x&&null!=x.top?Math.max(0,x.top):t.scroller.scrollTop,w=Math.floor(w-t.lineSpace.offsetTop),v=x&&null!=x.bottom?x.bottom:w+t.wrapper.clientHeight,w=gR(r,w),v=gR(r,v);if(x&&x.ensure){var u=x.ensure.from.line;x=x.ensure.to.line;u<w?(w=u,v=gR(r,cw(fP(r,u))+t.wrapper.clientHeight)):Math.min(x,r.lastLine())>=v&&(w=gR(r,cw(fP(r,x))-t.wrapper.clientHeight),v=x)}return{from:w,to:Math.max(v,w+1)}}function e3(A){var z=A.display,y=z.view;if(z.alignWidgets||z.gutters.firstChild&&A.options.fixedGutter){for(var x=b7(z)-z.scroller.scrollLeft+A.doc.scrollLeft,w=z.gutters.offsetWidth,v=x+"px",u=0;u<y.length;u++){if(!y[u].hidden){A.options.fixedGutter&&(y[u].gutter&&(y[u].gutter.style.left=v),y[u].gutterBackground&&(y[u].gutterBackground.style.left=v));var t=y[u].alignable;if(t){for(var r=0;r<t.length;r++){t[r].style.left=v}}}}A.options.fixedGutter&&(z.gutters.style.left=x+w+"px")}}function eO(t){if(!t.options.lineNumbers){return !1}var r=t.doc,r=d0(t.options,r.first+r.size-1),w=t.display;if(r.length!=w.lineNumChars){var v=w.measure.appendChild(fQ("div",[fQ("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),u=v.firstChild.offsetWidth,v=v.offsetWidth-u;w.lineGutter.style.width="";w.lineNumInnerWidth=Math.max(u,w.lineGutter.offsetWidth-v)+1;w.lineNumWidth=w.lineNumInnerWidth+v;w.lineNumChars=w.lineNumInnerWidth?r.length:-1;w.lineGutter.style.width=w.lineNumWidth+"px";aL(t);return !0}return !1}function ax(A,z){var y=A.display,x=eo(A.display);0>z.top&&(z.top=0);var w=A.curOp&&null!=A.curOp.scrollTop?A.curOp.scrollTop:y.scroller.scrollTop,v=dD(A),u={};z.bottom-z.top>v&&(z.bottom=z.top+v);var t=A.doc.height+dS(y),r=z.top<x,x=z.bottom>t-x;z.top<w?u.scrollTop=r?0:z.top:z.bottom>w+v&&(v=Math.min(z.top,(x?t:z.bottom)-v),v!=w&&(u.scrollTop=v));w=A.curOp&&null!=A.curOp.scrollLeft?A.curOp.scrollLeft:y.scroller.scrollLeft;A=eS(A)-(A.options.fixedGutter?y.gutters.offsetWidth:0);if(y=z.right-z.left>A){z.right=z.left+A}10>z.left?u.scrollLeft=0:z.left<w?u.scrollLeft=Math.max(0,z.left-(y?0:10)):z.right>A+w-3&&(u.scrollLeft=z.right+(y?0:10)-A);return u}function aZ(t,r){null!=r&&(aM(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+r)}function fm(t){aM(t);var r=t.getCursor();t.curOp.scrollToPos={from:r,to:r,margin:t.options.cursorScrollMargin}}function ar(t,r,u){null==r&&null==u||aM(t);null!=r&&(t.curOp.scrollLeft=r);null!=u&&(t.curOp.scrollTop=u)}function aM(t){var r=t.curOp.scrollToPos;if(r){t.curOp.scrollToPos=null;var v=m(t,r.from),u=m(t,r.to);ez(t,v,u,r.margin)}}function ez(t,r,v,u){r=ax(t,{left:Math.min(r.left,v.left),top:Math.min(r.top,v.top)-u,right:Math.max(r.right,v.right),bottom:Math.max(r.bottom,v.bottom)+u});ar(t,r.scrollLeft,r.scrollTop)}function p(t,r){2>Math.abs(t.doc.scrollTop-r)||(j||ai(t,{top:r}),ek(t,r,!0),j&&ai(t),b(t,100))}function ek(t,r,u){r=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,r);if(t.display.scroller.scrollTop!=r||u){t.doc.scrollTop=r,t.display.scrollbars.setScrollTop(r),t.display.scroller.scrollTop!=r&&(t.display.scroller.scrollTop=r)}}function dk(t,r,v,u){r=Math.min(r,t.display.scroller.scrollWidth-t.display.scroller.clientWidth);(v?r==t.doc.scrollLeft:2>Math.abs(t.doc.scrollLeft-r))&&!u||(t.doc.scrollLeft=r,e3(t),t.display.scroller.scrollLeft!=r&&(t.display.scroller.scrollLeft=r),t.display.scrollbars.setScrollLeft(r))}function hk(t){var r=t.display,v=r.gutters.offsetWidth,u=Math.round(t.doc.height+dS(t.display));return{clientHeight:r.scroller.clientHeight,viewHeight:r.wrapper.clientHeight,scrollWidth:r.scroller.scrollWidth,clientWidth:r.scroller.clientWidth,viewWidth:r.wrapper.clientWidth,barLeft:t.options.fixedGutter?v:0,docHeight:u,scrollHeight:u+ci(t)+r.barHeight,nativeBarWidth:r.nativeBarWidth,gutterWidth:v}}function eZ(t,r){r||(r=hk(t));var v=t.display.barWidth,u=t.display.barHeight;dY(t,r);for(r=0;4>r&&v!=t.display.barWidth||u!=t.display.barHeight;r++){v!=t.display.barWidth&&t.options.lineWrapping&&bl(t),dY(t,hk(t)),v=t.display.barWidth,u=t.display.barHeight}}function dY(t,r){var v=t.display,u=v.scrollbars.update(r);v.sizer.style.paddingRight=(v.barWidth=u.right)+"px";v.sizer.style.paddingBottom=(v.barHeight=u.bottom)+"px";v.heightForcer.style.borderBottom=u.bottom+"px solid transparent";u.right&&u.bottom?(v.scrollbarFiller.style.display="block",v.scrollbarFiller.style.height=u.bottom+"px",v.scrollbarFiller.style.width=u.right+"px"):v.scrollbarFiller.style.display="";u.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(v.gutterFiller.style.display="block",v.gutterFiller.style.height=u.bottom+"px",v.gutterFiller.style.width=r.gutterWidth+"px"):v.gutterFiller.style.display=""}function dJ(r){r.display.scrollbars&&(r.display.scrollbars.clear(),r.display.scrollbars.addClass&&dz(r.display.wrapper,r.display.scrollbars.addClass));r.display.scrollbars=new dv[r.options.scrollbarStyle](function(t){r.display.wrapper.insertBefore(t,r.display.scrollbarFiller);fO(t,"mousedown",function(){r.state.focused&&setTimeout(function(){return r.display.input.focus()},0)});t.setAttribute("cm-not-content","true")},function(t,u){"horizontal"==u?dk(r,t):p(r,t)},r);r.display.scrollbars.addClass&&q(r.display.wrapper,r.display.scrollbars.addClass)}function cY(r){r.curOp={cm:r,viewChanged:!1,startHeight:r.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++s};r=r.curOp;fB?fB.ops.push(r):r.ownsGroup=fB={ops:[r],delayedCallbacks:[]}}function cD(r){bC(r.curOp,function(G){for(var F=0;F<G.ops.length;F++){G.ops[F].cm.curOp=null}G=G.ops;for(F=0;F<G.length;F++){var E=G[F],D=E.cm,C=D.display,B=D.display;!B.scrollbarsClipped&&B.scroller.offsetWidth&&(B.nativeBarWidth=B.scroller.offsetWidth-B.scroller.clientWidth,B.heightForcer.style.height=ci(D)+"px",B.sizer.style.marginBottom=-B.nativeBarWidth+"px",B.sizer.style.borderRightWidth=ci(D)+"px",B.scrollbarsClipped=!0);E.updateMaxLine&&cn(D);E.mustUpdate=E.viewChanged||E.forceUpdate||null!=E.scrollTop||E.scrollToPos&&(E.scrollToPos.from.line<C.viewFrom||E.scrollToPos.to.line>=C.viewTo)||C.maxLineChanged&&D.options.lineWrapping;E.update=E.mustUpdate&&new ay(D,E.mustUpdate&&{top:E.scrollTop,ensure:E.scrollToPos},E.forceUpdate)}for(F=0;F<G.length;F++){E=G[F],E.updatedDisplay=E.mustUpdate&&g(E.cm,E.update)}for(F=0;F<G.length;F++){if(E=G[F],D=E.cm,C=D.display,E.updatedDisplay&&bl(D),E.barMeasure=hk(D),C.maxLineChanged&&!D.options.lineWrapping&&(B=C.maxLine.text.length,B=bn(D,cK(D,C.maxLine),B,void 0),E.adjustWidthTo=B.left+3,D.display.sizerWidth=E.adjustWidthTo,E.barMeasure.scrollWidth=Math.max(C.scroller.clientWidth,C.sizer.offsetLeft+E.adjustWidthTo+ci(D)+D.display.barWidth),E.maxScrollLeft=Math.max(0,C.sizer.offsetLeft+E.adjustWidthTo-eS(D))),E.updatedDisplay||E.selectionChanged){E.preparedSelection=C.input.prepareSelection(E.focus)}}for(F=0;F<G.length;F++){E=G[F],D=E.cm,null!=E.adjustWidthTo&&(D.display.sizer.style.minWidth=E.adjustWidthTo+"px",E.maxScrollLeft<D.doc.scrollLeft&&dk(D,Math.min(D.display.scroller.scrollLeft,E.maxScrollLeft),!0),D.display.maxLineChanged=!1),C=E.focus&&E.focus==bI()&&(!document.hasFocus||document.hasFocus()),E.preparedSelection&&D.display.input.showSelection(E.preparedSelection,C),(E.updatedDisplay||E.startHeight!=D.doc.height)&&eZ(D,E.barMeasure),E.updatedDisplay&&hp(D,E.barMeasure),E.selectionChanged&&bF(D),D.state.focused&&E.updateInput&&D.display.input.reset(E.typing),C&&f2(E.cm)}for(F=0;F<G.length;F++){var A=void 0,E=G[F],D=E.cm,C=D.display,B=D.doc;E.updatedDisplay&&c8(D,E.update);null==C.wheelStartX||null==E.scrollTop&&null==E.scrollLeft&&!E.scrollToPos||(C.wheelStartX=C.wheelStartY=null);null!=E.scrollTop&&ek(D,E.scrollTop,E.forceScroll);null!=E.scrollLeft&&dk(D,E.scrollLeft,!0,!0);if(E.scrollToPos){var z=fM(B,E.scrollToPos.from),y=fM(B,E.scrollToPos.to),x=E.scrollToPos.margin;null==x&&(x=0);D.options.lineWrapping||z!=y||(z=z.ch?fR(z.line,"before"==z.sticky?z.ch-1:z.ch,"after"):z,y="before"==z.sticky?fR(z.line,z.ch+1,"before"):z);for(var v=0;5>v;v++){var w=!1,A=dV(D,z),t=y&&y!=z?dV(D,y):A,A={left:Math.min(A.left,t.left),top:Math.min(A.top,t.top)-x,right:Math.max(A.left,t.left),bottom:Math.max(A.bottom,t.bottom)+x},t=ax(D,A),H=D.doc.scrollTop,J=D.doc.scrollLeft;null!=t.scrollTop&&(p(D,t.scrollTop),1<Math.abs(D.doc.scrollTop-H)&&(w=!0));null!=t.scrollLeft&&(dk(D,t.scrollLeft),1<Math.abs(D.doc.scrollLeft-J)&&(w=!0));if(!w){break}}y=A;gr(D,"scrollCursorIntoView")||(x=D.display,v=x.sizer.getBoundingClientRect(),z=null,0>y.top+v.top?z=!0:y.bottom+v.top>(window.innerHeight||document.documentElement.clientHeight)&&(z=!1),null==z||d||(y=fQ("div","\u200b",null,"position: absolute;\n                         top: "+(y.top-x.viewOffset-D.display.lineSpace.offsetTop)+"px;\n                         height: "+(y.bottom-y.top+ci(D)+x.barHeight)+"px;\n                         left: "+y.left+"px; width: "+Math.max(2,y.right-y.left)+"px;"),D.display.lineSpace.appendChild(y),y.scrollIntoView(z),D.display.lineSpace.removeChild(y)))}y=E.maybeHiddenMarkers;z=E.maybeUnhiddenMarkers;if(y){for(x=0;x<y.length;++x){y[x].lines.length||gv(y[x],"hide")}}if(z){for(y=0;y<z.length;++y){z[y].lines.length&&gv(z[y],"unhide")}}C.wrapper.offsetHeight&&(B.scrollTop=D.display.scroller.scrollTop);E.changeObjs&&gv(D,"changes",D,E.changeObjs);E.update&&E.update.finish()}})}function g6(t,r){if(t.curOp){return r()}cY(t);try{return r()}finally{cD(t)}}function gq(t,r){return function(){if(t.curOp){return r.apply(t,arguments)}cY(t);try{return r.apply(t,arguments)}finally{cD(t)}}}function gi(r){return function(){if(this.curOp){return r.apply(this,arguments)}cY(this);try{return r.apply(this,arguments)}finally{cD(this)}}}function gp(r){return function(){var t=this.cm;if(!t||t.curOp){return r.apply(this,arguments)}cY(t);try{return r.apply(this,arguments)}finally{cD(t)}}}function f8(t,r,y,x){null==r&&(r=t.doc.first);null==y&&(y=t.doc.first+t.doc.size);x||(x=0);var w=t.display;x&&y<w.viewTo&&(null==w.updateLineNumbers||w.updateLineNumbers>r)&&(w.updateLineNumbers=r);t.curOp.viewChanged=!0;if(r>=w.viewTo){hs&&cW(t.doc,r)<w.viewTo&&bB(t)}else{if(y<=w.viewFrom){hs&&cH(t.doc,y+x)>w.viewFrom?bB(t):(w.viewFrom+=x,w.viewTo+=x)}else{if(r<=w.viewFrom&&y>=w.viewTo){bB(t)}else{if(r<=w.viewFrom){var v=aj(t,y,y+x,1);v?(w.view=w.view.slice(v.index),w.viewFrom=v.lineN,w.viewTo+=x):bB(t)}else{if(y>=w.viewTo){(v=aj(t,r,r,-1))?(w.view=w.view.slice(0,v.index),w.viewTo=v.lineN):bB(t)}else{var v=aj(t,r,r,-1),u=aj(t,y,y+x,1);v&&u?(w.view=w.view.slice(0,v.index).concat(cu(t,v.lineN,u.lineN)).concat(w.view.slice(u.index)),w.viewTo+=x):bB(t)}}}}}if(t=w.externalMeasured){y<t.lineN?t.lineN+=x:r<t.lineN+t.size&&(w.externalMeasured=null)}}function a8(t,r,w){t.curOp.viewChanged=!0;var v=t.display,u=t.display.externalMeasured;u&&r>=u.lineN&&r<u.lineN+u.size&&(v.externalMeasured=null);r<v.viewFrom||r>=v.viewTo||(t=v.view[eD(t,r)],null!=t.node&&(t=t.changes||(t.changes=[]),-1==go(t,w)&&t.push(w)))}function bB(r){r.display.viewFrom=r.display.viewTo=r.doc.first;r.display.view=[];r.display.viewOffset=0}function aj(t,r,z,y){var x=eD(t,r),w=t.display.view;if(!hs||z==t.doc.first+t.doc.size){return{index:x,lineN:z}}for(var v=t.display.viewFrom,u=0;u<x;u++){v+=w[u].size}if(v!=r){if(0<y){if(x==w.length-1){return null}r=v+w[x].size-r;x++}else{r=v-r}z+=r}for(;cW(t.doc,z)!=z;){if(x==(0>y?0:w.length-1)){return null}z+=y*w[x-(0>y?1:0)].size;x+=y}return{index:x,lineN:z}}function cU(t){t=t.display.view;for(var r=0,v=0;v<t.length;v++){var u=t[v];u.hidden||u.node&&!u.changes||++r}return r}function b(t,r){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(r,fH(hm,t))}function hm(t){var r=t.doc;if(!(r.highlightFrontier>=t.display.viewTo)){var w=+new Date+t.options.workTime,v=az(t,r.highlightFrontier),u=[];r.iter(v.line,Math.min(r.first+r.size,t.display.viewTo+500),function(A){if(v.line>=t.display.viewFrom){var z=A.styles,y=A.text.length>t.options.maxHighlightLength?e7(r.mode,v.state):null,x=eH(t,A,v,!0);y&&(v.state=y);A.styles=x.styles;y=A.styleClasses;(x=x.classes)?A.styleClasses=x:y&&(A.styleClasses=null);x=!z||z.length!=A.styles.length||y!=x&&(!y||!x||y.bgClass!=x.bgClass||y.textClass!=x.textClass);for(y=0;!x&&y<z.length;++y){x=z[y]!=A.styles[y]}x&&u.push(v.line);A.stateAfter=v.save()}else{A.text.length<=t.options.maxHighlightLength&&eX(t,A.text,v),A.stateAfter=0==v.line%5?v.save():null}v.nextLine();if(+new Date>w){return b(t,t.options.workDelay),!0}});r.highlightFrontier=v.line;r.modeFrontier=Math.max(r.modeFrontier,v.line);u.length&&g6(t,function(){for(var x=0;x<u.length;x++){a8(t,u[x],"text")}})}}function g(t,r){var y=t.display,x=t.doc;if(r.editorIsHidden){return bB(t),!1}if(!r.force&&r.visible.from>=y.viewFrom&&r.visible.to<=y.viewTo&&(null==y.updateLineNumbers||y.updateLineNumbers>=y.viewTo)&&y.renderedView==y.view&&0==cU(t)){return !1}eO(t)&&(bB(t),r.dims=c2(t));var w=x.first+x.size,v=Math.max(r.visible.from-t.options.viewportMargin,x.first),u=Math.min(w,r.visible.to+t.options.viewportMargin);y.viewFrom<v&&20>v-y.viewFrom&&(v=Math.max(x.first,y.viewFrom));y.viewTo>u&&20>y.viewTo-u&&(u=Math.min(w,y.viewTo));hs&&(v=cW(t.doc,v),u=cH(t.doc,u));x=v!=y.viewFrom||u!=y.viewTo||y.lastWrapHeight!=r.wrapperHeight||y.lastWrapWidth!=r.wrapperWidth;w=t.display;0==w.view.length||v>=w.viewTo||u<=w.viewFrom?(w.view=cu(t,v,u),w.viewFrom=v):(w.viewFrom>v?w.view=cu(t,v,w.viewFrom).concat(w.view):w.viewFrom<v&&(w.view=w.view.slice(eD(t,v))),w.viewFrom=v,w.viewTo<u?w.view=w.view.concat(cu(t,w.viewTo,u)):w.viewTo>u&&(w.view=w.view.slice(0,eD(t,u))));w.viewTo=u;y.viewOffset=cw(fP(t.doc,y.viewFrom));t.display.mover.style.top=y.viewOffset+"px";u=cU(t);if(!x&&0==u&&!r.force&&y.renderedView==y.view&&(null==y.updateLineNumbers||y.updateLineNumbers>=y.viewTo)){return !1}t.hasFocus()?v=null:(v=bI())&&ew(t.display.lineDiv,v)?(v={activeElt:v},window.getSelection&&(w=window.getSelection(),w.anchorNode&&w.extend&&ew(t.display.lineDiv,w.anchorNode)&&(v.anchorNode=w.anchorNode,v.anchorOffset=w.anchorOffset,v.focusNode=w.focusNode,v.focusOffset=w.focusOffset))):v=null;4<u&&(y.lineDiv.style.display="none");gS(t,y.updateLineNumbers,r.dims);4<u&&(y.lineDiv.style.display="");y.renderedView=y.view;(u=v)&&u.activeElt&&u.activeElt!=bI()&&(u.activeElt.focus(),u.anchorNode&&ew(document.body,u.anchorNode)&&ew(document.body,u.focusNode)&&(v=window.getSelection(),w=document.createRange(),w.setEnd(u.anchorNode,u.anchorOffset),w.collapse(!1),v.removeAllRanges(),v.addRange(w),v.extend(u.focusNode,u.focusOffset)));gx(y.cursorDiv);gx(y.selectionDiv);y.gutters.style.height=y.sizer.style.minHeight=0;x&&(y.lastWrapHeight=r.wrapperHeight,y.lastWrapWidth=r.wrapperWidth,b(t,400));y.updateLineNumbers=null;return !0}function c8(t,r){for(var v=r.viewport,u=!0;;u=!1){if(!u||!t.options.lineWrapping||r.oldDisplayWidth==eS(t)){if(v&&null!=v.top&&(v={top:Math.min(t.doc.height+dS(t.display)-dD(t),v.top)}),r.visible=aY(t.display,t.doc,v),r.visible.from>=t.display.viewFrom&&r.visible.to<=t.display.viewTo){break}}if(!g(t,r)){break}bl(t);u=hk(t);aT(t);eZ(t,u);hp(t,u);r.force=!1}r.signal(t,"update",t);if(t.display.viewFrom!=t.display.reportedViewFrom||t.display.viewTo!=t.display.reportedViewTo){r.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo}}function ai(t,r){r=new ay(t,r);if(g(t,r)){bl(t);c8(t,r);var u=hk(t);aT(t);eZ(t,u);hp(t,u);r.finish()}}function gS(D,C,B){function A(E){var F=E.nextSibling;gl&&d9&&D.display.currentWheelTarget==E?E.style.display="none":E.parentNode.removeChild(E);return F}for(var z=D.display,y=D.options.lineNumbers,x=z.lineDiv,w=x.firstChild,v=z.view,z=z.viewFrom,u=0;u<v.length;u++){var t=v[u];if(!t.hidden){if(t.node&&t.node.parentNode==x){for(;w!=t.node;){w=A(w)}w=y&&null!=C&&C<=z&&t.lineNumber;t.changes&&(-1<go(t.changes,"gutter")&&(w=!1),bE(D,t,z,B));w&&(gx(t.lineNumber),t.lineNumber.appendChild(document.createTextNode(d0(D.options,z))));w=t.node.nextSibling}else{var r=aV(D,t,z,B);x.insertBefore(r,w)}}z+=t.size}for(;w;){w=A(w)}}function aL(r){r.display.sizer.style.marginLeft=r.display.gutters.offsetWidth+"px"}function hp(t,r){t.display.sizer.style.minHeight=r.docHeight+"px";t.display.heightForcer.style.top=r.docHeight+"px";t.display.gutters.style.height=r.docHeight+t.display.barHeight+ci(t)+"px"}function cz(t){var r=t.display.gutters,x=t.options.gutters;gx(r);for(var w=0;w<x.length;++w){var v=x[w],u=r.appendChild(fQ("div",null,"CodeMirror-gutter "+v));"CodeMirror-linenumbers"==v&&(t.display.lineGutter=u,u.style.width=(t.display.lineNumWidth||1)+"px")}r.style.display=w?"":"none";aL(t)}function gV(t){var r=go(t.gutters,"CodeMirror-linenumbers");-1==r&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):-1<r&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(r,1))}function cl(t){var r=t.wheelDeltaX,u=t.wheelDeltaY;null==r&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(r=t.detail);null==u&&t.detail&&t.axis==t.VERTICAL_AXIS?u=t.detail:null==u&&(u=t.wheelDelta);return{x:r,y:u}}function bv(r){r=cl(r);r.x*=fC;r.y*=fC;return r}function bZ(B,A){var z=cl(A),y=z.x,z=z.y,x=B.display,w=x.scroller,v=w.scrollWidth>w.clientWidth,u=w.scrollHeight>w.clientHeight;if(y&&v||z&&u){if(z&&d9&&gl){var v=A.target,t=x.view;B:for(;v!=w;v=v.parentNode){for(var r=0;r<t.length;r++){if(t[r].node==v){B.display.currentWheelTarget=v;break B}}}}!y||j||dG||null==fC?(z&&null!=fC&&(A=z*fC,u=B.doc.scrollTop,v=u+x.wrapper.clientHeight,0>A?u=Math.max(0,u+A-50):v=Math.min(B.doc.height,v+A+50),ai(B,{top:u,bottom:v})),20>h&&(null==x.wheelStartX?(x.wheelStartX=w.scrollLeft,x.wheelStartY=w.scrollTop,x.wheelDX=y,x.wheelDY=z,setTimeout(function(){if(null!=x.wheelStartX){var D=w.scrollLeft-x.wheelStartX,C=w.scrollTop-x.wheelStartY,D=C&&x.wheelDY&&C/x.wheelDY||D&&x.wheelDX&&D/x.wheelDX;x.wheelStartX=x.wheelStartY=null;D&&(fC=(fC*h+D)/(h+1),++h)}},200)):(x.wheelDX+=y,x.wheelDY+=z))):(z&&u&&p(B,Math.max(0,w.scrollTop+z*fC)),dk(B,Math.max(0,w.scrollLeft+y*fC)),(!z||z&&u)&&gj(A),x.wheelStartX=null)}}function ds(t,r){r=t[r];t.sort(function(A,z){return gK(A.from(),z.from())});r=go(t,r);for(var y=1;y<t.length;y++){var x=t[y],w=t[y-1];if(0<=gK(w.to(),x.from())){var v=d7(w.from(),x.from()),u=eu(w.to(),x.to()),x=w.empty()?x.from()==x.head:w.from()==w.head;y<=r&&--r;t.splice(--y,2,new gI(x?u:v,x?v:u))}}return new fn(t,r)}function al(t,r){return new fn([new gI(t,r||t)],0)}function aU(r){return r.text?fR(r.from.line+r.text.length-1,fK(r.text).length+(1==r.text.length?r.from.ch:0)):r.to}function bL(t,r){if(0>gK(t,r.from)){return t}if(0>=gK(t,r.to)){return aU(r)}var v=t.line+r.text.length-(r.to.line-r.from.line)-1,u=t.ch;t.line==r.to.line&&(u+=aU(r).ch-r.to.ch);return fR(v,u)}function by(t,r){for(var w=[],v=0;v<t.sel.ranges.length;v++){var u=t.sel.ranges[v];w.push(new gI(bL(u.anchor,r),bL(u.head,r)))}return ds(w,t.sel.primIndex)}function bq(t,r,u){return t.line==r.line?fR(u.line,t.ch-r.ch+u.ch):fR(u.line+(t.line-r.line),t.ch)}function a5(r){r.doc.mode=fz(r.options,r.doc.modeOption);gQ(r)}function gQ(r){r.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null);t.styles&&(t.styles=null)});r.doc.modeFrontier=r.doc.highlightFrontier=r.doc.first;b(r,100);r.state.modeGen++;r.curOp&&f8(r)}function cG(t,r){return 0==r.from.ch&&0==r.to.ch&&""==fK(r.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function aR(F,E,D,C){function B(G,J,H){G.text=J;G.stateAfter&&(G.stateAfter=null);G.styles&&(G.styles=null);null!=G.order&&(G.order=null);cm(G);b0(G,H);J=C?C(G):1;J!=G.height&&c5(G,J);gn(G,"change",G,E)}function A(H,G){for(var J=[];H<G;++H){J.push(new eK(x[H],D?D[H]:null,C))}return J}var z=E.from,y=E.to,x=E.text,w=fP(F,z.line),v=fP(F,y.line),t=fK(x),u=D?D[x.length-1]:null,r=y.line-z.line;E.full?(F.insert(0,A(0,x.length)),F.remove(x.length,F.size-x.length)):cG(F,E)?(y=A(0,x.length-1),B(v,v.text,u),r&&F.remove(z.line,r),y.length&&F.insert(z.line,y)):w==v?1==x.length?B(w,w.text.slice(0,z.ch)+t+w.text.slice(y.ch),u):(r=A(1,x.length-1),r.push(new eK(t+w.text.slice(y.ch),u,C)),B(w,w.text.slice(0,z.ch)+x[0],D?D[0]:null),F.insert(z.line+1,r)):1==x.length?(B(w,w.text.slice(0,z.ch)+x[0]+v.text.slice(y.ch),D?D[0]:null),F.remove(z.line+1,r)):(B(w,w.text.slice(0,z.ch)+x[0],D?D[0]:null),B(v,t+v.text.slice(y.ch),u),u=A(1,x.length-1),1<r&&F.remove(z.line+1,r-1),F.insert(z.line+1,u));gn(F,"change",F,E)}function cp(t,r,v){function u(x,A,z){if(x.linked){for(var B=0;B<x.linked.length;++B){var y=x.linked[B];if(y.doc!=A){var w=z&&y.sharedHist;if(!v||w){r(y.doc,w),u(y.doc,x,w)}}}}}u(t,null,!0)}function g1(t,r){if(r.cm){throw Error("This document is already in use.")}t.doc=r;r.cm=t;bT(t);a5(t);gy(t);t.options.lineWrapping||cn(t);t.options.mode=r.modeOption;f8(t)}function gy(r){("rtl"==r.doc.direction?q:dz)(r.display.lineDiv,"CodeMirror-rtl")}function a2(r){g6(r,function(){gy(r);f8(r)})}function hq(r){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=r||1}function aE(t,r){var u={from:dx(r.from),to:aU(r),text:hl(t,r.from,r.to)};fU(t,u,r.from.line,r.to.line+1);cp(t,function(v){return fU(v,u,r.from.line,r.to.line+1)},!0);return u}function fx(r){for(;r.length;){if(fK(r).ranges){r.pop()}else{break}}}function fi(A,z,y,x){var w=A.history;w.undone.length=0;var v=+new Date,u;if(u=w.lastOp==x||w.lastOrigin==z.origin&&z.origin&&("+"==z.origin.charAt(0)&&A.cm&&w.lastModTime>v-A.cm.options.historyEventDelay||"*"==z.origin.charAt(0))){if(w.lastOp==x){fx(w.done);var t=fK(w.done)}else{w.done.length&&!fK(w.done).ranges?t=fK(w.done):1<w.done.length&&!w.done[w.done.length-2].ranges?(w.done.pop(),t=fK(w.done)):t=void 0}u=t}if(u){var r=fK(t.changes);0==gK(z.from,z.to)&&0==gK(z.from,r.to)?r.to=aU(z):t.changes.push(aE(A,z))}else{for((t=fK(w.done))&&t.ranges||gW(A.sel,w.done),t={changes:[aE(A,z)],generation:w.generation},w.done.push(t);w.done.length>w.undoDepth;){w.done.shift(),w.done[0].ranges||w.done.shift()}}w.done.push(y);w.generation=++w.maxGeneration;w.lastModTime=w.lastSelTime=v;w.lastOp=w.lastSelOp=x;w.lastOrigin=w.lastSelOrigin=z.origin;r||gv(A,"historyAdded")}function gW(t,r){var u=fK(r);u&&u.ranges&&u.equals(t)||r.push(t)}function fU(t,r,x,w){var v=r["spans_"+t.id],u=0;t.iter(Math.max(t.first,x),Math.min(t.first+t.size,w),function(y){y.markedSpans&&((v||(v=r["spans_"+t.id]={}))[u]=y.markedSpans);++u})}function aO(t){if(!t){return null}for(var r,u=0;u<t.length;++u){t[u].marker.explicitlyCleared?r||(r=t.slice(0,u)):r&&r.push(t[u])}return r?r.length?r:null:t}function eV(t,r){var z;if(z=r["spans_"+t.id]){for(var y=[],x=0;x<r.text.length;++x){y.push(aO(z[x]))}z=y}else{z=null}t=di(t,r);if(!z){return t}if(!t){return z}for(r=0;r<z.length;++r){if(y=z[r],x=t[r],y&&x){var w=0;t:for(;w<x.length;++w){for(var v=x[w],u=0;u<y.length;++u){if(y[u].marker==v.marker){continue t}}y.push(v)}}else{x&&(z[r]=x)}}return z}function ev(C,B,A){for(var z=[],y=0;y<C.length;++y){var x=C[y];if(x.ranges){z.push(A?fn.prototype.deepCopy.call(x):x)}else{var x=x.changes,w=[];z.push({changes:w});for(var v=0;v<x.length;++v){var u=x[v],t;w.push({from:u.from,to:u.to,text:u.text});if(B){for(var r in u){(t=r.match(/^spans_(\d+)$/))&&-1<go(B,Number(t[1]))&&(fK(w)[r]=u[r],delete u[r])}}}}}return z}function ap(t,r,v,u){return u?(t=t.anchor,v&&(u=0>gK(r,t),u!=0>gK(v,t)?(t=r,r=v):u!=0>gK(r,v)&&(r=v)),new gI(t,r)):new gI(v||r,r)}function bz(t,r,w,v,u){null==u&&(u=t.cm&&(t.cm.display.shift||t.extend));gm(t,new fn([ap(t.sel.primary(),r,w,u)],0),v)}function eG(t,r,x){for(var w=[],v=t.cm&&(t.cm.display.shift||t.extend),u=0;u<t.sel.ranges.length;u++){w[u]=ap(t.sel.ranges[u],r[u],null,v)}r=ds(w,t.sel.primIndex);gm(t,r,x)}function n(t,r,w,v){var u=t.sel.ranges.slice(0);u[r]=w;gm(t,ds(u,t.sel.primIndex),v)}function aB(t,r,u){u={ranges:r.ranges,update:function(v){this.ranges=[];for(var w=0;w<v.length;w++){this.ranges[w]=new gI(fM(t,v[w].anchor),fM(t,v[w].head))}},origin:u&&u.origin};gv(t,"beforeSelectionChange",t,u);t.cm&&gv(t.cm,"beforeSelectionChange",t.cm,u);return u.ranges!=r.ranges?ds(u.ranges,u.ranges.length-1):r}function er(t,r,w){var v=t.history.done,u=fK(v);u&&u.ranges?(v[v.length-1]=r,a6(t,r,w)):gm(t,r,w)}function gm(t,r,z){a6(t,r,z);r=t.sel;var y=t.cm?t.cm.curOp.id:NaN,x=t.history,w=z&&z.origin,v;if(!(v=y==x.lastSelOp)&&(v=w&&x.lastSelOrigin==w)&&!(v=x.lastModTime==x.lastSelTime&&x.lastOrigin==w)){v=fK(x.done);var u=w.charAt(0);v="*"==u||"+"==u&&v.ranges.length==r.ranges.length&&v.somethingSelected()==r.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}v?x.done[x.done.length-1]=r:gW(r,x.done);x.lastSelTime=+new Date;x.lastSelOrigin=w;x.lastSelOp=y;z&&!1!==z.clearRedo&&fx(x.undone)}function a6(t,r,v){if(eL(t,"beforeSelectionChange")||t.cm&&eL(t.cm,"beforeSelectionChange")){r=aB(t,r,v)}var u=v&&v.bias||(0>gK(r.primary().head,t.sel.primary().head)?-1:1);dQ(t,dB(t,r,u,!0));v&&!1===v.scroll||!t.cm||fm(t.cm)}function dQ(t,r){r.equals(t.sel)||(t.sel=r,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,fV(t.cm)),gn(t,"cursorActivity",t))}function dm(r){dQ(r,dB(r,r.sel,null,!1))}function dB(A,z,y,x){for(var w,v=0;v<z.ranges.length;v++){var u=z.ranges[v],t=z.ranges.length==A.sel.ranges.length&&A.sel.ranges[v],r=hw(A,u.anchor,t&&t.anchor,y,x),t=hw(A,u.head,t&&t.head,y,x);if(w||r!=u.anchor||t!=u.head){w||(w=z.ranges.slice(0,v)),w[v]=new gI(r,t)}}return w?ds(w,z.primIndex):z}function d8(A,z,y,x,w){var v=fP(A,z.line);if(v.markedSpans){for(var u=0;u<v.markedSpans.length;++u){var t=v.markedSpans[u],r=t.marker;if((null==t.from||(r.inclusiveLeft?t.from<=z.ch:t.from<z.ch))&&(null==t.to||(r.inclusiveRight?t.to>=z.ch:t.to>z.ch))){if(w&&(gv(r,"beforeCursorEnter"),r.explicitlyCleared)){if(v.markedSpans){--u;continue}else{break}}if(r.atomic){if(y){u=r.find(0>x?1:-1);t=void 0;if(0>x?r.inclusiveRight:r.inclusiveLeft){u=c0(A,u,-x,u&&u.line==z.line?v:null)}if(u&&u.line==z.line&&(t=gK(u,y))&&(0>x?0>t:0<t)){return d8(A,u,z,x,w)}}y=r.find(0>x?-1:1);if(0>x?r.inclusiveLeft:r.inclusiveRight){y=c0(A,y,x,y.line==z.line?v:null)}return y?d8(A,y,z,x,w):null}}}}return z}function hw(t,r,w,v,u){v=v||1;r=d8(t,r,w,v,u)||!u&&d8(t,r,w,v,!0)||d8(t,r,w,-v,u)||!u&&d8(t,r,w,-v,!0);return r?r:(t.cantEdit=!0,fR(t.first,0))}function c0(t,r,v,u){return 0>v&&0==r.ch?r.line>t.first?fM(t,fR(r.line-1)):null:0<v&&r.ch==(u||fP(t,r.line)).text.length?r.line<t.first+t.size-1?fR(r.line+1,0):null:new fR(r.line,r.ch+v)}function cM(r){r.setSelection(fR(r.firstLine(),0),fR(r.lastLine()),bW)}function cr(t,r,v){var u={canceled:!1,from:r.from,to:r.to,text:r.text,origin:r.origin,cancel:function(){return u.canceled=!0}};v&&(u.update=function(w,z,y,x){w&&(u.from=fM(t,w));z&&(u.to=fM(t,z));y&&(u.text=y);void 0!==x&&(u.origin=x)});gv(t,"beforeChange",t,u);t.cm&&gv(t.cm,"beforeChange",t.cm,u);return u.canceled?null:{from:u.from,to:u.to,text:u.text,origin:u.origin}}function dU(t,r,v){if(t.cm){if(!t.cm.curOp){return gq(t.cm,dU)(t,r,v)}if(t.cm.state.suppressEdits){return}}if(eL(t,"beforeChange")||t.cm&&eL(t.cm,"beforeChange")){if(r=cr(t,r,!0),!r){return}}if(v=b5&&!v&&e9(t,r.from,r.to)){for(var u=v.length-1;0<=u;--u){bR(t,{from:v[u].from,to:v[u].to,text:u?[""]:r.text})}}else{bR(t,r)}}function bR(t,r){if(1!=r.text.length||""!=r.text[0]||0!=gK(r.from,r.to)){var v=by(t,r);fi(t,r,v,t.cm?t.cm.curOp.id:NaN);f5(t,r,v,di(t,r));var u=[];cp(t,function(w,x){x||-1!=go(u,w.history)||(bD(w.history,r),u.push(w.history));f5(w,r,null,di(w,r))})}}function aS(C,B,A){if(!C.cm||!C.cm.state.suppressEdits||A){for(var z=C.history,y,x=C.sel,w="undo"==B?z.done:z.undone,v="undo"==B?z.undone:z.done,u=0;u<w.length&&(y=w[u],A?!y.ranges||y.equals(C.sel):y.ranges);u++){}if(u!=w.length){for(z.lastOrigin=z.lastSelOrigin=null;;){if(y=w.pop(),y.ranges){gW(y,v);if(A&&!y.equals(C.sel)){gm(C,y,{clearRedo:!1});return}x=y}else{break}}var t=[];gW(x,v);v.push({changes:t,generation:z.generation});z.generation=y.generation||++z.maxGeneration;var r=eL(C,"beforeChange")||C.cm&&eL(C.cm,"beforeChange");A=function(F){var G=y.changes[F];G.origin=B;if(r&&!cr(C,G,!1)){return w.length=0,{}}t.push(aE(C,G));var E=F?by(C,G):fK(w);f5(C,G,E,eV(C,G));!F&&C.cm&&C.cm.scrollIntoView({from:G.from,to:aU(G)});var D=[];cp(C,function(J,H){H||-1!=go(D,J.history)||(bD(J.history,G),D.push(J.history));f5(J,G,null,eV(J,G))})};for(z=y.changes.length-1;0<=z;--z){if(x=A(z)){return x.v}}}}}function bi(t,r){if(0!=r&&(t.first+=r,t.sel=new fn(fl(t.sel.ranges,function(w){return new gI(fR(w.anchor.line+r,w.anchor.ch),fR(w.head.line+r,w.head.ch))}),t.sel.primIndex),t.cm)){f8(t.cm,t.first,t.first-r,r);for(var v=t.cm.display,u=v.viewFrom;u<v.viewTo;u++){a8(t.cm,u,"gutter")}}}function f5(t,r,w,v){if(t.cm&&!t.cm.curOp){return gq(t.cm,f5)(t,r,w,v)}if(r.to.line<t.first){bi(t,r.text.length-1-(r.to.line-r.from.line))}else{if(!(r.from.line>t.lastLine())){if(r.from.line<t.first){var u=r.text.length-1-(t.first-r.from.line);bi(t,u);r={from:fR(t.first,0),to:fR(r.to.line+u,r.to.ch),text:[fK(r.text)],origin:r.origin}}u=t.lastLine();r.to.line>u&&(r={from:r.from,to:fR(u,fP(t,u).text.length),text:[r.text[0]],origin:r.origin});r.removed=hl(t,r.from,r.to);w||(w=by(t,r));t.cm?am(t.cm,r,v):aR(t,r,v);a6(t,w,bW)}}}function am(A,z,y){var x=A.doc,w=A.display,v=z.from,u=z.to,t=!1,r=v.line;A.options.lineWrapping||(r=gE(cR(fP(x,v.line))),x.iter(r,u.line+1,function(B){if(B==w.maxLine){return t=!0}}));-1<x.sel.contains(z.from,z.to)&&fV(A);aR(x,z,y,hv(A));A.options.lineWrapping||(x.iter(r,v.line+z.text.length,function(C){var B=dE(C);B>w.maxLineLength&&(w.maxLine=C,w.maxLineLength=B,w.maxLineChanged=!0,t=!1)}),t&&(A.curOp.updateMaxLine=!0));dl(x,v.line);b(A,400);y=z.text.length-(u.line-v.line)-1;z.full?f8(A):v.line!=u.line||1!=z.text.length||cG(A.doc,z)?f8(A,v.line,u.line+1,y):a8(A,v.line,"text");y=eL(A,"changes");if((x=eL(A,"change"))||y){z={from:v,to:u,text:z.text,removed:z.removed,origin:z.origin},x&&gn(A,"change",A,z),y&&(A.curOp.changeObjs||(A.curOp.changeObjs=[])).push(z)}A.display.selForContextMenu=null}function dF(t,r,x,w,v){w||(w=x);if(0>gK(w,x)){var u=w;w=x;x=u}"string"==typeof r&&(r=t.splitLines(r));dU(t,{from:x,to:w,text:r,origin:v})}function aW(t,r,v,u){v<t.line?t.line+=u:r<t.line&&(t.line=r,t.ch=0)}function aJ(A,z,y,x){for(var w=0;w<A.length;++w){var v=A[w],u=!0;if(v.ranges){for(v.copied||(v=A[w]=v.deepCopy(),v.copied=!0),u=0;u<v.ranges.length;u++){aW(v.ranges[u].anchor,z,y,x),aW(v.ranges[u].head,z,y,x)}}else{for(var t=0;t<v.changes.length;++t){var r=v.changes[t];if(y<r.from.line){r.from=fR(r.from.line+x,r.from.ch),r.to=fR(r.to.line+x,r.to.ch)}else{if(z<=r.to.line){u=!1;break}}}u||(A.splice(0,w+1),w=0)}}}function bD(t,r){var v=r.from.line,u=r.to.line;r=r.text.length-(u-v)-1;aJ(t.done,v,u,r);aJ(t.undone,v,u,r)}function fJ(t,r,x,w){var v=r,u=r;"number"==typeof r?u=fP(t,Math.max(t.first,Math.min(r,t.first+t.size-1))):v=gE(r);if(null==v){return null}w(u,v)&&t.cm&&a8(t.cm,v,x);return u}function ft(t){this.lines=t;this.parent=null;for(var r=0,u=0;u<t.length;++u){t[u].parent=this,r+=t[u].height}this.height=r}function e6(t){this.children=t;for(var r=0,w=0,v=0;v<t.length;++v){var u=t[v],r=r+u.chunkSize(),w=w+u.height;u.parent=this}this.size=r;this.height=w;this.parent=null}function k(t,r,x,w){var v=new eR(t,x,w),u=t.cm;u&&v.noHScroll&&(u.display.alignWidgets=!0);fJ(t,r,"widget",function(y){var z=y.widgets||(y.widgets=[]);null==v.insertAt?z.push(v):z.splice(Math.min(z.length-1,Math.max(0,v.insertAt)),0,v);v.line=y;u&&!fL(t,y)&&(z=cw(y)<t.scrollTop,c5(y,y.height+gX(v)),z&&aZ(u,v.height),u.curOp.forceUpdate=!0);return !0});gn(u,"lineWidgetAdded",u,v,"number"==typeof r?r:gE(r));return v}function dr(A,z,y,x,w){if(x&&x.shared){return ht(A,z,y,x,w)}if(A.cm&&!A.cm.curOp){return gq(A.cm,dr)(A,z,y,x,w)}var v=new aH(A,w);w=gK(z,y);x&&c(x,v,!1);if(0<w||0==w&&!1!==v.clearWhenEmpty){return v}v.replacedWith&&(v.collapsed=!0,v.widgetNode=gk("span",[v.replacedWith],"CodeMirror-widget"),x.handleMouseEvents||v.widgetNode.setAttribute("cm-ignore-events","true"),x.insertLeft&&(v.widgetNode.insertLeft=!0));if(v.collapsed){if(br(A,z.line,z,y,v)||z.line!=y.line&&br(A,y.line,z,y,v)){throw Error("Inserting collapsed marker partially overlapping an existing one")}hs=!0}v.addToHistory&&fi(A,{from:z,to:y,origin:"markText"},A.sel,NaN);var u=z.line,t=A.cm,r;A.iter(u,y.line+1,function(B){t&&v.collapsed&&!t.options.lineWrapping&&cR(B)==t.display.maxLine&&(r=!0);v.collapsed&&u!=z.line&&c5(B,0);var C=new dT(v,u==z.line?z.ch:null,u==y.line?y.ch:null);B.markedSpans=B.markedSpans?B.markedSpans.concat([C]):[C];C.marker.attachLine(B);++u});v.collapsed&&A.iter(z.line,y.line+1,function(B){fL(A,B)&&c5(B,0)});v.clearOnEnter&&fO(v,"beforeCursorEnter",function(){return v.clear()});v.readOnly&&(b5=!0,(A.history.done.length||A.history.undone.length)&&A.clearHistory());v.collapsed&&(v.id=++av,v.atomic=!0);if(t){r&&(t.curOp.updateMaxLine=!0);if(v.collapsed){f8(t,z.line,y.line+1)}else{if(v.className||v.title||v.startStyle||v.endStyle||v.css){for(x=z.line;x<=y.line;x++){a8(t,x,"text")}}}v.atomic&&dm(t.doc);gn(t,"markerAdded",t,v)}return v}function ht(t,r,z,y,x){y=c(y);y.shared=!1;var w=[dr(t,r,z,y,x)],v=w[0],u=y.widgetNode;cp(t,function(A){u&&(y.widgetNode=u.cloneNode(!0));w.push(dr(A,fM(A,r),fM(A,z),y,x));for(var B=0;B<A.linked.length;++B){if(A.linked[B].isParent){return}}v=fK(w)});return new eC(w,v)}function I(r){return r.findMarks(fR(r.first,0),r.clipPos(fR(r.lastLine())),function(t){return t.parent})}function g7(t){for(var r=function(v){v=t[v];var x=[v.primary.doc];cp(v.primary.doc,function(z){return x.push(z)});for(var y=0;y<v.markers.length;y++){var w=v.markers[y];-1==go(x,w.doc)&&(w.parent=null,v.markers.splice(y--,1))}},u=0;u<t.length;u++){r(u)}}function gL(B){var A=this;e(A);if(!gr(A,B)&&!aA(A.display,B)){gj(B);gG&&(hn=+new Date);var z=dN(A,B,!0),y=B.dataTransfer.files;if(z&&!A.isReadOnly()){if(y&&y.length&&window.FileReader&&window.File){for(var x=y.length,w=Array(x),v=0,u=function(C,E){if(!A.options.allowDropFileTypes||-1!=go(A.options.allowDropFileTypes,C.type)){var D=new FileReader;D.onload=gq(A,function(){var F=D.result;/[\x00-\x08\x0e-\x1f]{2}/.test(F)&&(F="");w[E]=F;++v==x&&(z=fM(A.doc,z),F={from:z,to:z,text:A.doc.splitLines(w.join(A.doc.lineSeparator())),origin:"paste"},dU(A.doc,F),er(A.doc,al(z,aU(F))))});D.readAsText(C)}},t=0;t<x;++t){u(y[t],t)}}else{if(A.state.draggingText&&-1<A.doc.sel.contains(z)){A.state.draggingText(B),setTimeout(function(){return A.display.input.focus()},20)}else{try{if(u=B.dataTransfer.getData("Text")){A.state.draggingText&&!A.state.draggingText.copy&&(t=A.listSelections());a6(A.doc,al(z,z));if(t){for(y=0;y<t.length;++y){dF(A.doc,"",t[y].anchor,t[y].head,"drag")}}A.replaceSelection(u,"around","paste");A.display.input.focus()}}catch(r){}}}}}}function e(r){r.display.dragCursor&&(r.display.lineSpace.removeChild(r.display.dragCursor),r.display.dragCursor=null)}function gT(t){if(document.getElementsByClassName){for(var r=document.getElementsByClassName("CodeMirror"),v=0;v<r.length;v++){var u=r[v].CodeMirror;u&&t(u)}}}function f0(){var r;fO(window,"resize",function(){null==r&&(r=setTimeout(function(){r=null;gT(fD)},100))});fO(window,"blur",function(){return gT(aG)})}function fD(t){var r=t.display;if(r.lastWrapHeight!=r.wrapper.clientHeight||r.lastWrapWidth!=r.wrapper.clientWidth){r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.scrollbarsClipped=!1,t.setSize()}}function fo(t){var r=t.split(/-(?!$)/);t=r[r.length-1];for(var z,y,x,w,v=0;v<r.length-1;v++){var u=r[v];if(/^(cmd|meta|m)$/i.test(u)){w=!0}else{if(/^a(lt)?$/i.test(u)){z=!0}else{if(/^(c|ctrl|control)$/i.test(u)){y=!0}else{if(/^s(hift)?$/i.test(u)){x=!0}else{throw Error("Unrecognized modifier name: "+u)}}}}}z&&(t="Alt-"+t);y&&(t="Ctrl-"+t);w&&(t="Cmd-"+t);x&&(t="Shift-"+t);return t}function e1(B){var A={},z;for(z in B){if(B.hasOwnProperty(z)){var y=B[z];if(!/^(name|fallthrough|(de|at)tach)$/.test(z)){if("..."!=y){for(var x=fl(z.split(" "),fo),w=0;w<x.length;w++){if(w==x.length-1){var v=x.join(" ");var u=y}else{v=x.slice(0,w+1).join(" "),u="..."}var t=A[v];if(!t){A[v]=u}else{if(t!=u){throw Error("Inconsistent bindings for "+v)}}}}delete B[z]}}}for(var r in A){B[r]=A[r]}return B}function c4(t,r,x,w){r=aF(r);var v=r.call?r.call(t,w):r[t];if(!1===v){return"nothing"}if("..."===v){return"multi"}if(null!=v&&x(v)){return"handled"}if(r.fallthrough){if("[object Array]"!=Object.prototype.toString.call(r.fallthrough)){return c4(t,r.fallthrough,x,w)}for(v=0;v<r.fallthrough.length;v++){var u=c4(t,r.fallthrough[v],x,w);if(u){return u}}}}function bw(r){r="string"==typeof r?r:at[r.keyCode];return"Ctrl"==r||"Alt"==r||"Shift"==r||"Mod"==r}function a3(t,r,v){var u=t;r.altKey&&"Alt"!=u&&(t="Alt-"+t);(aP?r.metaKey:r.ctrlKey)&&"Ctrl"!=u&&(t="Ctrl-"+t);(aP?r.ctrlKey:r.metaKey)&&"Cmd"!=u&&(t="Cmd-"+t);!v&&r.shiftKey&&"Shift"!=u&&(t="Shift-"+t);return t}function aC(t,r){if(dG&&34==t.keyCode&&t["char"]){return !1}var u=at[t.keyCode];return null==u||t.altGraphKey?!1:a3(u,t,r)}function aF(r){return"string"==typeof r?en[r]:r}function cQ(t,r){for(var y=t.doc.sel.ranges,x=[],w=0;w<y.length;w++){for(var v=r(y[w]);x.length&&0>=gK(v.from,fK(x).to);){var u=x.pop();if(0>gK(u.from,v.from)){v.from=u.from;break}}x.push(v)}g6(t,function(){for(var z=x.length-1;0<=z;z--){dF(t.doc,"",x[z].from,x[z].to,"+delete")}fm(t)})}function an(t,r){var v=fP(t.doc,r),u=cR(v);u!=v&&(r=gE(u));return cI(!0,t,u,r,1)}function l(t,r){var v=an(t,r.line),u=fP(t.doc,v.line);t=gY(u,t.doc.direction);return t&&0!=t[0].level?v:(u=Math.max(0,u.text.search(/\S/)),fR(v.line,r.line==v.line&&r.ch<=u&&r.ch?0:u,v.sticky))}function aq(t,r,w){if("string"==typeof r&&(r=d1[r],!r)){return !1}t.display.input.ensurePolled();var v=t.display.shift,u=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),w&&(t.display.shift=!1),u=r(t)!=o}finally{t.display.shift=v,t.state.suppressEdits=!1}return u}function eM(t,r,w){for(var v=0;v<t.state.keyMaps.length;v++){var u=c4(r,t.state.keyMaps[v],w,t);if(u){return u}}return t.options.extraKeys&&c4(r,t.options.extraKeys,w,t)||c4(r,t.options.keyMap,w,t)}function dM(t,r,w,v){var u=t.state.keySeq;if(u){if(bw(r)){return"handled"}ex.set(50,function(){t.state.keySeq==u&&(t.state.keySeq=null,t.display.input.reset())});r=u+" "+r}v=eM(t,r,v);"multi"==v&&(t.state.keySeq=r);"handled"==v&&gn(t,"keyHandled",t,r,w);if("handled"==v||"multi"==v){gj(w),bF(t)}return u&&!v&&/\'$/.test(r)?(gj(w),!0):!!v}function hu(t,r){var u=aC(r,!0);return u?r.shiftKey&&!t.state.keySeq?dM(t,"Shift-"+u,r,function(v){return aq(t,v,!0)})||dM(t,u,r,function(v){if("string"==typeof v?/^go[A-Z]/.test(v):v.motion){return aq(t,v)}}):dM(t,u,r,function(v){return aq(t,v)}):!1}function ei(t,r,u){return dM(t,"'"+u+"'",r,function(v){return aq(t,v,!0)})}function g8(t){this.curOp.focus=bI();if(!gr(this,t)){gG&&11>gJ&&27==t.keyCode&&(t.returnValue=!1);var r=t.keyCode;this.display.shift=16==r||t.shiftKey;var u=hu(this,t);dG&&(hi=u?r:null,!u&&88==r&&!dW&&(d9?t.metaKey:t.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=r||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||dH(this)}}function dH(t){function r(v){18!=v.keyCode&&v.altKey||(dz(u,"CodeMirror-crosshair"),fZ(document,"keyup",r),fZ(document,"mouseover",r))}var u=t.display.lineDiv;q(u,"CodeMirror-crosshair");fO(document,"keyup",r);fO(document,"mouseover",r)}function gM(r){16==r.keyCode&&(this.doc.sel.shift=!1);gr(this,r)}function f1(t){if(!(aA(this.display,t)||gr(this,t)||t.ctrlKey&&!t.altKey||d9&&t.metaKey)){var r=t.keyCode,u=t.charCode;if(dG&&r==hi){hi=null,gj(t)}else{if(!dG||t.which&&!(10>t.which)||!hu(this,t)){if(r=String.fromCharCode(null==u?r:u),"\b"!=r&&!ei(this,t,r)){this.display.input.onKeyPress(t)}}}}}function dt(t,r){var u=+new Date;if(dy&&dy.compare(u,t,r)){return dj=dy=null,"triple"}if(dj&&dj.compare(u,t,r)){return dy=new gO(u,t,r),dj=null,"double"}dj=new gO(u,t,r);dy=null;return"single"}function fE(t){var r=this.display;if(!(gr(this,t)||r.activeTouch&&r.input.supportsTouch())){if(r.input.ensurePolled(),r.shift=t.shiftKey,aA(r,t)){gl||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100))}else{if(!f3(this,t,"gutterClick",!0)){var w=dN(this,t),v=fj(t),u=w?dt(w,v):"single";window.focus();1==v&&this.state.selectingText&&this.state.selectingText(t);w&&c6(this,v,w,u,t)||(1==v?w?cS(this,w,u,t):(t.target||t.srcElement)==r.scroller&&gj(t):2==v?(w&&bz(this.doc,w),setTimeout(function(){return r.input.focus()},20)):3==v&&(fG?fp(this,t):fF(this)))}}}}function c6(t,r,x,w,v){var u="Click";"double"==w?u="Double"+u:"triple"==w&&(u="Triple"+u);return dM(t,a3((1==r?"Left":2==r?"Middle":"Right")+u,v),v,function(y){"string"==typeof y&&(y=d1[y]);if(!y){return !1}var z=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),z=y(t,x)!=o}finally{t.state.suppressEdits=!1}return z})}function cS(t,r,y,x){gG?setTimeout(fH(f2,t),0):t.curOp.focus=bI();var w=t.getOption("configureMouse"),w=w?w(t,y,x):{};null==w.unit&&(w.unit=(cx?x.shiftKey&&x.metaKey:x.altKey)?"rectangle":"single"==y?"char":"double"==y?"word":"line");if(null==w.extend||t.doc.extend){w.extend=t.doc.extend||x.shiftKey}null==w.addNew&&(w.addNew=d9?x.metaKey:x.ctrlKey);null==w.moveOnDrag&&(w.moveOnDrag=!(d9?x.altKey:x.ctrlKey));var v=t.doc.sel,u;t.options.dragDrop&&cj&&!t.isReadOnly()&&"single"==y&&-1<(u=v.contains(r))&&(0>gK((u=v.ranges[u]).from(),r)||0<r.xRel)&&(0<gK(u.to(),r)||0>r.xRel)?bX(t,x,r,w):bJ(t,x,r,w)}function bX(A,z,y,x){var w=A.display,v=!1,u=gq(A,function(B){gl&&(w.scroller.draggable=!1);A.state.draggingText=!1;fZ(document,"mouseup",u);fZ(document,"mousemove",t);fZ(w.scroller,"dragstart",r);fZ(w.scroller,"drop",u);v||(gj(B),x.addNew||bz(A.doc,y,null,null,x.extend),gl||gG&&9==gJ?setTimeout(function(){document.body.focus();w.input.focus()},20):w.input.focus())}),t=function(B){v=v||10<=Math.abs(z.clientX-B.clientX)+Math.abs(z.clientY-B.clientY)},r=function(){return v=!0};gl&&(w.scroller.draggable=!0);A.state.draggingText=u;u.copy=!x.moveOnDrag;w.scroller.dragDrop&&w.scroller.dragDrop();fO(document,"mouseup",u);fO(document,"mousemove",t);fO(w.scroller,"dragstart",r);fO(w.scroller,"drop",u);fF(A);setTimeout(function(){return w.input.focus()},20)}function e2(t,r,u){if("char"==u){return new gI(r,r)}if("word"==u){return t.findWordAt(r)}if("line"==u){return new gI(fR(r.line,0),fM(t.doc,fR(r.line+1,0)))}t=u(t,r);return new gI(t.from,t.to)}function bJ(P,O,N,M){function L(S){if(0!=gK(A,S)){if(A=S,"rectangle"==M.unit){for(var R=[],Q=P.options.tabSize,z=e0(fP(F,N.line).text,N.ch,Q),y=e0(fP(F,S.line).text,S.ch,Q),w=Math.min(z,y),z=Math.max(z,y),y=Math.min(N.line,S.line),V=Math.min(P.lastLine(),Math.max(N.line,S.line));y<=V;y++){var T=fP(F,y).text,U=fs(T,w,Q);w==z?R.push(new gI(fR(y,U),fR(y,U))):T.length>U&&R.push(new gI(fR(y,U),fR(y,fs(T,z,Q))))}R.length||R.push(new gI(N,N));gm(F,ds(E.ranges.slice(0,B).concat(R),B),{origin:"*mouse",scroll:!1});P.scrollIntoView(S)}else{R=C,w=e2(P,S,M.unit),S=R.anchor,0<gK(w.anchor,S)?(Q=w.head,S=d7(R.from(),w.anchor)):(Q=w.anchor,S=eu(R.to(),w.head)),R=E.ranges.slice(0),R[B]=new gI(fM(F,S),Q),gm(F,ds(R,B),fr)}}}function J(w){var Q=++v,z=dN(P,w,!0,"rectangle"==M.unit);if(z){if(0!=gK(z,A)){P.curOp.focus=bI();L(z);var y=aY(G,F);(z.line>=y.to||z.line<y.from)&&setTimeout(gq(P,function(){v==Q&&J(w)}),150)}else{var t=w.clientY<x.top?-20:w.clientY>x.bottom?20:0;t&&setTimeout(gq(P,function(){v==Q&&(G.scroller.scrollTop+=t,J(w))}),50)}}}function H(t){P.state.selectingText=!1;v=Infinity;gj(t);G.input.focus();fZ(document,"mousemove",r);fZ(document,"mouseup",u);F.history.lastSelOrigin=null}var G=P.display,F=P.doc;gj(O);var E=F.sel,D=E.ranges;if(M.addNew&&!M.extend){var B=F.sel.contains(N);var C=-1<B?D[B]:new gI(N,N)}else{C=F.sel.primary(),B=F.sel.primIndex}"rectangle"==M.unit?(M.addNew||(C=new gI(N,N)),N=dN(P,O,!0,!0),B=-1):(O=e2(P,N,M.unit),C=M.extend?ap(C,O.anchor,O.head,M.extend):O);M.addNew?-1==B?(B=D.length,gm(F,ds(D.concat([C]),B),{scroll:!1,origin:"*mouse"})):1<D.length&&D[B].empty()&&"char"==M.unit&&!M.extend?(gm(F,ds(D.slice(0,B).concat(D.slice(B+1)),0),{scroll:!1,origin:"*mouse"}),E=F.sel):n(F,B,C,fr):(B=0,gm(F,new fn([C],0),fr),E=F.sel);var A=N,x=G.wrapper.getBoundingClientRect(),v=0,r=gq(P,function(t){fj(t)?J(t):H(t)}),u=gq(P,H);P.state.selectingText=u;fO(document,"mousemove",r);fO(document,"mouseup",u)}function f3(A,z,y,x){try{var w=z.clientX;var v=z.clientY}catch(r){return !1}if(w>=Math.floor(A.display.gutters.getBoundingClientRect().right)){return !1}x&&gj(z);x=A.display;var u=x.lineDiv.getBoundingClientRect();if(v>u.bottom||!eL(A,y)){return g3(z)}v-=u.top-x.viewOffset;for(u=0;u<A.options.gutters.length;++u){var t=x.gutters.childNodes[u];if(t&&t.getBoundingClientRect().right>=w){return w=gR(A.doc,v),gv(A,y,A,w,A.options.gutters[u],z),g3(z)}}}function fp(t,r){var u;(u=aA(t.display,r))||(u=eL(t,"gutterContextMenu")?f3(t,r,"gutterContextMenu",!1):!1);if(!u&&!gr(t,r,"contextmenu")){t.display.input.onContextMenu(r)}}function eN(r){r.display.wrapper.className=r.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+r.options.theme.replace(/(^|\s)\s*/g," cm-s-");a7(r)}function cX(r){cz(r);f8(r);e3(r)}function bo(t,r,u){!r!=!(u&&u!=cv)&&(u=t.display.dragFunctions,r=r?fO:fZ,r(t.display.scroller,"dragstart",u.start),r(t.display.scroller,"dragenter",u.enter),r(t.display.scroller,"dragover",u.over),r(t.display.scroller,"dragleave",u.leave),r(t.display.scroller,"drop",u.drop))}function cE(r){r.options.lineWrapping?(q(r.display.wrapper,"CodeMirror-wrap"),r.display.sizer.style.minWidth="",r.display.sizerWidth=null):(dz(r.display.wrapper,"CodeMirror-wrap"),cn(r));bT(r);f8(r);a7(r);setTimeout(function(){return eZ(r)},100)}function gz(t,r){var x=this;if(!(this instanceof gz)){return new gz(t,r)}this.options=r=r?c(r):{};c(ey,r,!1);gV(r);var w=r.value;"string"==typeof w&&(w=new f6(w,r.mode,null,r.lineSeparator,r.direction));this.doc=w;var v=new gz.inputStyles[r.inputStyle](this);t=this.display=new fw(t,w,v);t.wrapper.CodeMirror=this;cz(this);eN(this);r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");dJ(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new b3,keySeq:null,specialChars:null};r.autofocus&&!bV&&t.input.focus();gG&&11>gJ&&setTimeout(function(){return x.display.input.reset(!0)},20);gZ(this);ej||(f0(),ej=!0);cY(this);this.curOp.forceUpdate=!0;g1(this,w);r.autofocus&&!bV||this.hasFocus()?setTimeout(fH(bk,this),20):aG(this);for(var u in a){if(a.hasOwnProperty(u)){a[u](x,r[u],cv)}}eO(this);r.finishInit&&r.finishInit(this);for(w=0;w<e4.length;++w){e4[w](x)}cD(this);gl&&r.lineWrapping&&"optimizelegibility"==getComputedStyle(t.lineDiv).textRendering&&(t.lineDiv.style.textRendering="auto")}function gZ(t){function r(){x.activeTouch&&(w=setTimeout(function(){return x.activeTouch=null},1000),v=x.activeTouch,v.end=+new Date)}function y(A,z){if(null==z.left){return !0}var B=z.left-A.left;A=z.top-A.top;return 400<B*B+A*A}var x=t.display;fO(x.scroller,"mousedown",gq(t,fE));gG&&11>gJ?fO(x.scroller,"dblclick",gq(t,function(z){if(!gr(t,z)){var A=dN(t,z);!A||f3(t,z,"gutterClick",!0)||aA(t.display,z)||(gj(z),z=t.findWordAt(A),bz(t.doc,z.anchor,z.head))}})):fO(x.scroller,"dblclick",function(z){return gr(t,z)||gj(z)});fG||fO(x.scroller,"contextmenu",function(z){return fp(t,z)});var w,v={end:0};fO(x.scroller,"touchstart",function(z){var A;if(A=!gr(t,z)){1!=z.touches.length?A=!1:(A=z.touches[0],A=1>=A.radiusX&&1>=A.radiusY),A=!A}A&&(x.input.ensurePolled(),clearTimeout(w),A=+new Date,x.activeTouch={start:A,moved:!1,prev:300>=A-v.end?v:null},1==z.touches.length&&(x.activeTouch.left=z.touches[0].pageX,x.activeTouch.top=z.touches[0].pageY))});fO(x.scroller,"touchmove",function(){x.activeTouch&&(x.activeTouch.moved=!0)});fO(x.scroller,"touchend",function(B){var A=x.activeTouch;if(A&&!aA(x,B)&&null!=A.left&&!A.moved&&300>new Date-A.start){var z=t.coordsChar(x.activeTouch,"page"),A=!A.prev||y(A,A.prev)?new gI(z,z):!A.prev.prev||y(A,A.prev.prev)?t.findWordAt(z):new gI(fR(z.line,0),fM(t.doc,fR(z.line+1,0)));t.setSelection(A.anchor,A.head);t.focus();gj(B)}r()});fO(x.scroller,"touchcancel",r);fO(x.scroller,"scroll",function(){x.scroller.clientHeight&&(p(t,x.scroller.scrollTop),dk(t,x.scroller.scrollLeft,!0),gv(t,"scroll",t))});fO(x.scroller,"mousewheel",function(z){return bZ(t,z)});fO(x.scroller,"DOMMouseScroll",function(z){return bZ(t,z)});fO(x.wrapper,"scroll",function(){return x.wrapper.scrollTop=x.wrapper.scrollLeft=0});x.dragFunctions={enter:function(z){gr(t,z)||aN(z)},over:function(z){if(!gr(t,z)){var A=dN(t,z);if(A){var B=document.createDocumentFragment();gN(t,A,B);t.display.dragCursor||(t.display.dragCursor=fQ("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv));gC(t.display.dragCursor,B)}aN(z)}},start:function(z){if(gG&&(!t.state.draggingText||100>+new Date-hn)){aN(z)}else{if(!gr(t,z)&&!aA(t.display,z)&&(z.dataTransfer.setData("Text",t.getSelection()),z.dataTransfer.effectAllowed="copyMove",z.dataTransfer.setDragImage&&!dX)){var A=fQ("img",null,null,"position: fixed; left: 0; top: 0;");A.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";dG&&(A.width=A.height=1,t.display.wrapper.appendChild(A),A._top=A.offsetTop);z.dataTransfer.setDragImage(A,0,0);dG&&A.parentNode.removeChild(A)}}},drop:gq(t,gL),leave:function(z){gr(t,z)||e(t)}};var u=x.input.getField();fO(u,"keyup",function(z){return gM.call(t,z)});fO(u,"keydown",gq(t,g8));fO(u,"keypress",gq(t,f1));fO(u,"focus",function(z){return bk(t,z)});fO(u,"blur",function(z){return aG(t,z)})}function cC(C,B,A,z){var y=C.doc,x;null==A&&(A="add");"smart"==A&&(y.mode.indent?x=az(C,B).state:A="prev");var w=C.options.tabSize,v=fP(y,B),u=e0(v.text,null,w);v.stateAfter&&(v.stateAfter=null);var t=v.text.match(/^\s*/)[0];if(!z&&!/\S/.test(v.text)){var r=0;A="not"}else{if("smart"==A&&(r=y.mode.indent(x,v.text.slice(t.length),v.text),r==o||150<r)){if(!z){return}A="prev"}}"prev"==A?r=B>y.first?e0(fP(y,B-1).text,null,w):0:"add"==A?r=u+C.options.indentUnit:"subtract"==A?r=u-C.options.indentUnit:"number"==typeof A&&(r=u+A);r=Math.max(0,r);A="";z=0;if(C.options.indentWithTabs){for(C=Math.floor(r/w);C;--C){z+=w,A+="\t"}}z<r&&(A+=e5(r-z));if(A!=t){return dF(y,A,fR(B,0),fR(B,t.length),"+input"),v.stateAfter=null,!0}for(w=0;w<y.sel.ranges.length;w++){if(v=y.sel.ranges[w],v.head.line==B&&v.head.ch<t.length){B=fR(B,t.length);n(y,w,new gI(B,B));break}}}function eP(E,D,C,B,A){var z=E.doc;E.display.shift=!1;B||(B=z.sel);var y=E.state.pasteIncoming||"paste"==A,x=eA(D),w=null;if(y&&1<B.ranges.length){if(gH&&gH.text.join("\n")==D){if(0==B.ranges.length%gH.text.length){for(var w=[],v=0;v<gH.text.length;v++){w.push(z.splitLines(gH.text[v]))}}}else{x.length==B.ranges.length&&E.options.pasteLinesPerSelection&&(w=fl(x,function(F){return[F]}))}}for(var u,v=B.ranges.length-1;0<=v;v--){u=B.ranges[v];var r=u.from(),t=u.to();u.empty()&&(C&&0<C?r=fR(r.line,r.ch-C):E.state.overwrite&&!y?t=fR(t.line,Math.min(fP(z,t.line).text.length,t.ch+fK(x).length)):gH&&gH.lineWise&&gH.text.join("\n")==D&&(r=t=fR(r.line,0)));u=E.curOp.updateInput;r={from:r,to:t,text:w?w[v%w.length]:x,origin:A||(y?"paste":E.state.cutIncoming?"cut":"+input")};dU(E.doc,r);gn(E,"inputRead",E,r)}D&&!y&&dI(E,D);fm(E);E.curOp.updateInput=u;E.curOp.typing=!0;E.state.pasteIncoming=E.state.cutIncoming=!1}function du(t,r){var u=t.clipboardData&&t.clipboardData.getData("Text");if(u){return t.preventDefault(),r.isReadOnly()||r.options.disableInput||g6(r,function(){return eP(r,u,0,null,"paste")}),!0}}function dI(t,r){if(t.options.electricChars&&t.options.smartIndent){for(var z=t.doc.sel,y=z.ranges.length-1;0<=y;y--){var x=z.ranges[y];if(!(100<x.head.ch||y&&z.ranges[y-1].head.line==x.head.line)){var w=t.getModeAt(x.head),v=!1;if(w.electricChars){for(var u=0;u<w.electricChars.length;u++){if(-1<r.indexOf(w.electricChars.charAt(u))){v=cC(t,x.head.line,"smart");break}}}else{w.electricInput&&w.electricInput.test(fP(t.doc,x.head.line).text.slice(0,x.head.ch))&&(v=cC(t,x.head.line,"smart"))}v&&gn(t,"electricInput",t,x.head.line)}}}}function c7(t){for(var r=[],w=[],v=0;v<t.doc.sel.ranges.length;v++){var u=t.doc.sel.ranges[v].head.line,u={anchor:fR(u,0),head:fR(u+1,0)};w.push(u);r.push(t.getRange(u.anchor,u.head))}return{text:r,ranges:w}}function cT(t,r){t.setAttribute("autocorrect","off");t.setAttribute("autocapitalize","off");t.setAttribute("spellcheck",!!r)}function cy(){var t=fQ("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),r=fQ("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");gl?t.style.width="1000px":t.setAttribute("wrap","off");co&&(t.style.border="1px solid black");cT(t);return r}function el(E,D,C,B,A){function z(G){var F=A?g2(E.cm,w,D,C):bs(w,D,C);if(null==F){if(G=!G){G=D.line+C,G<E.first||G>=E.first+E.size?G=!1:(D=new fR(G,D.ch,D.sticky),G=w=fP(E,G))}if(G){D=cI(A,E.cm,w,D.line,C)}else{return !1}}else{D=F}return !0}var y=D,x=C,w=fP(E,D.line);if("char"==B){z()}else{if("column"==B){z(!0)}else{if("word"==B||"group"==B){var v=null;B="group"==B;for(var u=E.cm&&E.cm.getHelper(D,"wordChars"),r=!0;!(0>C)||z(!r);r=!1){var t=w.text.charAt(D.ch)||"\n",t=eY(t,u)?"w":B&&"\n"==t?"n":!B||/\s/.test(t)?null:"p";!B||r||t||(t="s");if(v&&v!=t){0>C&&(C=1,z(),D.sticky="after");break}t&&(v=t);if(0<C&&!z(!r)){break}}}}}x=hw(E,D,y,x,!0);dL(y,x)&&(x.hitSide=!0);return x}function ck(t,r,y,x){var w=t.doc,v=r.left;if("page"==x){var u=Math.max(Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-0.5*eo(t.display),3);u=(0<y?r.bottom:r.top)+y*u}else{"line"==x&&(u=0<y?r.bottom+3:r.top-3)}for(;;){r=ct(t,v,u);if(!r.outside){break}if(0>y?0>=u:u>=w.height){r.hitSide=!0;break}u+=5*y}return r}function bY(t,r){var v=dp(t,r.line);if(!v||v.hidden){return null}var u=fP(t.doc,r.line),v=f(v,u,r.line);t=gY(u,t.doc.direction);u="left";t&&(u=b1(t,r.ch)%2?"right":"left");r=ho(v.map,r.ch,u);r.offset="right"==r.collapse?r.end:r.start;return r}function gu(r){for(;r;r=r.parentNode){if(/CodeMirror-gutter-wrapper/.test(r.className)){return !0}}return !1}function b9(t,r){r&&(t.bad=!0);return t}function fS(C,B,A,z,y){function x(D){return function(E){return E.id==D}}function w(D){D&&(t&&(u+=r,t=!1),u+=D)}function v(D){if(1==D.nodeType){var F=D.getAttribute("cm-text");if(null!=F){w(F||D.textContent.replace(/\u200b/g,""))}else{var F=D.getAttribute("cm-marker"),E;if(F){D=C.findMarks(fR(z,0),fR(y+1,0),x(+F)),D.length&&(E=D[0].find())&&w(hl(C.doc,E.from,E.to).join(r))}else{if("false"!=D.getAttribute("contenteditable")){(E=/^(pre|div|p)$/i.test(D.nodeName))&&t&&(u+=r,t=!1);for(F=0;F<D.childNodes.length;F++){v(D.childNodes[F])}E&&(t=!0)}}}}else{3==D.nodeType&&w(D.nodeValue)}}for(var u="",t=!1,r=C.doc.lineSeparator();;){v(B);if(B==A){break}B=B.nextSibling}return u}function hj(t,r,x){if(r==t.display.lineDiv){var w=t.display.lineDiv.childNodes[x];if(!w){return b9(t.clipPos(fR(t.display.viewTo-1)),!0)}r=null;x=0}else{for(w=r;;w=w.parentNode){if(!w||w==t.display.lineDiv){return null}if(w.parentNode&&w.parentNode==t.display.lineDiv){break}}}for(var v=0;v<t.display.view.length;v++){var u=t.display.view[v];if(u.node==w){return fv(u,r,x)}}}function fv(B,A,z){function y(C,H,J){for(var G=-1;G<(r?r.length:0);G++){for(var F=0>G?t.map:r[G],E=0;E<F.length;E+=3){var D=F[E+2];if(D==C||D==H){H=gE(0>G?B.line:B.rest[G]);G=F[E]+J;if(0>J||D!=C){G=F[E+(J?1:0)]}return fR(H,G)}}}}var x=B.text.firstChild,w=!1;if(!A||!ew(x,A)){return b9(fR(gE(B.line),0),!0)}if(A==x&&(w=!0,A=x.childNodes[z],z=0,!A)){return z=B.rest?fK(B.rest):B.line,b9(fR(gE(z),z.text.length),w)}var v=3==A.nodeType?A:null,u=A;v||1!=A.childNodes.length||3!=A.firstChild.nodeType||(v=A.firstChild,z&&(z=v.nodeValue.length));for(;u.parentNode!=x;){u=u.parentNode}var t=B.measure,r=t.maps;if(A=y(v,u,z)){return b9(A,w)}x=u.nextSibling;for(v=v?v.nodeValue.length-z:0;x;x=x.nextSibling){if(A=y(x,x.firstChild,0)){return b9(fR(A.line,A.ch-v),w)}v+=x.textContent.length}for(u=u.previousSibling;u;u=u.previousSibling){if(A=y(u,u.firstChild,-1)){return b9(fR(A.line,A.ch+z),w)}z+=u.textContent.length}}var f9=navigator.userAgent,bK=navigator.platform,j=/gecko\/\d/i.test(f9),bp=/MSIE \d/.test(f9),cF=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(f9),b2=/Edge\/(\d+)/.exec(f9),gG=bp||cF||b2,gJ=gG&&(bp?document.documentMode||6:+(b2||cF)[1]),gl=!b2&&/WebKit\//.test(f9),e8=gl&&/Qt\/\d+\.\d+/.test(f9),b8=!b2&&/Chrome\//.test(f9),dG=/Opera\//.test(f9),dX=/Apple Computer/.test(navigator.vendor),eT=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(f9),d=/PhantomJS/.test(f9),co=!b2&&/AppleWebKit/.test(f9)&&/Mobile\/\w+/.test(f9),bU=/Android/.test(f9),bV=co||bU||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(f9),d9=co||/Mac/.test(bK),cx=/\bCrOS\b/.test(f9),eE=/win/i.test(bK),bP=dG&&f9.match(/Version\/(\d*\.\d*)/);bP&&(bP=Number(bP[1]));bP&&15<=bP&&(dG=!1,gl=!0);var aP=d9&&(e8||dG&&(null==bP||12.11>bP)),fG=j||gG&&9<=gJ,dz=function(t,r){var v=t.className;if(r=fN(r).exec(v)){var u=v.slice(r.index+r[0].length);t.className=v.slice(0,r.index)+(u?r[1]+u:"")}};var ak=document.createRange?function(t,r,w,v){var u=document.createRange();u.setEnd(v||t,w);u.setStart(t,r);return u}:function(t,r,w){var v=document.body.createTextRange();try{v.moveToElementText(t.parentNode)}catch(u){return v}v.collapse(!0);v.moveEnd("character",w);v.moveStart("character",r);return v};var bO=function(r){r.select()};co?bO=function(r){r.selectionStart=0;r.selectionEnd=r.value.length}:gG&&(bO=function(t){try{t.select()}catch(r){}});var b3=function(){this.id=null};b3.prototype.set=function(t,r){clearTimeout(this.id);this.id=setTimeout(r,t)};var o={toString:function(){return"CodeMirror.Pass"}},bW={scroll:!1},fr={origin:"*mouse"},bt={origin:"+move"},fA=[""],gw=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,fT=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,b5=!1,hs=!1,a0=null,eF=function(){function t(z){return 247>=z?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(z):1424<=z&&1524>=z?"R":1536<=z&&1785>=z?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(z-1536):1774<=z&&2220>=z?"r":8192<=z&&8203>=z?"w":8204==z?"b":"L"}function r(A,z,B){this.level=A;this.from=z;this.to=B}var y=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,x=/[stwN]/,w=/[LRr]/,v=/[Lb1n]/,u=/[1n]/;return function(G,F){var E="ltr"==F?"L":"R";if(0==G.length||"ltr"==F&&!y.test(G)){return !1}for(var D=G.length,B=[],C=0;C<D;++C){B.push(t(G.charCodeAt(C)))}for(var C=0,A=E;C<D;++C){var z=B[C];"m"==z?B[C]=A:A=z}C=0;for(A=E;C<D;++C){z=B[C],"1"==z&&"r"==A?B[C]="n":w.test(z)&&(A=z,"r"==z&&(B[C]="R"))}C=1;for(A=B[0];C<D-1;++C){z=B[C],"+"==z&&"1"==A&&"1"==B[C+1]?B[C]="1":","!=z||A!=B[C+1]||"1"!=A&&"n"!=A||(B[C]=A),A=z}for(C=0;C<D;++C){if(A=B[C],","==A){B[C]="N"}else{if("%"==A){for(A=C+1;A<D&&"%"==B[A];++A){}for(z=C&&"!"==B[C-1]||A<D&&"1"==B[A]?"1":"N";C<A;++C){B[C]=z}C=A-1}}}C=0;for(A=E;C<D;++C){z=B[C],"L"==A&&"1"==z?B[C]="L":w.test(z)&&(A=z)}for(A=0;A<D;++A){if(x.test(B[A])){for(C=A+1;C<D&&x.test(B[C]);++C){}z="L"==(A?B[A-1]:E);for(z=z==("L"==(C<D?B[C]:E))?z?"L":"R":E;A<C;++A){B[A]=z}A=C-1}}for(var E=[],H,C=0;C<D;){if(v.test(B[C])){A=C;for(++C;C<D&&v.test(B[C]);++C){}E.push(new r(0,A,C))}else{var J=C,A=E.length;for(++C;C<D&&"L"!=B[C];++C){}for(z=J;z<C;){if(u.test(B[z])){J<z&&E.splice(A,0,new r(1,J,z));J=z;for(++z;z<C&&u.test(B[z]);++z){}E.splice(A,0,new r(2,J,z));J=z}else{++z}}J<C&&E.splice(A,0,new r(1,J,C))}}1==E[0].level&&(H=G.match(/^\s+/))&&(E[0].from=H[0].length,E.unshift(new r(0,0,H[0].length)));1==fK(E).level&&(H=G.match(/\s+$/))&&(fK(E).to-=H[0].length,E.push(new r(0,D-H[0].length,D)));return"rtl"==F?E.reverse():E}}(),dq=[],fO=function(t,r,u){t.addEventListener?t.addEventListener(r,u,!1):t.attachEvent?t.attachEvent("on"+r,u):(t=t._handlers||(t._handlers={}),t[r]=(t[r]||dq).concat(u))},cj=function(){if(gG&&9>gJ){return !1}var r=fQ("div");return"draggable" in r||"dragDrop" in r}(),gB,et,eA=3!="\n\nb".split(/\n/).length?function(t){for(var r=0,y=[],x=t.length;r<=x;){var w=t.indexOf("\n",r);-1==w&&(w=t.length);var v=t.slice(r,"\r"==t.charAt(w-1)?w-1:w),u=v.indexOf("\r");-1!=u?(y.push(v.slice(0,u)),r+=u+1):(y.push(v),r=w+1)}return y}:function(r){return r.split(/\r\n?|\n/)},ep=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(r){return !1}}:function(t){try{var r=t.ownerDocument.selection.createRange()}catch(u){}return r&&r.parentElement()==t?0!=r.compareEndPoints("StartToEnd",r):!1},dW=function(){var r=fQ("div");if("oncopy" in r){return !0}r.setAttribute("oncopy","return;");return"function"==typeof r.oncopy}(),cO=null,fW={},gF={},fY={},gt=function(t,r,u){this.pos=this.start=0;this.string=t;this.tabSize=r||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0;this.lineOracle=u};gt.prototype.eol=function(){return this.pos>=this.string.length};gt.prototype.sol=function(){return this.pos==this.lineStart};gt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0};gt.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};gt.prototype.eat=function(t){var r=this.string.charAt(this.pos);if("string"==typeof t?r==t:r&&(t.test?t.test(r):t(r))){return ++this.pos,r}};gt.prototype.eatWhile=function(t){for(var r=this.pos;this.eat(t);){}return this.pos>r};gt.prototype.eatSpace=function(){for(var r=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));){++this.pos}return this.pos>r};gt.prototype.skipToEnd=function(){this.pos=this.string.length};gt.prototype.skipTo=function(r){r=this.string.indexOf(r,this.pos);if(-1<r){return this.pos=r,!0}};gt.prototype.backUp=function(r){this.pos-=r};gt.prototype.column=function(){this.lastColumnPos<this.start&&(this.lastColumnValue=e0(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?e0(this.string,this.lineStart,this.tabSize):0)};gt.prototype.indentation=function(){return e0(this.string,null,this.tabSize)-(this.lineStart?e0(this.string,this.lineStart,this.tabSize):0)};gt.prototype.match=function(t,r,w){if("string"==typeof t){var v=function(x){return w?x.toLowerCase():x},u=this.string.substr(this.pos,t.length);if(v(u)==v(t)){return !1!==r&&(this.pos+=t.length),!0}}else{if((t=this.string.slice(this.pos).match(t))&&0<t.index){return null}t&&!1!==r&&(this.pos+=t[0].length);return t}};gt.prototype.current=function(){return this.string.slice(this.start,this.pos)};gt.prototype.hideFirstChars=function(t,r){this.lineStart+=t;try{return r()}finally{this.lineStart-=t}};gt.prototype.lookAhead=function(t){var r=this.lineOracle;return r&&r.lookAhead(t)};var cP=function(t,r){this.state=t;this.lookAhead=r},a1=function(t,r,v,u){this.state=r;this.doc=t;this.line=v;this.maxLookAhead=u||0};a1.prototype.lookAhead=function(t){var r=this.doc.getLine(this.line+t);null!=r&&t>this.maxLookAhead&&(this.maxLookAhead=t);return r};a1.prototype.nextLine=function(){this.line++;0<this.maxLookAhead&&this.maxLookAhead--};a1.fromSaved=function(t,r,u){return r instanceof cP?new a1(t,e7(t.mode,r.state),u,r.lookAhead):new a1(t,e7(t.mode,r),u)};a1.prototype.save=function(r){r=!1!==r?e7(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new cP(r,this.maxLookAhead):r};var dn=function(t,r,u){this.start=t.start;this.end=t.pos;this.string=t.current();this.type=r||null;this.state=u},eK=function(t,r,u){this.text=t;b0(this,r);this.height=u?u(this):1};eK.prototype.lineNo=function(){return gE(this)};g5(eK);var cL={},cZ={},fB=null,i=null,gU={left:0,right:0,top:0,bottom:0},d2,bu=function(t,r,w){this.cm=w;var v=this.vert=fQ("div",[fQ("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),u=this.horiz=fQ("div",[fQ("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t(v);t(u);fO(v,"scroll",function(){v.clientHeight&&r(v.scrollTop,"vertical")});fO(u,"scroll",function(){u.clientWidth&&r(u.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;gG&&8>gJ&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};bu.prototype.update=function(t){var r=t.scrollWidth>t.clientWidth+1,v=t.scrollHeight>t.clientHeight+1,u=t.nativeBarWidth;v?(this.vert.style.display="block",this.vert.style.bottom=r?u+"px":"0",this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+(t.viewHeight-(r?u:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");r?(this.horiz.style.display="block",this.horiz.style.right=v?u+"px":"0",this.horiz.style.left=t.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+(t.viewWidth-t.barLeft-(v?u:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedZeroWidth&&0<t.clientHeight&&(0==u&&this.zeroWidthHack(),this.checkedZeroWidth=!0);return{right:v?u:0,bottom:r?u:0}};bu.prototype.setScrollLeft=function(r){this.horiz.scrollLeft!=r&&(this.horiz.scrollLeft=r);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")};bu.prototype.setScrollTop=function(r){this.vert.scrollTop!=r&&(this.vert.scrollTop=r);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")};bu.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=d9&&!eT?"12px":"18px";this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new b3;this.disableVert=new b3};bu.prototype.enableZeroWidthBar=function(t,r,v){function u(){var w=t.getBoundingClientRect();("vert"==v?document.elementFromPoint(w.right-1,(w.top+w.bottom)/2):document.elementFromPoint((w.right+w.left)/2,w.bottom-1))!=t?t.style.pointerEvents="none":r.set(1000,u)}t.style.pointerEvents="auto";r.set(1000,u)};bu.prototype.clear=function(){var r=this.horiz.parentNode;r.removeChild(this.horiz);r.removeChild(this.vert)};var cJ=function(){};cJ.prototype.update=function(){return{bottom:0,right:0}};cJ.prototype.setScrollLeft=function(){};cJ.prototype.setScrollTop=function(){};cJ.prototype.clear=function(){};var dv={"native":bu,"null":cJ},s=0,ay=function(t,r,v){var u=t.display;this.viewport=r;this.visible=aY(u,t.doc,r);this.editorIsHidden=!u.wrapper.offsetWidth;this.wrapperHeight=u.wrapper.clientHeight;this.wrapperWidth=u.wrapper.clientWidth;this.oldDisplayWidth=eS(t);this.force=v;this.dims=c2(t);this.events=[]};ay.prototype.signal=function(t,r){eL(t,r)&&this.events.push(arguments)};ay.prototype.finish=function(){for(var r=0;r<this.events.length;r++){gv.apply(null,this.events[r])}};var h=0,fC=null;gG?fC=-0.53:j?fC=15:b8?fC=-0.7:dX&&(fC=-1/3);var fn=function(t,r){this.ranges=t;this.primIndex=r};fn.prototype.primary=function(){return this.ranges[this.primIndex]};fn.prototype.equals=function(t){if(t==this){return !0}if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length){return !1}for(var r=0;r<this.ranges.length;r++){var v=this.ranges[r],u=t.ranges[r];if(!dL(v.anchor,u.anchor)||!dL(v.head,u.head)){return !1}}return !0};fn.prototype.deepCopy=function(){for(var t=[],r=0;r<this.ranges.length;r++){t[r]=new gI(dx(this.ranges[r].anchor),dx(this.ranges[r].head))}return new fn(t,this.primIndex)};fn.prototype.somethingSelected=function(){for(var r=0;r<this.ranges.length;r++){if(!this.ranges[r].empty()){return !0}}return !1};fn.prototype.contains=function(t,r){r||(r=t);for(var v=0;v<this.ranges.length;v++){var u=this.ranges[v];if(0<=gK(r,u.from())&&0>=gK(t,u.to())){return v}}return -1};var gI=function(t,r){this.anchor=t;this.head=r};gI.prototype.from=function(){return d7(this.anchor,this.head)};gI.prototype.to=function(){return eu(this.anchor,this.head)};gI.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};ft.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,r){for(var x=t,w=t+r;x<w;++x){var v=this.lines[x];this.height-=v.height;var u=v;u.parent=null;cm(u);gn(v,"delete")}this.lines.splice(t,r)},collapse:function(r){r.push.apply(r,this.lines)},insertInner:function(t,r,u){this.height+=u;this.lines=this.lines.slice(0,t).concat(r).concat(this.lines.slice(t));for(t=0;t<r.length;++t){r[t].parent=this}},iterN:function(t,r,u){for(r=t+r;t<r;++t){if(u(this.lines[t])){return !0}}}};e6.prototype={chunkSize:function(){return this.size},removeInner:function(t,r){this.size-=r;for(var y=0;y<this.children.length;++y){var x=this.children[y],w=x.chunkSize();if(t<w){var v=Math.min(r,w-t),u=x.height;x.removeInner(t,v);this.height-=u-x.height;w==v&&(this.children.splice(y--,1),x.parent=null);if(0==(r-=v)){break}t=0}else{t-=w}}25>this.size-r&&(1<this.children.length||!(this.children[0] instanceof ft))&&(t=[],this.collapse(t),this.children=[new ft(t)],this.children[0].parent=this)},collapse:function(t){for(var r=0;r<this.children.length;++r){this.children[r].collapse(t)}},insertInner:function(t,r,x){this.size+=r.length;this.height+=x;for(var w=0;w<this.children.length;++w){var v=this.children[w],u=v.chunkSize();if(t<=u){v.insertInner(t,r,x);if(v.lines&&50<v.lines.length){for(r=t=v.lines.length%25+25;r<v.lines.length;){x=new ft(v.lines.slice(r,r+=25)),v.height-=x.height,this.children.splice(++w,0,x),x.parent=this}v.lines=v.lines.slice(0,t);this.maybeSpill()}break}t-=u}},maybeSpill:function(){if(!(10>=this.children.length)){var t=this;do{var r=t.children.splice(t.children.length-5,5),r=new e6(r);if(t.parent){t.size-=r.size;t.height-=r.height;var u=go(t.parent.children,t);t.parent.children.splice(u+1,0,r)}else{u=new e6(t.children),u.parent=t,t.children=[u,r],t=u}r.parent=t.parent}while(10<t.children.length);t.parent.maybeSpill()}},iterN:function(t,r,x){for(var w=0;w<this.children.length;++w){var v=this.children[w],u=v.chunkSize();if(t<u){u=Math.min(r,u-t);if(v.iterN(t,u,x)){return !0}if(0==(r-=u)){break}t=0}else{t-=u}}}};var eR=function(t,r,v){if(v){for(var u in v){v.hasOwnProperty(u)&&(this[u]=v[u])}}this.doc=t;this.node=r};eR.prototype.clear=function(){var t=this.doc.cm,r=this.line.widgets,x=this.line,w=gE(x);if(null!=w&&r){for(var v=0;v<r.length;++v){r[v]==this&&r.splice(v--,1)}r.length||(x.widgets=null);var u=gX(this);c5(x,Math.max(0,x.height-u));t&&(g6(t,function(){var y=-u;cw(x)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&aZ(t,y);a8(t,w,"widget")}),gn(t,"lineWidgetCleared",t,this,w))}};eR.prototype.changed=function(){var t=this,r=this.height,w=this.doc.cm,v=this.line;this.height=null;var u=gX(this)-r;u&&(c5(v,v.height+u),w&&g6(w,function(){w.curOp.forceUpdate=!0;cw(v)<(w.curOp&&w.curOp.scrollTop||w.doc.scrollTop)&&aZ(w,u);gn(w,"lineWidgetChanged",w,t,gE(v))}))};g5(eR);var av=0,aH=function(t,r){this.lines=[];this.type=r;this.doc=t;this.id=++av};aH.prototype.clear=function(){if(!this.explicitlyCleared){var D=this.doc.cm,C=D&&!D.curOp;C&&cY(D);if(eL(this,"clear")){var B=this.find();B&&gn(this,"clear",B.from,B.to)}for(var A=B=null,z=0;z<this.lines.length;++z){var y=this.lines[z],x=bm(y.markedSpans,this);D&&!this.collapsed?a8(D,gE(y),"text"):D&&(null!=x.to&&(A=gE(y)),null!=x.from&&(B=gE(y)));for(var w=y,v=void 0,u=y.markedSpans,t=x,r=0;r<u.length;++r){u[r]!=t&&(v||(v=[])).push(u[r])}w.markedSpans=v;null==x.from&&this.collapsed&&!fL(this.doc,y)&&D&&c5(y,eo(D.display))}if(D&&this.collapsed&&!D.options.lineWrapping){for(z=0;z<this.lines.length;++z){y=cR(this.lines[z]),x=dE(y),x>D.display.maxLineLength&&(D.display.maxLine=y,D.display.maxLineLength=x,D.display.maxLineChanged=!0)}}null!=B&&D&&this.collapsed&&f8(D,B,A+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,D&&dm(D.doc));D&&gn(D,"markerCleared",D,this,B,A);C&&cD(D);this.parent&&this.parent.clear()}};aH.prototype.find=function(t,r){null==t&&"bookmark"==this.type&&(t=1);for(var y,x,w=0;w<this.lines.length;++w){var v=this.lines[w],u=bm(v.markedSpans,this);if(null!=u.from&&(y=fR(r?v:gE(v),u.from),-1==t)){return y}if(null!=u.to&&(x=fR(r?v:gE(v),u.to),1==t)){return x}}return y&&{from:y,to:x}};aH.prototype.changed=function(){var t=this,r=this.find(-1,!0),v=this,u=this.doc.cm;r&&u&&g6(u,function(){var x=r.line,w=gE(r.line);if(w=dp(u,w)){bx(w),u.curOp.selectionChanged=u.curOp.forceUpdate=!0}u.curOp.updateMaxLine=!0;fL(v.doc,x)||null==v.height||(w=v.height,v.height=null,(w=gX(v)-w)&&c5(x,x.height+w));gn(u,"markerChanged",u,t)})};aH.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;r.maybeHiddenMarkers&&-1!=go(r.maybeHiddenMarkers,this)||(r.maybeUnhiddenMarkers||(r.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)};aH.prototype.detachLine=function(r){this.lines.splice(go(this.lines,r),1);!this.lines.length&&this.doc.cm&&(r=this.doc.cm.curOp,(r.maybeHiddenMarkers||(r.maybeHiddenMarkers=[])).push(this))};g5(aH);var eC=function(t,r){this.markers=t;this.primary=r;for(r=0;r<t.length;++r){t[r].parent=this}};eC.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var r=0;r<this.markers.length;++r){this.markers[r].clear()}gn(this,"clear")}};eC.prototype.find=function(t,r){return this.primary.find(t,r)};g5(eC);var d3=0,f6=function(t,r,w,v,u){if(!(this instanceof f6)){return new f6(t,r,w,v,u)}null==w&&(w=0);e6.call(this,[new ft([new eK("",null)])]);this.first=w;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=w;w=fR(w,0);this.sel=al(w);this.history=new hq(null);this.id=++d3;this.modeOption=r;this.lineSep=v;this.direction="rtl"==u?"rtl":"ltr";this.extend=!1;"string"==typeof t&&(t=this.splitLines(t));aR(this,{from:w,to:w,text:t});gm(this,al(w),bW)};f6.prototype=dK(e6.prototype,{constructor:f6,iter:function(t,r,u){u?this.iterN(t-this.first,r-t,u):this.iterN(this.first,this.first+this.size,t)},insert:function(t,r){for(var v=0,u=0;u<r.length;++u){v+=r[u].height}this.insertInner(t-this.first,r,v)},remove:function(t,r){this.removeInner(t-this.first,r)},getValue:function(t){var r=em(this,this.first,this.first+this.size);return !1===t?r:r.join(t||this.lineSeparator())},setValue:gp(function(t){var r=fR(this.first,0),u=this.first+this.size-1;dU(this,{from:r,to:fR(u,fP(this,u).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0);this.cm&&ar(this.cm,0,0);gm(this,al(r),bW)}),replaceRange:function(t,r,v,u){r=fM(this,r);v=v?fM(this,v):r;dF(this,t,r,v,u)},getRange:function(t,r,u){t=hl(this,fM(this,t),fM(this,r));return !1===u?t:t.join(u||this.lineSeparator())},getLine:function(r){return(r=this.getLineHandle(r))&&r.text},getLineHandle:function(r){if(bH(this,r)){return fP(this,r)}},getLineNumber:function(r){return gE(r)},getLineHandleVisualStart:function(r){"number"==typeof r&&(r=fP(this,r));return cR(r)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(r){return fM(this,r)},getCursor:function(t){var r=this.sel.primary();return null==t||"head"==t?r.head:"anchor"==t?r.anchor:"end"==t||"to"==t||!1===t?r.to():r.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:gp(function(t,r,u){t=fM(this,"number"==typeof t?fR(t,r||0):t);gm(this,al(t,null),u)}),setSelection:gp(function(t,r,v){var u=fM(this,t);t=fM(this,r||t);gm(this,al(u,t),v)}),extendSelection:gp(function(t,r,u){bz(this,fM(this,t),r&&fM(this,r),u)}),extendSelections:gp(function(t,r){eG(this,cV(this,t),r)}),extendSelectionsBy:gp(function(t,r){t=fl(this.sel.ranges,t);eG(this,cV(this,t),r)}),setSelections:gp(function(t,r,w){if(t.length){for(var v=[],u=0;u<t.length;u++){v[u]=new gI(fM(this,t[u].anchor),fM(this,t[u].head))}null==r&&(r=Math.min(t.length-1,this.sel.primIndex));gm(this,ds(v,r),w)}}),addSelection:gp(function(t,r,v){var u=this.sel.ranges.slice(0);u.push(new gI(fM(this,t),fM(this,r||t)));gm(this,ds(u,u.length-1),v)}),getSelection:function(t){for(var r=this.sel.ranges,w,v=0;v<r.length;v++){var u=hl(this,r[v].from(),r[v].to());w=w?w.concat(u):u}return !1===t?w:w.join(t||this.lineSeparator())},getSelections:function(t){for(var r=[],w=this.sel.ranges,v=0;v<w.length;v++){var u=hl(this,w[v].from(),w[v].to());!1!==t&&(u=u.join(t||this.lineSeparator()));r[v]=u}return r},replaceSelection:function(t,r,w){for(var v=[],u=0;u<this.sel.ranges.length;u++){v[u]=t}this.replaceSelections(v,r,w||"+input")},replaceSelections:gp(function(A,z,y){for(var x=[],w=this.sel,v=0;v<w.ranges.length;v++){var u=w.ranges[v];x[v]={from:u.from(),to:u.to(),text:this.splitLines(A[v]),origin:y}}if(A=z&&"end"!=z){A=[];w=y=fR(this.first,0);for(v=0;v<x.length;v++){var t=x[v],u=bq(t.from,y,w),r=bq(aU(t),y,w);y=t.to;w=r;"around"==z?(t=this.sel.ranges[v],t=0>gK(t.head,t.anchor),A[v]=new gI(t?r:u,t?u:r)):A[v]=new gI(u,u)}A=new fn(A,this.sel.primIndex)}z=A;for(A=x.length-1;0<=A;A--){dU(this,x[A])}z?er(this,z):this.cm&&fm(this.cm)}),undo:gp(function(){aS(this,"undo")}),redo:gp(function(){aS(this,"redo")}),undoSelection:gp(function(){aS(this,"undo",!0)}),redoSelection:gp(function(){aS(this,"redo",!0)}),setExtending:function(r){this.extend=r},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,r=0,v=0,u=0;u<t.done.length;u++){t.done[u].ranges||++r}for(u=0;u<t.undone.length;u++){t.undone[u].ranges||++v}return{undo:r,redo:v}},clearHistory:function(){this.history=new hq(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(r){r&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(r){return this.history.generation==(r||this.cleanGeneration)},getHistory:function(){return{done:ev(this.history.done),undone:ev(this.history.undone)}},setHistory:function(t){var r=this.history=new hq(this.history.maxGeneration);r.done=ev(t.done.slice(0),null,!0);r.undone=ev(t.undone.slice(0),null,!0)},setGutterMarker:gp(function(t,r,u){return fJ(this,t,"gutter",function(v){var w=v.gutterMarkers||(v.gutterMarkers={});w[r]=u;!u&&dw(w)&&(v.gutterMarkers=null);return !0})}),clearGutter:gp(function(t){var r=this;this.iter(function(u){u.gutterMarkers&&u.gutterMarkers[t]&&fJ(r,u,"gutter",function(){u.gutterMarkers[t]=null;dw(u.gutterMarkers)&&(u.gutterMarkers=null);return !0})})}),lineInfo:function(t){if("number"==typeof t){if(!bH(this,t)){return null}var r=t;t=fP(this,t);if(!t){return null}}else{if(r=gE(t),null==r){return null}}return{line:r,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:gp(function(t,r,u){return fJ(this,t,"gutter"==r?"gutter":"class",function(v){var w="text"==r?"textClass":"background"==r?"bgClass":"gutter"==r?"gutterClass":"wrapClass";if(v[w]){if(fN(u).test(v[w])){return !1}v[w]+=" "+u}else{v[w]=u}return !0})}),removeLineClass:gp(function(t,r,u){return fJ(this,t,"gutter"==r?"gutter":"class",function(v){var z="text"==r?"textClass":"background"==r?"bgClass":"gutter"==r?"gutterClass":"wrapClass",y=v[z];if(y){if(null==u){v[z]=null}else{var x=y.match(fN(u));if(!x){return !1}var w=x.index+x[0].length;v[z]=y.slice(0,x.index)+(x.index&&w!=y.length?" ":"")+y.slice(w)||null}}else{return !1}return !0})}),addLineWidget:gp(function(t,r,u){return k(this,t,r,u)}),removeLineWidget:function(r){r.clear()},markText:function(t,r,u){return dr(this,fM(this,t),fM(this,r),u,u&&u.type||"range")},setBookmark:function(t,r){r={replacedWith:r&&(null==r.nodeType?r.widget:r),insertLeft:r&&r.insertLeft,clearWhenEmpty:!1,shared:r&&r.shared,handleMouseEvents:r&&r.handleMouseEvents};t=fM(this,t);return dr(this,t,t,r,"bookmark")},findMarksAt:function(t){t=fM(this,t);var r=[],w=fP(this,t.line).markedSpans;if(w){for(var v=0;v<w.length;++v){var u=w[v];(null==u.from||u.from<=t.ch)&&(null==u.to||u.to>=t.ch)&&r.push(u.marker.parent||u.marker)}}return r},findMarks:function(t,r,w){t=fM(this,t);r=fM(this,r);var v=[],u=t.line;this.iter(t.line,r.line+1,function(z){if(z=z.markedSpans){for(var y=0;y<z.length;y++){var x=z[y];null!=x.to&&u==t.line&&t.ch>=x.to||null==x.from&&u!=t.line||null!=x.from&&u==r.line&&x.from>=r.ch||w&&!w(x.marker)||v.push(x.marker.parent||x.marker)}}++u});return v},getAllMarks:function(){var r=[];this.iter(function(t){if(t=t.markedSpans){for(var u=0;u<t.length;++u){null!=t[u].from&&r.push(t[u].marker)}}});return r},posFromIndex:function(t){var r,v=this.first,u=this.lineSeparator().length;this.iter(function(w){w=w.text.length+u;if(w>t){return r=t,!0}t-=w;++v});return fM(this,fR(v,r))},indexFromPos:function(t){t=fM(this,t);var r=t.ch;if(t.line<this.first||0>t.ch){return 0}var u=this.lineSeparator().length;this.iter(this.first,t.line,function(v){r+=v.text.length+u});return r},copy:function(t){var r=new f6(em(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);r.scrollTop=this.scrollTop;r.scrollLeft=this.scrollLeft;r.sel=this.sel;r.extend=!1;t&&(r.history.undoDepth=this.history.undoDepth,r.setHistory(this.getHistory()));return r},linkedDoc:function(t){t||(t={});var r=this.first,x=this.first+this.size;null!=t.from&&t.from>r&&(r=t.from);null!=t.to&&t.to<x&&(x=t.to);r=new f6(em(this,r,x),t.mode||this.modeOption,r,this.lineSep,this.direction);t.sharedHist&&(r.history=this.history);(this.linked||(this.linked=[])).push({doc:r,sharedHist:t.sharedHist});r.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}];t=I(this);for(x=0;x<t.length;x++){var w=t[x],v=w.find(),u=r.clipPos(v.from),v=r.clipPos(v.to);gK(u,v)&&(u=dr(r,u,v,w.primary,w.primary.type),w.markers.push(u),u.parent=w)}return r},unlinkDoc:function(t){t instanceof gz&&(t=t.doc);if(this.linked){for(var r=0;r<this.linked.length;++r){if(this.linked[r].doc==t){this.linked.splice(r,1);t.unlinkDoc(this);g7(I(this));break}}}if(t.history==this.history){var u=[t.id];cp(t,function(v){return u.push(v.id)},!0);t.history=new hq(null);t.history.done=ev(this.history.done,u);t.history.undone=ev(this.history.undone,u)}},iterLinkedDocs:function(r){cp(this,r)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(r){return this.lineSep?r.split(this.lineSep):eA(r)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:gp(function(r){"rtl"!=r&&(r="ltr");r!=this.direction&&(this.direction=r,this.iter(function(t){return t.order=null}),this.cm&&a2(this.cm))})});f6.prototype.eachLine=f6.prototype.iter;for(var hn=0,ej=!1,at={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},g4=0;10>g4;g4++){at[g4+48]=at[g4+96]=String(g4)}for(var gP=65;90>=gP;gP++){at[gP]=String.fromCharCode(gP)}for(var gD=1;12>=gD;gD++){at[gD+111]=at[gD+63235]="F"+gD}var en={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};en["default"]=d9?en.macDefault:en.pcDefault;var d1={selectAll:cM,singleSelection:function(r){return r.setSelection(r.getCursor("anchor"),r.getCursor("head"),bW)},killLine:function(r){return cQ(r,function(t){if(t.empty()){var u=fP(r.doc,t.head.line).text.length;return t.head.ch==u&&t.head.line<r.lastLine()?{from:t.head,to:fR(t.head.line+1,0)}:{from:t.head,to:fR(t.head.line,u)}}return{from:t.from(),to:t.to()}})},deleteLine:function(r){return cQ(r,function(t){return{from:fR(t.from().line,0),to:fM(r.doc,fR(t.to().line+1,0))}})},delLineLeft:function(r){return cQ(r,function(t){return{from:fR(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(r){return cQ(r,function(t){var u=r.charCoords(t.head,"div").top+5;return{from:r.coordsChar({left:0,top:u},"div"),to:t.from()}})},delWrappedLineRight:function(r){return cQ(r,function(t){var u=r.charCoords(t.head,"div").top+5,u=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:u},"div");return{from:t.from(),to:u}})},undo:function(r){return r.undo()},redo:function(r){return r.redo()},undoSelection:function(r){return r.undoSelection()},redoSelection:function(r){return r.redoSelection()},goDocStart:function(r){return r.extendSelection(fR(r.firstLine(),0))},goDocEnd:function(r){return r.extendSelection(fR(r.lastLine()))},goLineStart:function(r){return r.extendSelectionsBy(function(t){return an(r,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(r){return r.extendSelectionsBy(function(t){return l(r,t.head)},{origin:"+move",bias:1})},goLineEnd:function(r){return r.extendSelectionsBy(function(t){t=t.head.line;var w=fP(r.doc,t);var v=w;for(var u;u=f7(v,!1);){v=u.find(1,!0).line}v!=w&&(t=gE(v));return cI(!0,r,w,t,-1)},{origin:"+move",bias:-1})},goLineRight:function(r){return r.extendSelectionsBy(function(t){t=r.cursorCoords(t.head,"div").top+5;return r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:t},"div")},bt)},goLineLeft:function(r){return r.extendSelectionsBy(function(t){t=r.cursorCoords(t.head,"div").top+5;return r.coordsChar({left:0,top:t},"div")},bt)},goLineLeftSmart:function(r){return r.extendSelectionsBy(function(t){var u=r.cursorCoords(t.head,"div").top+5,u=r.coordsChar({left:0,top:u},"div");return u.ch<r.getLine(u.line).search(/\S/)?l(r,t.head):u},bt)},goLineUp:function(r){return r.moveV(-1,"line")},goLineDown:function(r){return r.moveV(1,"line")},goPageUp:function(r){return r.moveV(-1,"page")},goPageDown:function(r){return r.moveV(1,"page")},goCharLeft:function(r){return r.moveH(-1,"char")},goCharRight:function(r){return r.moveH(1,"char")},goColumnLeft:function(r){return r.moveH(-1,"column")},goColumnRight:function(r){return r.moveH(1,"column")},goWordLeft:function(r){return r.moveH(-1,"word")},goGroupRight:function(r){return r.moveH(1,"group")},goGroupLeft:function(r){return r.moveH(-1,"group")},goWordRight:function(r){return r.moveH(1,"word")},delCharBefore:function(r){return r.deleteH(-1,"char")},delCharAfter:function(r){return r.deleteH(1,"char")},delWordBefore:function(r){return r.deleteH(-1,"word")},delWordAfter:function(r){return r.deleteH(1,"word")},delGroupBefore:function(r){return r.deleteH(-1,"group")},delGroupAfter:function(r){return r.deleteH(1,"group")},indentAuto:function(r){return r.indentSelection("smart")},indentMore:function(r){return r.indentSelection("add")},indentLess:function(r){return r.indentSelection("subtract")},insertTab:function(r){return r.replaceSelection("\t")},insertSoftTab:function(t){for(var r=[],x=t.listSelections(),w=t.options.tabSize,v=0;v<x.length;v++){var u=x[v].from(),u=e0(t.getLine(u.line),u.ch,w);r.push(e5(w-u%w))}t.replaceSelections(r)},defaultTab:function(r){r.somethingSelected()?r.indentSelection("add"):r.execCommand("insertTab")},transposeChars:function(r){return g6(r,function(){for(var t=r.listSelections(),y=[],x=0;x<t.length;x++){if(t[x].empty()){var w=t[x].head,v=fP(r.doc,w.line).text;if(v){if(w.ch==v.length&&(w=new fR(w.line,w.ch-1)),0<w.ch){w=new fR(w.line,w.ch+1),r.replaceRange(v.charAt(w.ch-1)+v.charAt(w.ch-2),fR(w.line,w.ch-2),w,"+transpose")}else{if(w.line>r.doc.first){var u=fP(r.doc,w.line-1).text;u&&(w=new fR(w.line,1),r.replaceRange(v.charAt(0)+r.doc.lineSeparator()+u.charAt(u.length-1),fR(w.line-1,u.length-1),w,"+transpose"))}}}y.push(new gI(w,w))}}r.setSelections(y)})},newlineAndIndent:function(r){return g6(r,function(){for(var t=r.listSelections(),u=t.length-1;0<=u;u--){r.replaceRange(r.doc.lineSeparator(),t[u].anchor,t[u].head,"+input")}t=r.listSelections();for(u=0;u<t.length;u++){r.indentLine(t[u].from().line,null,!0)}fm(r)})},openLine:function(r){return r.replaceSelection("\n","start")},toggleOverwrite:function(r){return r.toggleOverwrite()}},ex=new b3,hi=null,gO=function(t,r,u){this.time=t;this.pos=r;this.button=u};gO.prototype.compare=function(t,r,u){return this.time+400>t&&0==gK(r,this.pos)&&u==this.button};var dj,dy,cv={toString:function(){return"CodeMirror.Init"}},ey={},a={};gz.defaults=ey;gz.optionHandlers=a;var e4=[];gz.defineInitHook=function(r){return e4.push(r)};var gH=null,fI=function(r){this.cm=r;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new b3;this.composing=null;this.gracePeriod=!1;this.readDOMTimeout=null};fI.prototype.init=function(t){function r(A){if(!gr(v,A)){if(v.somethingSelected()){gH={lineWise:!1,text:v.getSelections()},"cut"==A.type&&v.replaceSelection("",null,"cut")}else{if(v.options.lineWiseCopyCut){var z=c7(v);gH={lineWise:!0,text:z.text};"cut"==A.type&&v.operation(function(){v.setSelections(z.ranges,0,bW);v.replaceSelection("",null,"cut")})}else{return}}if(A.clipboardData){A.clipboardData.clearData();var C=gH.text.join("\n");A.clipboardData.setData("Text",C);if(A.clipboardData.getData("Text")==C){A.preventDefault();return}}var B=cy();A=B.firstChild;v.display.lineSpace.insertBefore(B,v.display.lineSpace.firstChild);A.value=gH.text.join("\n");var y=document.activeElement;bO(A);setTimeout(function(){v.display.lineSpace.removeChild(B);y.focus();y==u&&w.showPrimarySelection()},50)}}var x=this,w=this,v=w.cm,u=w.div=t.lineDiv;cT(u,v.options.spellcheck);fO(u,"paste",function(y){gr(v,y)||du(y,v)||11>=gJ&&setTimeout(gq(v,function(){return x.updateFromDOM()}),20)});fO(u,"compositionstart",function(y){x.composing={data:y.data,done:!1}});fO(u,"compositionupdate",function(y){x.composing||(x.composing={data:y.data,done:!1})});fO(u,"compositionend",function(y){x.composing&&(y.data!=x.composing.data&&x.readFromDOMSoon(),x.composing.done=!0)});fO(u,"touchstart",function(){return w.forceCompositionEnd()});fO(u,"input",function(){x.composing||x.readFromDOMSoon()});fO(u,"copy",r);fO(u,"cut",r)};fI.prototype.prepareSelection=function(){var r=g9(this.cm,!1);r.focus=this.cm.state.focused;return r};fI.prototype.showSelection=function(t,r){t&&this.cm.display.view.length&&((t.focus||r)&&this.showPrimarySelection(),this.showMultipleSelections(t))};fI.prototype.showPrimarySelection=function(){var t=window.getSelection(),r=this.cm,z=r.doc.sel.primary(),y=z.from(),z=z.to();if(r.display.viewTo==r.display.viewFrom||y.line>=r.display.viewTo||z.line<r.display.viewFrom){t.removeAllRanges()}else{var x=hj(r,t.anchorNode,t.anchorOffset),w=hj(r,t.focusNode,t.focusOffset);if(!x||x.bad||!w||w.bad||0!=gK(d7(x,w),y)||0!=gK(eu(x,w),z)){if(x=r.display.view,y=y.line>=r.display.viewFrom&&bY(r,y)||{node:x[0].measure.map[2],offset:0},z=z.line<r.display.viewTo&&bY(r,z),z||(z=x[x.length-1].measure,z=z.maps?z.maps[z.maps.length-1]:z.map,z={node:z[z.length-1],offset:z[z.length-2]-z[z.length-3]}),y&&z){var x=t.rangeCount&&t.getRangeAt(0);try{var v=ak(y.node,y.offset,z.offset,z.node)}catch(u){}v&&(!j&&r.state.focused?(t.collapse(y.node,y.offset),v.collapsed||(t.removeAllRanges(),t.addRange(v))):(t.removeAllRanges(),t.addRange(v)),x&&null==t.anchorNode?t.addRange(x):j&&this.startGracePeriod());this.rememberSelection()}else{t.removeAllRanges()}}}};fI.prototype.startGracePeriod=function(){var r=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){r.gracePeriod=!1;r.selectionChanged()&&r.cm.operation(function(){return r.cm.curOp.selectionChanged=!0})},20)};fI.prototype.showMultipleSelections=function(r){gC(this.cm.display.cursorDiv,r.cursors);gC(this.cm.display.selectionDiv,r.selection)};fI.prototype.rememberSelection=function(){var r=window.getSelection();this.lastAnchorNode=r.anchorNode;this.lastAnchorOffset=r.anchorOffset;this.lastFocusNode=r.focusNode;this.lastFocusOffset=r.focusOffset};fI.prototype.selectionInEditor=function(){var r=window.getSelection();if(!r.rangeCount){return !1}r=r.getRangeAt(0).commonAncestorContainer;return ew(this.div,r)};fI.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())};fI.prototype.blur=function(){this.div.blur()};fI.prototype.getField=function(){return this.div};fI.prototype.supportsTouch=function(){return !0};fI.prototype.receivedFocus=function(){function t(){r.cm.state.focused&&(r.pollSelection(),r.polling.set(r.cm.options.pollInterval,t))}var r=this;this.selectionInEditor()?this.pollSelection():g6(this.cm,function(){return r.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,t)};fI.prototype.selectionChanged=function(){var r=window.getSelection();return r.anchorNode!=this.lastAnchorNode||r.anchorOffset!=this.lastAnchorOffset||r.focusNode!=this.lastFocusNode||r.focusOffset!=this.lastFocusOffset};fI.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=window.getSelection(),r=this.cm;if(bU&&b8&&this.cm.options.gutters.length&&gu(t.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus()}else{if(!this.composing){this.rememberSelection();var v=hj(r,t.anchorNode,t.anchorOffset),u=hj(r,t.focusNode,t.focusOffset);v&&u&&g6(r,function(){gm(r.doc,al(v,u),bW);if(v.bad||u.bad){r.curOp.selectionChanged=!0}})}}}};fI.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var C=this.cm,B=C.display,A=C.doc.sel.primary(),z=A.from(),y=A.to();0==z.ch&&z.line>C.firstLine()&&(z=fR(z.line-1,fP(C.doc,z.line-1).length));y.ch==fP(C.doc,y.line).text.length&&y.line<C.lastLine()&&(y=fR(y.line+1,0));if(z.line<B.viewFrom||y.line>B.viewTo-1){return !1}var x;z.line==B.viewFrom||0==(x=eD(C,z.line))?(A=gE(B.view[0].line),x=B.view[0].node):(A=gE(B.view[x].line),x=B.view[x-1].node.nextSibling);var w=eD(C,y.line);w==B.view.length-1?(y=B.viewTo-1,B=B.lineDiv.lastChild):(y=gE(B.view[w+1].line)-1,B=B.view[w+1].node.previousSibling);if(!x){return !1}B=C.doc.splitLines(fS(C,x,B,A,y));for(x=hl(C.doc,fR(A,0),fR(y,fP(C.doc,y).text.length));1<B.length&&1<x.length;){if(fK(B)==fK(x)){B.pop(),x.pop(),y--}else{if(B[0]==x[0]){B.shift(),x.shift(),A++}else{break}}}for(var v=0,w=0,u=B[0],t=x[0],r=Math.min(u.length,t.length);v<r&&u.charCodeAt(v)==t.charCodeAt(v);){++v}u=fK(B);t=fK(x);for(r=Math.min(u.length-(1==B.length?v:0),t.length-(1==x.length?v:0));w<r&&u.charCodeAt(u.length-w-1)==t.charCodeAt(t.length-w-1);){++w}if(1==B.length&&1==x.length&&A==z.line){for(;v&&v>z.ch&&u.charCodeAt(u.length-w-1)==t.charCodeAt(t.length-w-1);){v--,w++}}B[B.length-1]=u.slice(0,u.length-w).replace(/^\u200b+/,"");B[0]=B[0].slice(v).replace(/\u200b+$/,"");z=fR(A,v);A=fR(y,x.length?fK(x).length-w:0);if(1<B.length||B[0]||gK(z,A)){return dF(C.doc,B,z,A,"+input"),!0}};fI.prototype.ensurePolled=function(){this.forceCompositionEnd()};fI.prototype.reset=function(){this.forceCompositionEnd()};fI.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())};fI.prototype.readFromDOMSoon=function(){var r=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){r.readDOMTimeout=null;if(r.composing){if(r.composing.done){r.composing=null}else{return}}r.updateFromDOM()},80))};fI.prototype.updateFromDOM=function(){var r=this;!this.cm.isReadOnly()&&this.pollContent()||g6(this.cm,function(){return f8(r.cm)})};fI.prototype.setUneditable=function(r){r.contentEditable="false"};fI.prototype.onKeyPress=function(r){0!=r.charCode&&(r.preventDefault(),this.cm.isReadOnly()||gq(this.cm,eP)(this.cm,String.fromCharCode(null==r.charCode?r.keyCode:r.charCode),0))};fI.prototype.readOnlyChanged=function(r){this.div.contentEditable=String("nocursor"!=r)};fI.prototype.onContextMenu=function(){};fI.prototype.resetPosition=function(){};fI.prototype.needsContentAttribute=!0;var gs=function(r){this.cm=r;this.prevInput="";this.pollingFast=!1;this.polling=new b3;this.hasSelection=!1;this.composing=null};gs.prototype.init=function(t){function r(A){if(!gr(w,A)){if(w.somethingSelected()){gH={lineWise:!1,text:w.getSelections()}}else{if(w.options.lineWiseCopyCut){var z=c7(w);gH={lineWise:!0,text:z.text};"cut"==A.type?w.setSelections(z.ranges,null,bW):(x.prevInput="",u.value=z.text.join("\n"),bO(u))}else{return}}"cut"==A.type&&(w.state.cutIncoming=!0)}}var y=this,x=this,w=this.cm,v=this.wrapper=cy(),u=this.textarea=v.firstChild;t.wrapper.insertBefore(v,t.wrapper.firstChild);co&&(u.style.width="0px");fO(u,"input",function(){gG&&9<=gJ&&y.hasSelection&&(y.hasSelection=null);x.poll()});fO(u,"paste",function(z){gr(w,z)||du(z,w)||(w.state.pasteIncoming=!0,x.fastPoll())});fO(u,"cut",r);fO(u,"copy",r);fO(t.scroller,"paste",function(z){aA(t,z)||gr(w,z)||(w.state.pasteIncoming=!0,x.focus())});fO(t.lineSpace,"selectstart",function(z){aA(t,z)||gj(z)});fO(u,"compositionstart",function(){var z=w.getCursor("from");x.composing&&x.composing.range.clear();x.composing={start:z,range:w.markText(z,w.getCursor("to"),{className:"CodeMirror-composing"})}});fO(u,"compositionend",function(){x.composing&&(x.poll(),x.composing.range.clear(),x.composing=null)})};gs.prototype.prepareSelection=function(){var t=this.cm,r=t.display,w=t.doc,v=g9(t);if(t.options.moveInputWithCursor){var t=dV(t,w.sel.primary().head,"div"),w=r.wrapper.getBoundingClientRect(),u=r.lineDiv.getBoundingClientRect();v.teTop=Math.max(0,Math.min(r.wrapper.clientHeight-10,t.top+u.top-w.top));v.teLeft=Math.max(0,Math.min(r.wrapper.clientWidth-10,t.left+u.left-w.left))}return v};gs.prototype.showSelection=function(t){var r=this.cm.display;gC(r.cursorDiv,t.cursors);gC(r.selectionDiv,t.selection);null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")};gs.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var r=this.cm;r.somethingSelected()?(this.prevInput="",t=r.getSelection(),this.textarea.value=t,r.state.focused&&bO(this.textarea),gG&&9<=gJ&&(this.hasSelection=t)):t||(this.prevInput=this.textarea.value="",gG&&9<=gJ&&(this.hasSelection=null))}};gs.prototype.getField=function(){return this.textarea};gs.prototype.supportsTouch=function(){return !1};gs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!bV||bI()!=this.textarea)){try{this.textarea.focus()}catch(r){}}};gs.prototype.blur=function(){this.textarea.blur()};gs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};gs.prototype.receivedFocus=function(){this.slowPoll()};gs.prototype.slowPoll=function(){var r=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){r.poll();r.cm.state.focused&&r.slowPoll()})};gs.prototype.fastPoll=function(){function t(){u.poll()||r?(u.pollingFast=!1,u.slowPoll()):(r=!0,u.polling.set(60,t))}var r=!1,u=this;u.pollingFast=!0;u.polling.set(20,t)};gs.prototype.poll=function(){var t=this,r=this.cm,y=this.textarea,x=this.prevInput;if(this.contextMenuPending||!r.state.focused||ep(y)&&!x&&!this.composing||r.isReadOnly()||r.options.disableInput||r.state.keySeq){return !1}var w=y.value;if(w==x&&!r.somethingSelected()){return !1}if(gG&&9<=gJ&&this.hasSelection===w||d9&&/[\uf700-\uf7ff]/.test(w)){return r.display.input.reset(),!1}if(r.doc.sel==r.display.selForContextMenu){var v=w.charCodeAt(0);8203!=v||x||(x="\u200b");if(8666==v){return this.reset(),this.cm.execCommand("undo")}}for(var u=0,v=Math.min(x.length,w.length);u<v&&x.charCodeAt(u)==w.charCodeAt(u);){++u}g6(r,function(){eP(r,w.slice(u),x.length-u,null,t.composing?"*compose":null);1000<w.length||-1<w.indexOf("\n")?y.value=t.prevInput="":t.prevInput=w;t.composing&&(t.composing.range.clear(),t.composing.range=r.markText(t.composing.start,r.getCursor("to"),{className:"CodeMirror-composing"}))});return !0};gs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)};gs.prototype.onKeyPress=function(){gG&&9<=gJ&&(this.hasSelection=null);this.fastPoll()};gs.prototype.onContextMenu=function(E){function D(){if(null!=y.selectionStart){var G=A.somethingSelected(),F="\u200b"+(G?y.value:"");y.value="\u21da";y.value=F;B.prevInput=G?"":"\u200b";y.selectionStart=1;y.selectionEnd=F.length;z.selForContextMenu=A.doc.sel}}function C(){B.contextMenuPending=!1;B.wrapper.style.cssText=u;y.style.cssText=v;gG&&9>gJ&&z.scrollbars.setScrollTop(z.scroller.scrollTop=w);if(null!=y.selectionStart){(!gG||gG&&9>gJ)&&D();var F=0,G=function(){z.selForContextMenu==A.doc.sel&&0==y.selectionStart&&0<y.selectionEnd&&"\u200b"==B.prevInput?gq(A,cM)(A):10>F++?z.detectingSelectAll=setTimeout(G,500):(z.selForContextMenu=null,z.input.reset())};z.detectingSelectAll=setTimeout(G,200)}}var B=this,A=B.cm,z=A.display,y=B.textarea,x=dN(A,E),w=z.scroller.scrollTop;if(x&&!dG){A.options.resetSelectionOnContextMenu&&-1==A.doc.sel.contains(x)&&gq(A,gm)(A.doc,al(x),bW);var v=y.style.cssText,u=B.wrapper.style.cssText;B.wrapper.style.cssText="position: absolute";x=B.wrapper.getBoundingClientRect();y.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(E.clientY-x.top-5)+"px; left: "+(E.clientX-x.left-5)+"px;\n      z-index: 1000; background: "+(gG?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(gl){var r=window.scrollY}z.input.focus();gl&&window.scrollTo(null,r);z.input.reset();A.somethingSelected()||(y.value=B.prevInput=" ");B.contextMenuPending=!0;z.selForContextMenu=A.doc.sel;clearTimeout(z.detectingSelectAll);gG&&9<=gJ&&D();if(fG){aN(E);var t=function(){fZ(window,"mouseup",t);setTimeout(C,20)};fO(window,"mouseup",t)}else{setTimeout(C,50)}}};gs.prototype.readOnlyChanged=function(r){r||this.reset();this.textarea.disabled="nocursor"==r};gs.prototype.setUneditable=function(){};gs.prototype.needsContentAttribute=!1;(function(t){function r(v,y,x,w){t.defaults[v]=y;x&&(u[v]=w?function(A,z,B){B!=cv&&x(A,z,B)}:x)}var u=t.optionHandlers;t.defineOption=r;t.Init=cv;r("value","",function(w,v){return w.setValue(v)},!0);r("mode",null,function(w,v){w.doc.modeOption=v;a5(w)},!0);r("indentUnit",2,a5,!0);r("indentWithTabs",!1);r("smartIndent",!0);r("tabSize",4,function(v){gQ(v);a7(v);f8(v)},!0);r("lineSeparator",null,function(w,v){if(w.doc.lineSep=v){var y=[],z=w.doc.first;w.doc.iter(function(A){for(var C=0;;){var B=A.text.indexOf(v,C);if(-1==B){break}C=B+v.length;y.push(fR(z,B))}z++});for(var x=y.length-1;0<=x;x--){dF(w.doc,v,y[x],fR(y[x].line,y[x].ch+v.length))}}});r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(w,v,x){w.state.specialChars=new RegExp(v.source+(v.test("\t")?"":"|\t"),"g");x!=cv&&w.refresh()});r("specialCharPlaceholder",bQ,function(v){return v.refresh()},!0);r("electricChars",!0);r("inputStyle",bV?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor")},!0);r("spellcheck",!1,function(w,v){return w.getInputField().spellcheck=v},!0);r("rtlMoveVisually",!eE);r("wholeLineUpdateBefore",!0);r("theme","default",function(v){eN(v);cX(v)},!0);r("keyMap","default",function(w,v,x){v=aF(v);(x=x!=cv&&aF(x))&&x.detach&&x.detach(w,v);v.attach&&v.attach(w,x||null)});r("extraKeys",null);r("configureMouse",null);r("lineWrapping",!1,cE,!0);r("gutters",[],function(v){gV(v.options);cX(v)},!0);r("fixedGutter",!0,function(w,v){w.display.gutters.style.left=v?b7(w.display)+"px":"0";w.refresh()},!0);r("coverGutterNextToScrollbar",!1,function(v){return eZ(v)},!0);r("scrollbarStyle","native",function(v){dJ(v);eZ(v);v.display.scrollbars.setScrollTop(v.doc.scrollTop);v.display.scrollbars.setScrollLeft(v.doc.scrollLeft)},!0);r("lineNumbers",!1,function(v){gV(v.options);cX(v)},!0);r("firstLineNumber",1,cX,!0);r("lineNumberFormatter",function(v){return v},cX,!0);r("showCursorWhenSelecting",!1,aT,!0);r("resetSelectionOnContextMenu",!0);r("lineWiseCopyCut",!0);r("pasteLinesPerSelection",!0);r("readOnly",!1,function(w,v){"nocursor"==v&&(aG(w),w.display.input.blur());w.display.input.readOnlyChanged(v)});r("disableInput",!1,function(w,v){v||w.display.input.reset()},!0);r("dragDrop",!0,bo);r("allowDropFileTypes",null);r("cursorBlinkRate",530);r("cursorScrollMargin",0);r("cursorHeight",1,aT,!0);r("singleCursorHeightPerLine",!0,aT,!0);r("workTime",100);r("workDelay",100);r("flattenSpans",!0,gQ,!0);r("addModeClass",!1,gQ,!0);r("pollInterval",100);r("undoDepth",200,function(w,v){return w.doc.history.undoDepth=v});r("historyEventDelay",1250);r("viewportMargin",10,function(v){return v.refresh()},!0);r("maxHighlightLength",10000,gQ,!0);r("moveInputWithCursor",!0,function(w,v){v||w.display.input.resetPosition()});r("tabindex",null,function(w,v){return w.display.input.getField().tabIndex=v||""});r("autofocus",null);r("direction","ltr",function(w,v){return w.doc.setDirection(v)},!0)})(gz);(function(t){var r=t.optionHandlers,u=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus();this.display.input.focus()},setOption:function(v,y){var x=this.options,w=x[v];if(x[v]!=y||"mode"==v){x[v]=y,r.hasOwnProperty(v)&&gq(this,r[v])(this,y,w),gv(this,"optionChange",this,v)}},getOption:function(v){return this.options[v]},getDoc:function(){return this.doc},addKeyMap:function(w,v){this.state.keyMaps[v?"push":"unshift"](aF(w))},removeKeyMap:function(w){for(var v=this.state.keyMaps,x=0;x<v.length;++x){if(v[x]==w||v[x].name==w){return v.splice(x,1),!0}}},addOverlay:gi(function(v,x){var w=v.token?v:t.getMode(this.options,v);if(w.startState){throw Error("Overlays may not be stateful.")}g0(this.state.overlays,{mode:w,modeSpec:v,opaque:x&&x.opaque,priority:x&&x.priority||0},function(y){return y.priority});this.state.modeGen++;f8(this)}),removeOverlay:gi(function(w){for(var v=this.state.overlays,y=0;y<v.length;++y){var x=v[y].modeSpec;if(x==w||"string"==typeof w&&x.name==w){v.splice(y,1);this.state.modeGen++;f8(this);break}}}),indentLine:gi(function(w,v,x){"string"!=typeof v&&"number"!=typeof v&&(v=null==v?this.options.smartIndent?"smart":"prev":v?"add":"subtract");bH(this.doc,w)&&cC(this,w,v,x)}),indentSelection:gi(function(x){for(var v=this.doc.sel.ranges,B=-1,A=0;A<v.length;A++){var z=v[A];if(z.empty()){z.head.line>B&&(cC(this,z.head.line,x,!0),B=z.head.line,A==this.doc.sel.primIndex&&fm(this))}else{for(var y=z.from(),z=z.to(),w=Math.max(B,y.line),B=Math.min(this.lastLine(),z.line-(z.ch?0:1))+1,z=w;z<B;++z){cC(this,z,x)}z=this.doc.sel.ranges;0==y.ch&&v.length==z.length&&0<z[A].from().ch&&n(this.doc,A,new gI(y,z[A].to()),bW)}}}),getTokenAt:function(w,v){return dC(this,w,v)},getLineTokens:function(w,v){return dC(this,fR(w),v,!0)},getTokenTypeAt:function(w){w=fM(this.doc,w);var v=d5(this,fP(this.doc,w.line)),z=0,y=(v.length-1)/2;w=w.ch;if(0==w){v=v[2]}else{for(;;){var x=z+y>>1;if((x?v[2*x-1]:0)>=w){y=x}else{if(v[2*x+1]<w){z=x+1}else{v=v[2*x+2];break}}}}z=v?v.indexOf("overlay "):-1;return 0>z?v:0==z?null:v.slice(0,z-1)},getModeAt:function(v){var w=this.doc.mode;return w.innerMode?t.innerMode(w,this.getTokenAt(v).state).mode:w},getHelper:function(w,v){return this.getHelpers(w,v)[0]},getHelpers:function(w,v){var A=[];if(!u.hasOwnProperty(v)){return A}var z=u[v];w=this.getModeAt(w);if("string"==typeof w[v]){z[w[v]]&&A.push(z[w[v]])}else{if(w[v]){for(var y=0;y<w[v].length;y++){var x=z[w[v][y]];x&&A.push(x)}}else{w.helperType&&z[w.helperType]?A.push(z[w.helperType]):z[w.name]&&A.push(z[w.name])}}for(v=0;v<z._global.length;v++){y=z._global[v],y.pred(w,this)&&-1==go(A,y.val)&&A.push(y.val)}return A},getStateAfter:function(w,v){var x=this.doc;w=Math.max(x.first,Math.min(null==w?x.first+x.size-1:w,x.first+x.size-1));return az(this,w+1,v).state},cursorCoords:function(w,v){var x=this.doc.sel.primary();w=null==w?x.head:"object"==typeof w?fM(this.doc,w):w?x.from():x.to();return dV(this,w,v||"page")},charCoords:function(w,v){return bG(this,fM(this.doc,w),v||"page")},coordsChar:function(w,v){w=ao(this,w,v||"page");return ct(this,w.left,w.top)},lineAtHeight:function(w,v){w=ao(this,{top:w,left:0},v||"page").top;return gR(this.doc,w+this.display.viewOffset)},heightAtLine:function(w,v,z){var y=!1;if("number"==typeof w){var x=this.doc.first+this.doc.size-1;w<this.doc.first?w=this.doc.first:w>x&&(w=x,y=!0);w=fP(this.doc,w)}return fu(this,w,{top:0,left:0},v||"page",z||y).top+(y?this.doc.height-cw(w):0)},defaultTextHeight:function(){return eo(this.display)},defaultCharWidth:function(){return bA(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(E,D,C,y,x){var B=this.display;E=dV(this,fM(this.doc,E));var A=E.bottom,z=E.left;D.style.position="absolute";D.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(D);B.sizer.appendChild(D);if("over"==y){A=E.top}else{if("above"==y||"near"==y){var v=Math.max(B.wrapper.clientHeight,this.doc.height),w=Math.max(B.sizer.clientWidth,B.lineSpace.clientWidth);("above"==y||E.bottom+D.offsetHeight>v)&&E.top>D.offsetHeight?A=E.top-D.offsetHeight:E.bottom+D.offsetHeight<=v&&(A=E.bottom);z+D.offsetWidth>w&&(z=w-D.offsetWidth)}}D.style.top=A+"px";D.style.left=D.style.right="";"right"==x?(z=B.sizer.clientWidth-D.offsetWidth,D.style.right="0px"):("left"==x?z=0:"middle"==x&&(z=(B.sizer.clientWidth-D.offsetWidth)/2),D.style.left=z+"px");C&&(E=ax(this,{left:z,top:A,right:z+D.offsetWidth,bottom:A+D.offsetHeight}),null!=E.scrollTop&&p(this,E.scrollTop),null!=E.scrollLeft&&dk(this,E.scrollLeft))},triggerOnKeyDown:gi(g8),triggerOnKeyPress:gi(f1),triggerOnKeyUp:gM,triggerOnMouseDown:gi(fE),execCommand:function(v){if(d1.hasOwnProperty(v)){return d1[v].call(null,this)}},triggerElectric:gi(function(v){dI(this,v)}),findPosH:function(w,v,A,x){var z=1;0>v&&(z=-1,v=-v);w=fM(this.doc,w);for(var y=0;y<v&&(w=el(this.doc,w,z,A,x),!w.hitSide);++y){}return w},moveH:gi(function(w,v){var x=this;this.extendSelectionsBy(function(y){return x.display.shift||x.doc.extend||y.empty()?el(x.doc,y.head,w,v,x.options.rtlMoveVisually):0>w?y.from():y.to()},bt)}),deleteH:gi(function(w,v){var x=this.doc;this.doc.sel.somethingSelected()?x.replaceSelection("",null,"+delete"):cQ(this,function(z){var y=el(x,z.head,w,v,!1);return 0>w?{from:y,to:z.head}:{from:z.head,to:y}})}),findPosV:function(w,v,A,x){var z=1;0>v&&(z=-1,v=-v);var y=fM(this.doc,w);for(w=0;w<v&&(y=dV(this,y,"div"),null==x?x=y.left:y.left=x,y=ck(this,y,z,A),!y.hitSide);++w){}return y},moveV:gi(function(x,v){var B=this,A=this.doc,z=[],y=!this.display.shift&&!A.extend&&A.sel.somethingSelected();A.extendSelectionsBy(function(E){if(y){return 0>x?E.from():E.to()}var D=dV(B,E.head,"div");null!=E.goalColumn&&(D.left=E.goalColumn);z.push(D.left);var C=ck(B,D,x,v);"page"==v&&E==A.sel.primary()&&aZ(B,bG(B,C,"div").top-D.top);return C},bt);if(z.length){for(var w=0;w<A.sel.ranges.length;w++){A.sel.ranges[w].goalColumn=z[w]}}}),findWordAt:function(w){var v=fP(this.doc,w.line).text,A=w.ch,z=w.ch;if(v){var y=this.getHelper(w,"wordChars");"before"!=w.sticky&&z!=v.length||!A?++z:--A;for(var x=v.charAt(A),x=eY(x,y)?function(B){return eY(B,y)}:/\s/.test(x)?function(B){return/\s/.test(B)}:function(B){return !/\s/.test(B)&&!eY(B)};0<A&&x(v.charAt(A-1));){--A}for(;z<v.length&&x(v.charAt(z));){++z}}return new gI(fR(w.line,A),fR(w.line,z))},toggleOverwrite:function(v){if(null==v||v!=this.state.overwrite){(this.state.overwrite=!this.state.overwrite)?q(this.display.cursorDiv,"CodeMirror-overwrite"):dz(this.display.cursorDiv,"CodeMirror-overwrite"),gv(this,"overwriteToggle",this,this.state.overwrite)}},hasFocus:function(){return this.display.input.getField()==bI()},isReadOnly:function(){return !(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:gi(function(w,v){ar(this,w,v)}),getScrollInfo:function(){var v=this.display.scroller;return{left:v.scrollLeft,top:v.scrollTop,height:v.scrollHeight-ci(this)-this.display.barHeight,width:v.scrollWidth-ci(this)-this.display.barWidth,clientHeight:dD(this),clientWidth:eS(this)}},scrollIntoView:gi(function(w,v){null==w?(w={from:this.doc.sel.primary().head,to:null},null==v&&(v=this.options.cursorScrollMargin)):"number"==typeof w?w={from:fR(w,0),to:null}:null==w.from&&(w={from:w,to:null});w.to||(w.to=w.from);w.margin=v||0;null!=w.from.line?(aM(this),this.curOp.scrollToPos=w):ez(this,w.from,w.to,w.margin)}),setSize:gi(function(w,v){var z=this,y=function(A){return"number"==typeof A||/^\d+$/.test(String(A))?A+"px":A};null!=w&&(this.display.wrapper.style.width=y(w));null!=v&&(this.display.wrapper.style.height=y(v));this.options.lineWrapping&&a4(this);var x=this.display.viewFrom;this.doc.iter(x,this.display.viewTo,function(B){if(B.widgets){for(var A=0;A<B.widgets.length;A++){if(B.widgets[A].noHScroll){a8(z,x,"widget");break}}}++x});this.curOp.forceUpdate=!0;gv(this,"refresh",this)}),operation:function(v){return g6(this,v)},startOperation:function(){return cY(this)},endOperation:function(){return cD(this)},refresh:gi(function(){var v=this.display.cachedTextHeight;f8(this);this.curOp.forceUpdate=!0;a7(this);ar(this,this.doc.scrollLeft,this.doc.scrollTop);aL(this);(null==v||0.5<Math.abs(v-eo(this.display)))&&bT(this);gv(this,"refresh",this)}),swapDoc:gi(function(w){var v=this.doc;v.cm=null;g1(this,w);a7(this);this.display.input.reset();ar(this,w.scrollLeft,w.scrollTop);this.curOp.forceScroll=!0;gn(this,"swapDoc",this,v);return v}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};g5(t);t.registerHelper=function(v,x,w){u.hasOwnProperty(v)||(u[v]=t[v]={_global:[]});u[v][x]=w};t.registerGlobalHelper=function(v,y,x,w){t.registerHelper(v,y,w);u[v]._global.push({pred:x,val:w})}})(gz);var dO="iter insert remove copy getEditor constructor".split(" "),fX;for(fX in f6.prototype){f6.prototype.hasOwnProperty(fX)&&0>go(dO,fX)&&(gz.prototype[fX]=function(r){return function(){return r.apply(this.doc,arguments)}}(f6.prototype[fX]))}g5(f6);gz.inputStyles={textarea:gs,contenteditable:fI};gz.defineMode=function(r){gz.defaults.mode||"null"==r||(gz.defaults.mode=r);d4.apply(this,arguments)};gz.defineMIME=function(t,r){gF[t]=r};gz.defineMode("null",function(){return{token:function(r){return r.skipToEnd()}}});gz.defineMIME("text/plain","null");gz.defineExtension=function(t,r){gz.prototype[t]=r};gz.defineDocExtension=function(t,r){f6.prototype[t]=r};gz.fromTextArea=function(A,z){function y(){A.value=t.getValue()}z=z?c(z):{};z.value=A.value;!z.tabindex&&A.tabIndex&&(z.tabindex=A.tabIndex);!z.placeholder&&A.placeholder&&(z.placeholder=A.placeholder);if(null==z.autofocus){var x=bI();z.autofocus=x==A||null!=A.getAttribute("autofocus")&&x==document.body}if(A.form&&(fO(A.form,"submit",y),!z.leaveSubmitMethodAlone)){var w=A.form;var v=w.submit;try{var u=w.submit=function(){y();w.submit=v;w.submit();w.submit=u}}catch(r){}}z.finishInit=function(B){B.save=y;B.getTextArea=function(){return A};B.toTextArea=function(){B.toTextArea=isNaN;y();A.parentNode.removeChild(B.getWrapperElement());A.style.display="";A.form&&(fZ(A.form,"submit",y),"function"==typeof A.form.submit&&(A.form.submit=v))}};A.style.display="none";var t=gz(function(B){return A.parentNode.insertBefore(B,A.nextSibling)},z);return t};(function(r){r.off=fZ;r.on=fO;r.wheelEventPixels=bv;r.Doc=f6;r.splitLines=eA;r.countColumn=e0;r.findColumn=fs;r.isWordChar=eQ;r.Pass=o;r.signal=gv;r.Line=eK;r.changeEnd=aU;r.scrollbarModel=dv;r.Pos=fR;r.cmpPos=gK;r.modes=fW;r.mimeModes=gF;r.resolveMode=c3;r.getMode=fz;r.modeExtensions=fY;r.extendMode=dP;r.copyState=e7;r.startState=eW;r.innerMode=fk;r.commands=d1;r.keyMap=en;r.keyName=aC;r.isModifierKey=bw;r.lookupKey=c4;r.normalizeKeyMap=e1;r.StringStream=gt;r.SharedTextMarker=eC;r.TextMarker=aH;r.LineWidget=eR;r.e_preventDefault=gj;r.e_stopPropagation=fy;r.e_stop=aN;r.addClass=q;r.contains=ew;r.rmClass=dz;r.keyNames=at})(gz);gz.version="5.28.0";return gz});