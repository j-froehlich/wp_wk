jQuery(function(d){if(typeof wc_cart_fragments_params==="undefined"){return false}var e;var l=wc_cart_fragments_params.ajax_url.toString()+"-wc_cart_hash";try{e=("sessionStorage" in window&&window.sessionStorage!==null);window.sessionStorage.setItem("wc","test");window.sessionStorage.removeItem("wc");window.localStorage.setItem("wc","test");window.localStorage.removeItem("wc")}catch(b){e=false}function m(){if(e){sessionStorage.setItem("wc_cart_created",(new Date()).getTime())}}function n(q){if(e){localStorage.setItem(l,q);sessionStorage.setItem(l,q)}}var h={url:wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"POST",success:function(q){if(q&&q.fragments){d.each(q.fragments,function(r,s){d(r).replaceWith(s)});if(e){sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(q.fragments));n(q.cart_hash);if(q.cart_hash){m()}}d(document.body).trigger("wc_fragments_refreshed")}}};function f(){d.ajax(h)}if(e){var p=null,c=(24*60*60*1000);d(document.body).on("wc_fragment_refresh updated_wc_div",function(){f()});d(document.body).on("added_to_cart",function(t,q,r){var s=sessionStorage.getItem(l);if(s===null||s===undefined||s===""){m()}sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(q));n(r)});d(document.body).on("wc_fragments_refreshed",function(){clearTimeout(p);p=setTimeout(f,c)});d(window).on("storage onstorage",function(q){if(l===q.originalEvent.key&&localStorage.getItem(l)!==sessionStorage.getItem(l)){f()}});d(window).on("pageshow",function(q){if(q.originalEvent.persisted){d(".widget_shopping_cart_content").empty();d(document.body).trigger("wc_fragment_refresh")}});try{var o=d.parseJSON(sessionStorage.getItem(wc_cart_fragments_params.fragment_name)),a=sessionStorage.getItem(l),j=Cookies.get("woocommerce_cart_hash"),g=sessionStorage.getItem("wc_cart_created");if(a===null||a===undefined||a===""){a=""}if(j===null||j===undefined||j===""){j=""}if(a&&(g===null||g===undefined||g==="")){throw"No cart_created"}if(g){var i=((1*g)+c),k=(new Date()).getTime();if(i<k){throw"Fragment expired"}p=setTimeout(f,(i-k))}if(o&&o["div.widget_shopping_cart_content"]&&a===j){d.each(o,function(q,r){d(q).replaceWith(r)});d(document.body).trigger("wc_fragments_loaded")}else{throw"No fragment"}}catch(b){f()}}else{f()}if(Cookies.get("woocommerce_items_in_cart")>0){d(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show()}else{d(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").hide()}d(document.body).on("adding_to_cart",function(){d(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show()})});