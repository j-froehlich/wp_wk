(function(d,e){var f=function(a){this.$form=a;this.xhr=false;this.mapping=wc_product_import_params.mapping;this.position=0;this.file=wc_product_import_params.file;this.update_existing=wc_product_import_params.update_existing;this.delimiter=wc_product_import_params.delimiter;this.security=wc_product_import_params.import_nonce;this.imported=0;this.failed=0;this.updated=0;this.skipped=0;this.$form.find(".woocommerce-importer-progress").val(0);this.run_import=this.run_import.bind(this);this.run_import()};f.prototype.run_import=function(){var a=this;d.ajax({type:"POST",url:ajaxurl,data:{action:"woocommerce_do_ajax_product_import",position:a.position,mapping:a.mapping,file:a.file,update_existing:a.update_existing,delimiter:a.delimiter,security:a.security},dataType:"json",success:function(b){if(b.success){a.position=b.data.position;a.imported+=b.data.imported;a.failed+=b.data.failed;a.updated+=b.data.updated;a.skipped+=b.data.skipped;a.$form.find(".woocommerce-importer-progress").val(b.data.percentage);if("done"===b.data.position){e.location=b.data.url+"&products-imported="+parseInt(a.imported,10)+"&products-failed="+parseInt(a.failed,10)+"&products-updated="+parseInt(a.updated,10)+"&products-skipped="+parseInt(a.skipped,10)}else{a.run_import()}}}}).fail(function(b){e.console.log(b)})};d.fn.wc_product_importer=function(){new f(this);return this};d(".woocommerce-importer").wc_product_importer()})(jQuery,window);