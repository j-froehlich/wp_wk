!function(a){"use strict";function e(a){if(""==a||void 0===a)return"";if(-1!==a.search("rgba")){var b=a.lastIndexOf(",");a=a.slice(0,b)+")",a=a.replace("rgba","rgb")}return a}var c,b=0,d=!1;a().WilokeFillColorForPortfolio||(a.fn.WilokeFillColorForPortfolio=function(b,c){function e(b,c,e){var f="#wpwrap"==d.oOptions.target?b.data("rgbcolor"):b.data("color");if(void 0!==(f=void 0===f?b.val():f)&&""!==f&&"change"===c&&"#wpwrap"==d.oOptions.target&&-1!==f.search("rgba")){var g=f.lastIndexOf(",");f=f.substr(0,g)+")"}""!==f?null!==d.oOptions.target&&a(d.oOptions.target).css(d.oOptions.css,f):null!==d.oOptions.target&&a(d.oOptions.target).css(d.oOptions.css,""),void 0!==e&&e(b,f)}var d=this;if(this.oOptions=a.extend({target:null,css:"",isReset:!1},b),d.oOptions.isReset)return void a(d.oOptions.target).css(d.oOptions.css,"");a(".wil-focus-on").length&&(a(this).next().find(".sp-preview-inner").change(function(){e(a(this),"",c)}),a(this).change(function(){e(a(this),"change",c)}).trigger("change"))}),a().WilokePortfolioScrollToSettingSection||(a.fn.WilokePortfolioScrollToSettingSection=function(c){var d=a("html, body");a(this).on("click spectrum-show",function(e){if(!a("body.wil-focus-off").length){var f=a(e.currentTarget);for(var g in c){var h=a(c[g]).offset().top,i=!0;if((b==h||Math.abs(h-b)<100)&&(i=!1),i&&f.hasClass(g))return b=h,void d.stop().animate({scrollTop:h-300},"500","swing")}}})}),a(document).ready(function(){function i(){var b=a("#post-body").offset().left+15;a("#project_header_settings").css({left:-b+"px",right:-b+"px"})}if(a("#post_ID").length){a("#wpadminbar").addClass("hide-bar"),c=null!==WILOKE_OZ_THEMEOPTIONS?a.parseJSON(WILOKE_OZ_THEMEOPTIONS):{},a("#background_id_status").after('<div class="wil-bg-content"></div><div class="wil-bg-color"></div>'),a('[name="project_header_settings[background]"], [name="project_general_settings[project_content_bg_img]"]').change(function(){var b=a(this).siblings(".cmb_media_status"),c=a(this).val();b.css("background-image","url('"+c+"')")}).trigger("change"),a('[name="project_general_settings[project_content_bg_img]"]').change(function(){var c=(a(this).siblings(".cmb_media_status"),a(this).val());a(".wil-bg-content").css("background-image","url('"+c+"')")}).trigger("change"),a("body").addClass("wil-focus-off"),a("#content_ifr").contents().find("body").addClass("wil-focus-off"),a(window).load(function(){a("#content_ifr").contents().find("body").addClass("wil-focus-off")});var d=a("#titlewrap #title-prompt-text").text();a("#project_intro").before('<input type="text" placeholder="'+d+'" class="wil-titlediv">'),a("body #titlediv").prepend('<span class="wil-work-detail__sup"></span>'),a("body #titlediv #title").keyup(function(){var b=a(this).val(),c=a(this).val().slice(0,1);a(".wil-titlediv").val(b),a("body #titlediv .wil-work-detail__sup").text(c)}).trigger("keyup"),a(".wil-titlediv").keyup(function(){var b=a(this).val(),c=a(this).val().slice(0,1);a("body #titlediv #title").val(b),a("body #titlediv .wil-work-detail__sup").text(c)}).trigger("keyup"),a(window).on("scroll",function(){b=0}).trigger("scroll"),a(".wiloke-portfolio-settings-button").on("click",function(b){b.preventDefault(),a("#project_general_settings").toggleClass("active"),a(this).toggleClass("close"),a(".wiloke-portfolio-rest-settings-button").removeClass("close"),a("#postbox-container-1").removeClass("active")}),a(".wiloke-portfolio-rest-settings-button").on("click",function(b){b.preventDefault(),a("#postbox-container-1").toggleClass("active"),a(this).toggleClass("close"),a(".wiloke-portfolio-settings-button").removeClass("close"),a("#project_general_settings").removeClass("active")}),a("#project_general_settings tr.cmb_id_project_gcfirst_title_s label").attr("data-text","Gradient"),a("#project_general_settings tr.cmb_id_project_bg_gradient_s label").attr("data-text","Background Gradient");var f=a("#project_skin"),g=f.find("option:selected").attr("value");f.after('<div class="wil-check"></div>'),f.find("option").each(function(){var b=a(this),d=b.val(),e=b.text(),f=b.attr("selected"),h=b.parent(),i=h.siblings(".wil-check");"inherit"==g&&d==c.project_skin&&(f="selected"),i.append('<div class="wil-check--item '+f+'" title="'+e+'" data-val="'+d+'">'+e+"</div>")}),a(".wil-check--item").on("click",function(){var b=a(this),c=b.data("val"),d=b.parent();d.find(".wil-check--item").removeClass("selected"),b.addClass("selected"),d.prev().find("option").removeAttr("selected"),d.prev().find('[value="'+c+'"]').attr("selected","selected"),a("body").attr("data-skin",c)});var h=a(".cmb_id_project_intro label").text();a("#project_intro").attr("placeholder",h).removeAttr("rows").removeAttr("cols"),a.fn.autoHeight=function(){function b(b){function c(){b.css("height","auto"),b.css("height",b.prop("scrollHeight")+"px")}function d(){window.setTimeout(c,0)}b=a(b),b.bind("change",c),b.bind("cut",d),b.bind("paste",d),b.bind("drop",d),b.bind("keydown",d),c()}a.each(a(this),function(c,d){a(d).data("autoHeight")||(b(d),a(d).data("autoHeight",!0))})},a("#project_intro").autoHeight(),a(".wiloke-portfolio-toggle-settings-button").on("click",function(){a(this).toggleClass("active"),a("#project_general_settings,.wp-editor-expand,#project_header_settings,#single_portfolio_intro").toggleClass("wil-show"),localStorage.setItem("wiloke-oz-portfolio-mode","default")}),a(".wiloke-portfolio-toggle-live-builder-button").on("click",function(){a(".wiloke-portfolio-toggle-settings-button").removeClass("active"),a("#project_general_settings,.wp-editor-expand,#project_header_settings,#single_portfolio_intro").addClass("wil-show"),a("#postbox-container-2 .meta-box-sortables > *:not(#project_general_settings)").hide(),a("html").addClass("pt0"),a("body").removeClass("wil-focus-off").addClass("wil-focus-on"),a("#content_ifr").contents().find("body").removeClass("wil-focus-off").addClass("wil-focus-on"),a("html, body").animate({scrollTop:0},100),a("#content-tmce").trigger("click"),a("#wp-content-editor-tools, body.wil-focus-on .mce-menubar, body.wil-focus-on .mce-menubar + div.mce-toolbar-grp").hide(),i()}),a(".wiloke-portfolio-cancel-button").on("click",function(b){b.preventDefault(),a("#project_general_settings,.wp-editor-expand,#project_header_settings,#single_portfolio_intro").removeClass("wil-show"),a("#postbox-container-2 .meta-box-sortables > *:not(#project_general_settings)").show(),a("html").removeClass("pt0"),a("body").removeClass("wil-focus-on").addClass("wil-focus-off"),a("#content_ifr").contents().find("body").removeClass("wil-focus-on").addClass("wil-focus-off"),a("html, body").animate({scrollTop:0},100),a('[name="project_general_settings[project_bg_color]"]').WilokeFillColorForPortfolio({target:"#wpwrap, .wil-bg-color",css:"background-color",isReset:!0}),a(".wiloke-portfolio-toggle-settings-button").trigger("click")}),a("#project_launch_btn_style").change(function(){var b=a(this),e=(a("option",b),a("option:selected",b).val());e=void 0===e||"inherit"==e?c.project_launch_btn_style:e,a("#project_launch_btn").addClass("wil-btn").attr("data-btn-type",e)}).trigger("change"),a("#project_launch_btn_bg").change(function(){var b=a(this),e=(a("option",b),a("option:selected",b).val());e=void 0===e||"inherit"==e?c.project_launch_btn_bg:e,a("#project_launch_btn").attr("data-btn-bg",e),a('#project_launch_btn.wil-btn[data-btn-bg="wil-btn--gray"]').hover(function(){a(this).attr("data-btn-bg","")},function(){a(this).attr("data-btn-bg","wil-btn--gray")}),a('#project_launch_btn.wil-btn[data-btn-bg="wil-btn--dark"]').hover(function(){a(this).attr("data-btn-bg","")},function(){a(this).attr("data-btn-bg","wil-btn--dark")}),a('#project_launch_btn.wil-btn[data-btn-bg="wil-btn--main"]').hover(function(){a(this).attr("data-btn-bg","")},function(){a(this).attr("data-btn-bg","wil-btn--main")})}).trigger("change"),a("#project_launch_btn_size").change(function(){var b=a(this),e=(a("option",b),a("option:selected",b).val());e=void 0===e||"inherit"==e?c.project_launch_btn_size:e,a("#project_launch_btn").attr("data-btn-size",e)}).trigger("change"),a("#project_launch_btn").on("keyup",function(){for(var b=a(this),c=b.val(),d=0;d<c.length;d++)var e=c.charAt(d);var f=8;f+=.5,"m"==e?f+=1.5:"w"==e&&(f+=1);var g=(b.val().length+1)*f+60+"px";b.css("width",g)}),a(window).scroll(function(){var b=a("#project_launch_btn").offset(),c=a(window).scrollTop();a("#project_link").css({top:b.top-c-80+"px",left:b.left+"px"}),a(".cmb_id_project_launch_type").css({top:b.top-c-206+"px",left:b.left+"px"})}).trigger("scroll"),a("#project_launch_btn").click(function(){a("#project_link, .cmb_id_project_launch_type").addClass("active")}),a("html, body").click(function(){a("#project_link, .cmb_id_project_launch_type").removeClass("active")}),a("#project_link, .cmb_id_project_launch_type, #project_launch_btn").click(function(a){a.stopPropagation()}),a(".wiloke-portfolio-entries-meta").before('<span class="wil-flag"></span>'),a("#project_skin").change(function(){var b=a(this),e=(a("option",b),a("option:selected",b).val());e=void 0===e||"inherit"==e?c.project_skin:e,a("body").attr("data-skin",e)}).trigger("change"),a("#project_style").change(function(){var b=a(this),e=(a("option",b),a("option:selected",b).val());e=void 0===e||"inherit"==e?c.project_style:e,a("body").attr("data-type",e),a("#project_intro").autoHeight(),"style2"==e||"style3"==e?a(".wiloke-portfolio-entries-meta").insertBefore("#project_intro"):a(".wiloke-portfolio-entries-meta").insertAfter(".wil-flag")}).trigger("change"),a("#project_boxed").change(function(){var b=a(this),e=(a("option",b),a("option:selected",b).val());e=void 0===e||"inherit"==e?c.project_boxed:e,a("body").attr("data-boxed",e),a("#content_ifr").contents().find("body").attr("data-boxed",e),i(),"disable"==e?a("#insert-media-button").addClass("fix-left"):a("#insert-media-button").removeClass("fix-left")}).trigger("change"),a(window).resize(function(){i(),a(".wil-bg-color").css("height",a("body").outerHeight())}).trigger("resize"),a("#after_title-sortables").before('<div class="wil-clear"></div>'),a(".wiloke-portfolio-entries-meta").on("click",function(b){b.preventDefault(),a("#postbox-container-1").toggleClass("active"),a(".wiloke-portfolio-rest-settings-button").toggleClass("close"),a("#project_general_settings").removeClass("active"),a(".wiloke-portfolio-settings-button").removeClass("close")}),a(window).on("load resize",function(){a("#insert-media-button").css("left",a("#post-body").offset().left/2+"px")}),a(".wiloke-portfolio-toggle-live-builder-button").on("click",function(){localStorage.setItem("wiloke-oz-portfolio-mode","visual"),a('[name="project_general_settings[project_bg_color]"]').WilokeFillColorForPortfolio({target:"#wpwrap",css:"background-color"}),a('[name="project_general_settings[project_bg_color]"]').WilokeFillColorForPortfolio({target:".wil-bg-color",css:"background-color"}),a('[name="project_general_settings[project_gcfirst_title_s]"]').WilokeFillColorForPortfolio({},function(b,c){var d=""==a('[name="project_general_settings[project_gcfirst_title_f]"]').val()?"transparent":a('[name="project_general_settings[project_gcfirst_title_f]"]').val();c=""!=c?c:"transparent","transparent"===d&&"transparent"===c?a("#titlediv .wil-work-detail__sup").css({"background-image":""}):a("#titlediv .wil-work-detail__sup").css({"background-image":"linear-gradient(45deg, "+d+" 40%, "+c+" 80%)"})}),a('[name="project_general_settings[project_gcfirst_title_f]"]').WilokeFillColorForPortfolio({},function(b,d){var e=""==a('[name="project_general_settings[project_gcfirst_title_s]"]').val()?"transparent":a('[name="project_general_settings[project_gcfirst_title_s]"]').val();d=""!=d?d:"transparent","transparent"===e&&"transparent"===d?(e=""!=c.project_gcfirst_title_s.rgba?c.project_gcfirst_title_s.rgba:"transparent",d=""!=c.project_gcfirst_title_f.rgba?c.project_gcfirst_title_f.rgba:"transparent","transparent"!=e||"transparent"!=d?a("#titlediv .wil-work-detail__sup").css({"background-image":"linear-gradient(45deg, "+d+" 40%, "+e+" 80%)"}):a("#titlediv .wil-work-detail__sup").css({"background-image":""})):a("#titlediv .wil-work-detail__sup").css({"background-image":"linear-gradient(45deg, "+d+" 40%, "+e+" 80%)"})}),a('[name="project_general_settings[project_bg_gradient_s]"]').WilokeFillColorForPortfolio({},function(b,c){var d,f,g;""==a('[name="project_general_settings[project_bg_gradient_f]"]').val()?d=f="transparent":(d=a('[name="project_general_settings[project_bg_gradient_f]"]').val(),f=e(d)),""==c?c=g="transparent":g=e(c),"transparent"==d&&"transparent"==c?a("#wpwrap, .wil-bg-color").css({"background-image":"","background-color":""}):(a(".wil-bg-color").css({"background-image":"linear-gradient(45deg, "+d+" 40%, "+c+" 80%)","background-color":d}),a("#wpwrap").css({"background-image":"linear-gradient(45deg, "+f+" 40%, "+g+" 80%)","background-color":f}))}),a('[name="project_general_settings[project_bg_gradient_f]"]').WilokeFillColorForPortfolio({},function(b,c){var d,f,g;""==a('[name="project_general_settings[project_bg_gradient_s]"]').val()?d=f="transparent":(d=a('[name="project_general_settings[project_bg_gradient_s]"]').val(),f=e(d)),""==c?c=g="transparent":g=e(c),"transparent"==d&&"transparent"==c?a("#wpwrap, .wil-bg-color").css({"background-image":"","background-color":""}):(a(".wil-bg-color").css({"background-image":"linear-gradient(45deg, "+c+" 40%, "+d+" 80%)","background-color":c}),a("#wpwrap").css({"background-image":"linear-gradient(45deg, "+g+" 40%, "+f+" 80%)","background-color":g}))}),a('[name="project_general_settings[project_title_color]"]').WilokeFillColorForPortfolio({target:"#titlediv #title, #single_portfolio_intro .wil-titlediv",css:"color"}),a('[name="project_general_settings[project_intro_label_color]"]').WilokeFillColorForPortfolio({target:"#post-body-content .wil-work-detail__meta__item",css:"color"}),a('[name="project_general_settings[project_intro_content_color]"]').WilokeFillColorForPortfolio({target:"#post-body-content .wil-work-detail__meta__item span, #post-body-content .wil-work-detail__categories a",css:"color"}),a('[name="project_general_settings[project_text_intro_color]"]').WilokeFillColorForPortfolio({target:"#project_intro",css:"color"}),a('[name="project_general_settings[theme_color]"]').WilokeFillColorForPortfolio({target:".cmb_id_project_launch_btn .wil-btn",css:"background-color"}),a('[name="project_general_settings[project_bg_type]"]').change(function(){var d,e,f,b=a(this).find("option:selected").attr("value");"gradient"===b?(a(".wil-bg-color").css({"background-color":""}),a('[name="project_general_settings[project_bg_gradient_f]"]').trigger("change"),a('[name="project_general_settings[project_bg_gradient_s]"]').trigger("change")):"color"===b?(a("#wpwrap, .wil-bg-color").css({"background-image":""}),a('[name="project_general_settings[project_bg_color]"]').trigger("change")):"color"==c.project_bg_type?(d=""!=c.project_bg_color.color?c.project_bg_color.color:"",a("#wpwrap, .wil-bg-color").css({"background-image":""}),a(".wil-bg-color, #wpwrap").css({"background-color":d})):(e=c.project_bg_gradient_f.rgba,f=c.project_bg_gradient_s.rgba,a("#wpwrap, .wil-bg-color").css({"background-image":"linear-gradient(45deg,"+e+" 40%, "+f+" 80%)","background-color":e}))}).trigger("change")}),a(".cmb-type-colorpicker, .cmb-type-select").WilokePortfolioScrollToSettingSection({cmb_id_project_gcfirst_title_s:".wil-work-detail__sup",cmb_id_project_gcfirst_title_f:".wil-work-detail__sup",cmb_id_project_title_color:"#titlediv",cmb_id_project_intro_label_color:"#titlediv",cmb_id_project_intro_content_color:"#titlediv",cmb_id_project_text_intro_color:"#project_intro",cmb_id_project_launch_btn_style:"#single_portfolio_intro",cmb_id_project_launch_btn_bg:"#single_portfolio_intro",cmb_id_project_launch_btn_size:"#single_portfolio_intro"}),a("#portfolio_categorychecklist .popular-category input").change(function(){if(a(this).is(":checked")){var b=a(this).parent().text();a("#post-body .wil-work-detail__categories ul").append('<li data-termid="'+a(this).attr("value")+'"><a href="#">'+b+"</a></li>")}else a("#post-body .wil-work-detail__categories ul").find('li[data-termid="'+a(this).attr("value")+'"]').remove()}),a("#timestampdiv .save-timestamp").on("click",function(){var b=a("#timestamp").find("b").html();b=b.slice(0,b.indexOf("@")),b=b.trim(),a("#post-body-content").find(".wil-work-detail__date span").html(b)}),a("#wiloke-portfolio-save-button").on("click",function(){a(window).unbind("beforeunload")}),a('input[name="project_header_settings[background]"]').before('<span class="wil-header-bg-remove" title="Remove"></span>'),a('[name="project_header_settings[background]"]').change(function(){var b=a(this).siblings(".cmb_upload_file_id ").val();""==a(this).val()?a(".wil-header-bg-remove").hide():a(".wil-header-bg-remove").show(),a(this).siblings(".cmb_upload_file_id ").val(b)}).trigger("change"),a(document).find(".wil-header-bg-remove").on("click",function(){a(this).siblings("#background_id_status").find(".cmb_remove_file_button").trigger("click")})}}),a(window).load(function(){"default"==localStorage.getItem("wiloke-oz-portfolio-mode")||void 0===localStorage.getItem("wiloke-oz-portfolio-mode")?a(".wiloke-portfolio-toggle-settings-button").trigger("click"):a(".wiloke-portfolio-toggle-live-builder-button").trigger("click"),a("#project_skin").change(function(){var b=a(this),e=(a("option",b),a("option:selected",b).val());e=void 0===e||"inherit"==e?c.project_skin:e,a("#content_ifr").contents().find("body").attr("data-skin",e)}).trigger("change"),a(".wil-check--item").on("click",function(){var b=a(this),c=b.data("val");a("#content_ifr").contents().find("body").attr("data-skin",c)}),a("#content_ifr").before('<span class="wil-editor-placeholder">Enter content here</span>'),""===a("#content_ifr").contents().find("body > p:first-child").html()||'<br data-mce-bogus="1">'===a("#content_ifr").contents().find("body > p:first-child").html()?a(".wil-editor-placeholder").removeClass("wil-hide"):a(".wil-editor-placeholder").addClass("wil-hide"),a("#content_ifr").contents().find("body").on({focus:function(){"visual"==localStorage.getItem("wiloke-oz-portfolio-mode")&&(a(".wil-editor-placeholder").addClass("wil-hide"),a("#insert-media-button, .mce-menubar, #wp-content-editor-container .mce-container-body > .mce-toolbar-grp").addClass("active"))},blur:function(){"visual"==localStorage.getItem("wiloke-oz-portfolio-mode")&&(""===a("#content_ifr").contents().find("body > p:first-child").html()||'<br data-mce-bogus="1">'===a("#content_ifr").contents().find("body > p:first-child").html()?a(".wil-editor-placeholder").removeClass("wil-hide"):a(".wil-editor-placeholder").addClass("wil-hide"),a("#insert-media-button, .mce-menubar, #wp-content-editor-container .mce-container-body > .mce-toolbar-grp").removeClass("active"))}}),a(".mce-widget.mce-btn").on("click",function(){"visual"==localStorage.getItem("wiloke-oz-portfolio-mode")&&"Insert/edit link"===a(this).attr("aria-label")&&wpLink.open("content")}),a(window).scroll(function(){a(".wil-bg-color").css("height",a("body").outerHeight()),d=!1}),a(".cmb_upload_file_id ").each(function(){""==a(this).val()&&""!=a(this).siblings(".cmb_upload_file ").val()&&a(this).val(a(this).data("mediaid"))})})}(jQuery);