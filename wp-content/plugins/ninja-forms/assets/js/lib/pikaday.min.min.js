/*!
 * Pikaday
 *
 * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */
;!function(b,c){var d;if("object"==typeof exports){try{d=require("moment")}catch(a){}module.exports=c(d)}else{"function"==typeof define&&define.amd?define(function(g){var f="moment";try{d=g(f)}catch(e){}return c(d)}):b.Pikaday=c(b.moment)}}(this,function(K){var ad="function"==typeof K,V=!!window.addEventListener,Z=window.document,ah=window.setTimeout,U=function(d,f,c,b){V?d.addEventListener(f,c,!!b):d.attachEvent("on"+f,c)},O=function(d,f,c,b){V?d.removeEventListener(f,c,!!b):d.detachEvent("on"+f,c)},Q=function(c,d,f){var b;Z.createEvent?(b=Z.createEvent("HTMLEvents"),b.initEvent(d,!0,!1),b=L(b,f),c.dispatchEvent(b)):Z.createEventObject&&(b=Z.createEventObject(),b=L(b,f),c.fireEvent("on"+d,b))},aa=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},X=function(a,b){return -1!==(" "+a.className+" ").indexOf(" "+b+" ")},ae=function(a,b){X(a,b)||(a.className=""===a.className?b:a.className+" "+b)},I=function(a,b){a.className=aa((" "+a.className+" ").replace(" "+b+" "," "))},af=function(a){return/Array/.test(Object.prototype.toString.call(a))},ac=function(a){return/Date/.test(Object.prototype.toString.call(a))&&!isNaN(a.getTime())},ab=function(a){var b=a.getDay();return 0===b||6===b},W=function(a){return a%4===0&&a%100!==0||a%400===0},S=function(a,b){return[31,W(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},B=function(a){ac(a)&&a.setHours(0,0,0,0)},ai=function(a,b){return a.getTime()===b.getTime()},L=function(d,f,g){var c,b;for(c in f){b=void 0!==d[c],b&&"object"==typeof f[c]&&null!==f[c]&&void 0===f[c].nodeName?ac(f[c])?g&&(d[c]=new Date(f[c].getTime())):af(f[c])?g&&(d[c]=f[c].slice(0)):d[c]=L({},f[c],g):(g||!b)&&(d[c]=f[c])}return d},H=function(a){return a.month<0&&(a.year-=Math.ceil(Math.abs(a.month)/12),a.month+=12),a.month>11&&(a.year+=Math.floor(Math.abs(a.month)/12),a.month-=12),a},ag={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},G=function(a,b,c){for(b+=a.firstDay;b>=7;){b-=7}return c?a.i18n.weekdaysShort[b]:a.i18n.weekdays[b]},A=function(a){if(a.isEmpty){return'<td class="is-empty"></td>'}var b=[];return a.isDisabled&&b.push("is-disabled"),a.isToday&&b.push("is-today"),a.isSelected&&b.push("is-selected"),a.isInRange&&b.push("is-inrange"),a.isStartRange&&b.push("is-startrange"),a.isEndRange&&b.push("is-endrange"),'<td data-day="'+a.day+'" class="'+b.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+a.year+'" data-pika-month="'+a.month+'" data-pika-day="'+a.day+'">'+a.day+"</button></td>"},Y=function(d,f,g){var c=new Date(g,0,1),b=Math.ceil(((new Date(g,f,d)-c)/86400000+c.getDay()+1)/7);return'<td class="pika-week">'+b+"</td>"},q=function(a,b){return"<tr>"+(b?a.reverse():a).join("")+"</tr>"},F=function(a){return"<tbody>"+a.join("")+"</tbody>"},z=function(a){var b,c=[];for(a.showWeekNumber&&c.push("<th></th>"),b=0;7>b;b++){c.push('<th scope="col"><abbr title="'+G(a,b)+'">'+G(a,b,!0)+"</abbr></th>")}return"<thead>"+(a.isRTL?c.reverse():c).join("")+"</thead>"},P=function(aj,M,v,y,R){var k,ak,b,C,x,N=aj._o,T=v===N.minYear,E=v===N.maxYear,D='<div class="pika-title">',w=!0,c=!0;for(b=[],k=0;12>k;k++){b.push('<option value="'+(v===R?k-M:12+k-M)+'"'+(k===y?" selected":"")+(T&&k<N.minMonth||E&&k>N.maxMonth?"disabled":"")+">"+N.i18n.months[k]+"</option>")}for(C='<div class="pika-label">'+N.i18n.months[y]+'<select class="pika-select pika-select-month" tabindex="-1">'+b.join("")+"</select></div>",af(N.yearRange)?(k=N.yearRange[0],ak=N.yearRange[1]+1):(k=v-N.yearRange,ak=1+v+N.yearRange),b=[];ak>k&&k<=N.maxYear;k++){k>=N.minYear&&b.push('<option value="'+k+'"'+(k===v?" selected":"")+">"+k+"</option>")}return x='<div class="pika-label">'+v+N.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+b.join("")+"</select></div>",D+=N.showMonthAfterYear?x+C:C+x,T&&(0===y||N.minMonth>=y)&&(w=!1),E&&(11===y||N.maxMonth<=y)&&(c=!1),0===M&&(D+='<button class="pika-prev'+(w?"":" is-disabled")+'" type="button">'+N.i18n.previousMonth+"</button>"),M===aj._o.numberOfMonths-1&&(D+='<button class="pika-next'+(c?"":" is-disabled")+'" type="button">'+N.i18n.nextMonth+"</button>"),D+="</div>"},j=function(a,b){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+z(a)+F(b)+"</table>"},J=function(b){var c=this,a=c.config(b);c._onMouseDown=function(d){if(c._v){d=d||window.event;var f=d.target||d.srcElement;if(f){if(X(f,"is-disabled")||(X(f,"pika-button")&&!X(f,"is-empty")?(c.setDate(new Date(f.getAttribute("data-pika-year"),f.getAttribute("data-pika-month"),f.getAttribute("data-pika-day"))),a.bound&&ah(function(){c.hide(),a.field&&a.field.blur()},100)):X(f,"pika-prev")?c.prevMonth():X(f,"pika-next")&&c.nextMonth()),X(f,"pika-select")){c._c=!0}else{if(!d.preventDefault){return d.returnValue=!1,!1}d.preventDefault()}}}},c._onChange=function(d){d=d||window.event;var f=d.target||d.srcElement;f&&(X(f,"pika-select-month")?c.gotoMonth(f.value):X(f,"pika-select-year")&&c.gotoYear(f.value))},c._onInputChange=function(f){var d;f.firedBy!==c&&(ad?(d=K(a.field.value,a.format),d=d&&d.isValid()?d.toDate():null):d=new Date(Date.parse(a.field.value)),ac(d)&&c.setDate(d),c._v||c.show())},c._onInputFocus=function(){c.show()},c._onInputClick=function(){c.show()},c._onInputBlur=function(){var d=Z.activeElement;do{if(X(d,"pika-single")){return}}while(d=d.parentNode);c._c||(c._b=ah(function(){c.hide()},50)),c._c=!1},c._onClick=function(f){f=f||window.event;var g=f.target||f.srcElement,d=g;if(g){!V&&X(g,"pika-select")&&(g.onchange||(g.setAttribute("onchange","return;"),U(g,"change",c._onChange)));do{if(X(d,"pika-single")||d===a.trigger){return}}while(d=d.parentNode);c._v&&g!==a.trigger&&d!==a.trigger&&c.hide()}},c.el=Z.createElement("div"),c.el.className="pika-single"+(a.isRTL?" is-rtl":"")+(a.theme?" "+a.theme:""),U(c.el,"mousedown",c._onMouseDown,!0),U(c.el,"touchend",c._onMouseDown,!0),U(c.el,"change",c._onChange),a.field&&(a.container?a.container.appendChild(c.el):a.bound?Z.body.appendChild(c.el):a.field.parentNode.insertBefore(c.el,a.field.nextSibling),U(a.field,"change",c._onInputChange),a.defaultDate||(ad&&a.field.value?a.defaultDate=K(a.field.value,a.format).toDate():a.defaultDate=new Date(Date.parse(a.field.value)),a.setDefaultDate=!0));var e=a.defaultDate;ac(e)?a.setDefaultDate?c.setDate(e,!0):c.gotoDate(e):c.gotoDate(new Date),a.bound?(this.hide(),c.el.className+=" is-bound",U(a.trigger,"click",c._onInputClick),U(a.trigger,"focus",c._onInputFocus),U(a.trigger,"blur",c._onInputBlur)):this.show()};return J.prototype={config:function(b){this._o||(this._o=L({},ag,!0));var c=L(this._o,b,!0);c.isRTL=!!c.isRTL,c.field=c.field&&c.field.nodeName?c.field:null,c.theme="string"==typeof c.theme&&c.theme?c.theme:null,c.bound=!!(void 0!==c.bound?c.field&&c.bound:c.field),c.trigger=c.trigger&&c.trigger.nodeName?c.trigger:c.field,c.disableWeekends=!!c.disableWeekends,c.disableDayFn="function"==typeof c.disableDayFn?c.disableDayFn:null;var d=parseInt(c.numberOfMonths,10)||1;if(c.numberOfMonths=d>4?4:d,ac(c.minDate)||(c.minDate=!1),ac(c.maxDate)||(c.maxDate=!1),c.minDate&&c.maxDate&&c.maxDate<c.minDate&&(c.maxDate=c.minDate=!1),c.minDate&&this.setMinDate(c.minDate),c.maxDate&&this.setMaxDate(c.maxDate),af(c.yearRange)){var a=(new Date).getFullYear()-10;c.yearRange[0]=parseInt(c.yearRange[0],10)||a,c.yearRange[1]=parseInt(c.yearRange[1],10)||a}else{c.yearRange=Math.abs(parseInt(c.yearRange,10))||ag.yearRange,c.yearRange>100&&(c.yearRange=100)}return c},toString:function(a){return ac(this._d)?ad?K(this._d).format(a||this._o.format):this._d.toDateString():""},getMoment:function(){return ad?K(this._d):null},setMoment:function(b,a){ad&&K.isMoment(b)&&this.setDate(b.toDate(),a)},getDate:function(){return ac(this._d)?new Date(this._d.getTime()):null},setDate:function(b,c){if(!b){return this._d=null,this._o.field&&(this._o.field.value="",Q(this._o.field,"change",{firedBy:this})),this.draw()}if("string"==typeof b&&(b=new Date(Date.parse(b))),ac(b)){var d=this._o.minDate,a=this._o.maxDate;ac(d)&&d>b?b=d:ac(a)&&b>a&&(b=a),this._d=new Date(b.getTime()),B(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),Q(this._o.field,"change",{firedBy:this})),c||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(d){var f=!0;if(ac(d)){if(this.calendars){var g=new Date(this.calendars[0].year,this.calendars[0].month,1),c=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),b=d.getTime();c.setMonth(c.getMonth()+1),c.setDate(c.getDate()-1),f=b<g.getTime()||c.getTime()<b}f&&(this.calendars=[{month:d.getMonth(),year:d.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=H(this.calendars[0]);for(var a=1;a<this._o.numberOfMonths;a++){this.calendars[a]=H({month:this.calendars[0].month+a,year:this.calendars[0].year})}this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(a){isNaN(a)||(this.calendars[0].month=parseInt(a,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(a){isNaN(a)||(this.calendars[0].year=parseInt(a,10),this.adjustCalendars())},setMinDate:function(a){B(a),this._o.minDate=a,this._o.minYear=a.getFullYear(),this._o.minMonth=a.getMonth(),this.draw()},setMaxDate:function(a){B(a),this._o.maxDate=a,this._o.maxYear=a.getFullYear(),this._o.maxMonth=a.getMonth(),this.draw()},setStartRange:function(a){this._o.startRange=a},setEndRange:function(a){this._o.endRange=a},draw:function(m){if(this._v||m){var k=this._o,c=k.minYear,f=k.maxYear,b=k.minMonth,p=k.maxMonth,a="";this._y<=c&&(this._y=c,!isNaN(b)&&this._m<b&&(this._m=b)),this._y>=f&&(this._y=f,!isNaN(p)&&this._m>p&&(this._m=p));for(var g=0;g<k.numberOfMonths;g++){a+='<div class="pika-lendar">'+P(this,g,this.calendars[g].year,this.calendars[g].month,this.calendars[0].year)+this.render(this.calendars[g].year,this.calendars[g].month)+"</div>"}if(this.el.innerHTML=a,k.bound&&"hidden"!==k.field.type&&ah(function(){k.trigger.focus()},1),"function"==typeof this._o.onDraw){var d=this;ah(function(){d._o.onDraw.call(d)},0)}}},adjustPosition:function(){var u,k,f,p,c,v,b,i,g,m;if(!this._o.container){if(this.el.style.position="absolute",u=this._o.trigger,k=u,f=this.el.offsetWidth,p=this.el.offsetHeight,c=window.innerWidth||Z.documentElement.clientWidth,v=window.innerHeight||Z.documentElement.clientHeight,b=window.pageYOffset||Z.body.scrollTop||Z.documentElement.scrollTop,"function"==typeof u.getBoundingClientRect){m=u.getBoundingClientRect(),i=m.left+window.pageXOffset,g=m.bottom+window.pageYOffset}else{for(i=k.offsetLeft,g=k.offsetTop+k.offsetHeight;k=k.offsetParent;){i+=k.offsetLeft,g+=k.offsetTop}}(this._o.reposition&&i+f>c||this._o.position.indexOf("right")>-1&&i-f+u.offsetWidth>0)&&(i=i-f+u.offsetWidth),(this._o.reposition&&g+p>v+b||this._o.position.indexOf("top")>-1&&g-p-u.offsetHeight>0)&&(g=g-p-u.offsetHeight),this.el.style.left=i+"px",this.el.style.top=g+"px"}},render:function(E,aq){var al=this._o,ao=new Date,av=S(E,aq),ak=new Date(E,aq,1).getDay(),M=[],aj=[];B(ao),al.firstDay>0&&(ak-=al.firstDay,0>ak&&(ak+=7));for(var ap=av+ak,an=ap;an>7;){an-=7}ap+=7-an;for(var ar=0,y=0;ap>ar;ar++){var at=new Date(E,aq,1+(ar-ak)),am=ac(this._d)?ai(at,this._d):!1,R=ai(at,ao),p=ak>ar||ar>=av+ak,au=al.startRange&&ai(al.startRange,at),k=al.endRange&&ai(al.endRange,at),g=al.startRange&&al.endRange&&al.startRange<at&&at<al.endRange,f=al.minDate&&at<al.minDate||al.maxDate&&at>al.maxDate||al.disableWeekends&&ab(at)||al.disableDayFn&&al.disableDayFn(at),T={day:1+(ar-ak),month:aq,year:E,isSelected:am,isToday:R,isDisabled:f,isEmpty:p,isStartRange:au,isEndRange:k,isInRange:g};aj.push(A(T)),7===++y&&(al.showWeekNumber&&aj.unshift(Y(ar-ak,aq,E)),M.push(q(aj,al.isRTL)),aj=[],y=0)}return j(al,M)},isVisible:function(){return this._v},show:function(){this._v||(I(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(U(Z,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var a=this._v;a!==!1&&(this._o.bound&&O(Z,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",ae(this.el,"is-hidden"),this._v=!1,void 0!==a&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),O(this.el,"mousedown",this._onMouseDown,!0),O(this.el,"touchend",this._onMouseDown,!0),O(this.el,"change",this._onChange),this._o.field&&(O(this._o.field,"change",this._onInputChange),this._o.bound&&(O(this._o.trigger,"click",this._onInputClick),O(this._o.trigger,"focus",this._onInputFocus),O(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},J});