/*! PhotoSwipe - v4.1.1 - 2015-12-24
* http://photoswipe.com
* Copyright (c) 2015 Dmitry Semenov; */
;!function(b,a){"function"==typeof define&&define.amd?define(a):"object"==typeof exports?module.exports=a():b.PhotoSwipe=a()}(this,function(){return function(b9,bO,bW,b3){var bV={features:null,bind:function(f,d,h,c){var g=(c?"remove":"add")+"EventListener";d=d.split(" ");for(var b=0;b<d.length;b++){d[b]&&f[g](d[b],h,!1)}},isArray:function(a){return a instanceof Array},createEl:function(b,a){var c=document.createElement(a||"div");return b&&(c.className=b),c},getScrollY:function(){var a=window.pageYOffset;return a!==undefined?a:document.documentElement.scrollTop},unbind:function(b,a,c){bV.bind(b,a,c,!0)},removeClass:function(b,a){var c=new RegExp("(\\s|^)"+a+"(\\s|$)");b.className=b.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(b,a){bV.hasClass(b,a)||(b.className+=(b.className?" ":"")+a)},hasClass:function(b,a){return b.className&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(b.className)},getChildByClass:function(b,a){for(var c=b.firstChild;c;){if(bV.hasClass(c,a)){return c}c=c.nextSibling}},arraySearch:function(c,b,d){for(var a=c.length;a--;){if(c[a][d]===b){return a}}return -1},extend:function(c,b,d){for(var a in b){if(b.hasOwnProperty(a)){if(d&&c.hasOwnProperty(a)){continue}c[a]=b[a]}}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return -(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return --a*a*a+1}}},detectFeatures:function(){if(bV.features){return bV.features}var v=bV.createEl().style,A="",h={};if(h.oldIE=document.all&&!document.addEventListener,h.touch="ontouchstart" in window,window.requestAnimationFrame&&(h.raf=window.requestAnimationFrame,h.caf=window.cancelAnimationFrame),h.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!h.pointerEvent){var o=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var y=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);y&&y.length>0&&(y=parseInt(y[1],10))>=1&&y<8&&(h.isOldIOSPhone=!0)}var b=o.match(/Android\s([0-9\.]*)/),k=b?b[1]:0;(k=parseFloat(k))>=1&&(k<4.4&&(h.isOldAndroid=!0),h.androidVersion=k),h.isMobileOpera=/opera mini|opera mobi/i.test(o)}for(var B,z,x=["transform","perspective","animationName"],w=["","webkit","Moz","ms","O"],g=0;g<4;g++){A=w[g];for(var j=0;j<3;j++){B=x[j],z=A+(A?B.charAt(0).toUpperCase()+B.slice(1):B),!h[B]&&z in v&&(h[B]=z)}A&&!h.raf&&(A=A.toLowerCase(),h.raf=window[A+"RequestAnimationFrame"],h.raf&&(h.caf=window[A+"CancelAnimationFrame"]||window[A+"CancelRequestAnimationFrame"]))}if(!h.raf){var q=0;h.raf=function(d){var c=(new Date).getTime(),f=Math.max(0,16-(c-q)),a=window.setTimeout(function(){d(c+f)},f);return q=c+f,a},h.caf=function(a){clearTimeout(a)}}return h.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,bV.features=h,h}};bV.detectFeatures(),bV.features.oldIE&&(bV.bind=function(g,d,j,c){d=d.split(" ");for(var h,b=(c?"detach":"attach")+"Event",f=0;f<d.length;f++){if(h=d[f]){if("object"==typeof j&&j.handleEvent){if(c){if(!j["oldIE"+h]){return !1}}else{j["oldIE"+h]=function(){j.handleEvent.call(j)}}g[b]("on"+h,j["oldIE"+h])}else{g[b]("on"+h,j)}}}});var cd=this,bR={allowPanToNext:!0,spacing:0.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:0.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:0.35,panEndFriction:0.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(b,a){return b?1:a.initialZoomLevel<0.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};bV.extend(bR,b3);var bZ,bQ,bM,cb,ca,bU,bY,b7,b5,bH,bJ,bL,b6,bK,cc,cK,cT,cR,cD,cs,cv,cW,cP,cA,b0,cw,ci,cz,cO,cE,cg,bG,cC,cq,cL,ck,cU,cm,cM,cl,co,cG,bS,c8,b1,cI,cx,br,aU,cX,aG,ch,c4,bk,dp,a5,aJ={x:0,y:0},b2={x:0,y:0},bB={x:0,y:0},bF={},db=0,bg={},aR={x:0,y:0},df=0,ac=!0,az=[],a1={},ao=!1,cH=function(b,a){bV.extend(cd,a.publicMethods),az.push(b)},cV=function(b){var a=bz();return b>a-1?b-a:b<0?a+b:b},aQ={},aF=function(b,a){return aQ[b]||(aQ[b]=[]),aQ[b].push(a)},bj=function(c){var b=aQ[c];if(b){var d=Array.prototype.slice.call(arguments);d.shift();for(var a=0;a<b.length;a++){b[a].apply(cd,d)}}},dd=function(){return(new Date).getTime()},ab=function(a){bk=a,cd.bg.style.opacity=a*bR.bgOpacity},bd=function(c,b,f,a,d){(!ao||d&&d!==cd.currItem)&&(a/=d?d.fitRatio:cd.currItem.fitRatio),c[cW]=bL+b+"px, "+f+"px"+b6+" scale("+a+")"},av=function(a){aU&&(a&&(bH>cd.currItem.fitRatio?ao||(bh(cd.currItem,!1,!0),ao=!0):ao&&(bh(cd.currItem),ao=!1)),bd(aU,bB.x,bB.y,bH))},aT=function(a){a.container&&bd(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel,a)},ak=function(b,a){a[cW]=bL+b+"px, 0px"+b6},am=function(c,b){if(!bR.loop&&b){var d=cb+(aR.x*db-c)/aR.x,a=Math.round(c-c3.x);(d<0&&a>0||d>=bz()-1&&a<0)&&(c=c3.x+a*bR.mainScrollEndFriction)}c3.x=c,ak(c,ca)},a9=function(b,a){var c=a7[b]-bg[b];return b2[b]+aJ[b]+c-c*(a/bJ)},aI=function(b,a){b.x=a.x,b.y=a.y,a.id&&(b.id=a.id)},aj=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},bu=null,ag=function(){bu&&(bV.unbind(document,"mousemove",ag),bV.addClass(b9,"pswp--has_mouse"),bR.mouseUsed=!0,bj("mouseUsed")),bu=setTimeout(function(){bu=null},100)},c1=function(){bV.bind(document,"keydown",cd),cg.transform&&bV.bind(cd.scrollWrap,"click",cd),bR.mouseUsed||bV.bind(document,"mousemove",ag),bV.bind(window,"resize scroll",cd),bj("bindEvents")},a4=function(){bV.unbind(window,"resize",cd),bV.unbind(window,"scroll",b5.scroll),bV.unbind(document,"keydown",cd),bV.unbind(document,"mousemove",ag),cg.transform&&bV.unbind(cd.scrollWrap,"click",cd),cm&&bV.unbind(window,bY,cd),bj("unbindEvents")},cZ=function(b,a){var c=aS(cd.currItem,bF,b);return a&&(br=c),c},c9=function(a){return a||(a=cd.currItem),a.initialZoomLevel},bm=function(a){return a||(a=cd.currItem),a.w>0?bR.maxSpreadZoom:1},a0=function(c,b,d,a){return a===cd.currItem.initialZoomLevel?(d[c]=cd.currItem.initialPosition[c],!0):(d[c]=a9(c,a),d[c]>b.min[c]?(d[c]=b.min[c],!0):d[c]<b.max[c]&&(d[c]=b.max[c],!0))},bN=function(){if(cW){var a=cg.perspective&&!cA;return bL="translate"+(a?"3d(":"("),void (b6=cg.perspective?", 0px)":")")}cW="left",bV.addClass(b9,"pswp--ie"),ak=function(c,b){b.left=c+"px"},aT=function(d){var c=d.fitRatio>1?1:d.fitRatio,g=d.container.style,b=c*d.w,f=c*d.h;g.width=b+"px",g.height=f+"px",g.left=d.initialPosition.x+"px",g.top=d.initialPosition.y+"px"},av=function(){if(aU){var d=aU,c=cd.currItem,g=c.fitRatio>1?1:c.fitRatio,b=g*c.w,f=g*c.h;d.width=b+"px",d.height=f+"px",d.left=bB.x+"px",d.top=bB.y+"px"}}},dl=function(b){var a="";bR.escKey&&27===b.keyCode?a="close":bR.arrowKeys&&(37===b.keyCode?a="prev":39===b.keyCode&&(a="next")),a&&(b.ctrlKey||b.altKey||b.shiftKey||b.metaKey||(b.preventDefault?b.preventDefault():b.returnValue=!1,cd[a]()))},bx=function(a){a&&(co||cl||cX||ck)&&(a.preventDefault(),a.stopPropagation())},cp=function(){cd.setScrollOffset(0,bV.getScrollY())},bE={},bv=0,cS=function(a){bE[a]&&(bE[a].raf&&cw(bE[a].raf),bv--,delete bE[a])},aw=function(a){bE[a]&&cS(a),bE[a]||(bv++,bE[a]={})},cf=function(){for(var a in bE){bE.hasOwnProperty(a)&&cS(a)}},ay=function(h,m,d,g,c,j,b){var f,p=dd();aw(h);var k=function(){if(bE[h]){if((f=dd()-p)>=g){return cS(h),j(d),void (b&&b())}j((d-m)*c(f/g)+m),bE[h].raf=b0(k)}};k()},bl={shout:bj,listen:aF,viewportSize:bF,options:bR,isMainScrollAnimating:function(){return cX},getZoomLevel:function(){return bH},getCurrentIndex:function(){return cb},isDragging:function(){return cm},isZooming:function(){return b1},setScrollOffset:function(b,a){bg.x=b,cE=bg.y=a,bj("updateScrollOffset",bg)},applyZoomPan:function(c,b,d,a){bB.x=b,bB.y=d,bH=c,av(a)},init:function(){if(!bZ&&!bQ){var c;cd.framework=bV,cd.template=b9,cd.bg=bV.getChildByClass(b9,"pswp__bg"),ci=b9.className,bZ=!0,cg=bV.detectFeatures(),b0=cg.raf,cw=cg.caf,cW=cg.transform,cO=cg.oldIE,cd.scrollWrap=bV.getChildByClass(b9,"pswp__scroll-wrap"),cd.container=bV.getChildByClass(cd.scrollWrap,"pswp__container"),ca=cd.container.style,cd.itemHolders=cK=[{el:cd.container.children[0],wrap:0,index:-1},{el:cd.container.children[1],wrap:0,index:-1},{el:cd.container.children[2],wrap:0,index:-1}],cK[0].el.style.display=cK[2].el.style.display="none",bN(),b5={resize:cd.updateSize,scroll:cp,keydown:dl,click:bx};var b=cg.isOldIOSPhone||cg.isOldAndroid||cg.isMobileOpera;for(cg.animationName&&cg.transform&&!b||(bR.showAnimationDuration=bR.hideAnimationDuration=0),c=0;c<az.length;c++){cd["init"+az[c]]()}bO&&(cd.ui=new bO(cd,bV)).init(),bj("firstUpdate"),cb=cb||bR.index||0,(isNaN(cb)||cb<0||cb>=bz())&&(cb=0),cd.currItem=b8(cb),(cg.isOldIOSPhone||cg.isOldAndroid)&&(ac=!1),b9.setAttribute("aria-hidden","false"),bR.modal&&(ac?b9.style.position="fixed":(b9.style.position="absolute",b9.style.top=bV.getScrollY()+"px")),cE===undefined&&(bj("initialLayout"),cE=cz=bV.getScrollY());var a="pswp--open ";for(bR.mainClass&&(a+=bR.mainClass+" "),bR.showHideOpacity&&(a+="pswp--animate_opacity "),a+=cA?"pswp--touch":"pswp--notouch",a+=cg.animationName?" pswp--css_animation":"",a+=cg.svg?" pswp--svg":"",bV.addClass(b9,a),cd.updateSize(),bU=-1,df=null,c=0;c<3;c++){ak((c+bU)*aR.x,cK[c].el.style)}cO||bV.bind(cd.scrollWrap,b7,cd),aF("initialZoomInEnd",function(){cd.setContent(cK[0],cb-1),cd.setContent(cK[2],cb+1),cK[0].el.style.display=cK[2].el.style.display="block",bR.focus&&b9.focus(),c1()}),cd.setContent(cK[1],cb),cd.updateCurrItem(),bj("afterInit"),ac||(bK=setInterval(function(){bv||cm||b1||bH!==cd.currItem.initialZoomLevel||cd.updateSize()},1000)),bV.addClass(b9,"pswp--visible")}},close:function(){bZ&&(bZ=!1,bQ=!0,bj("close"),a4(),cu(cd.currItem,null,!0,cd.destroy))},destroy:function(){bj("destroy"),aV&&clearTimeout(aV),b9.setAttribute("aria-hidden","true"),b9.className=ci,bK&&clearInterval(bK),bV.unbind(cd.scrollWrap,b7,cd),bV.unbind(window,"scroll",cd),aW(),cf(),aQ=null},panTo:function(b,a,c){c||(b>br.min.x?b=br.min.x:b<br.max.x&&(b=br.max.x),a>br.min.y?a=br.min.y:a<br.max.y&&(a=br.max.y)),bB.x=b,bB.y=a,av()},handleEvent:function(a){a=a||window.event,b5[a.type]&&b5[a.type](a)},goTo:function(b){var a=(b=cV(b))-cb;df=a,cb=b,cd.currItem=b8(cb),db-=a,am(aR.x*db),cf(),cX=!1,cd.updateCurrItem()},next:function(){cd.goTo(cb+1)},prev:function(){cd.goTo(cb-1)},updateCurrZoomItem:function(b){if(b&&bj("beforeChange",0),cK[1].el.children.length){var a=cK[1].el.children[0];aU=bV.hasClass(a,"pswp__zoom-wrap")?a.style:null}else{aU=null}br=cd.currItem.bounds,bJ=bH=cd.currItem.initialZoomLevel,bB.x=br.center.x,bB.y=br.center.y,b&&bj("afterChange")},invalidateCurrItems:function(){cc=!0;for(var a=0;a<3;a++){cK[a].item&&(cK[a].item.needsUpdate=!0)}},updateCurrItem:function(c){if(0!==df){var b,f=Math.abs(df);if(!(c&&f<2)){cd.currItem=b8(cb),ao=!1,bj("beforeChange",df),f>=3&&(bU+=df+(df>0?-3:3),f=3);for(var a=0;a<f;a++){df>0?(b=cK.shift(),cK[2]=b,ak((++bU+2)*aR.x,b.el.style),cd.setContent(b,cb-f+a+1+1)):(b=cK.pop(),cK.unshift(b),ak(--bU*aR.x,b.el.style),cd.setContent(b,cb+f-a-1-1))}if(aU&&1===Math.abs(df)){var d=b8(cT);d.initialZoomLevel!==bH&&(aS(d,bF),bh(d),aT(d))}df=0,cd.updateCurrZoomItem(),cT=cb,bj("afterChange")}}},updateSize:function(d){if(!ac&&bR.modal){var f=bV.getScrollY();if(cE!==f&&(b9.style.top=f+"px",cE=f),!d&&a1.x===window.innerWidth&&a1.y===window.innerHeight){return}a1.x=window.innerWidth,a1.y=window.innerHeight,b9.style.height=a1.y+"px"}if(bF.x=cd.scrollWrap.clientWidth,bF.y=cd.scrollWrap.clientHeight,cp(),aR.x=bF.x+Math.round(bF.x*bR.spacing),aR.y=bF.y,am(aR.x*db),bj("beforeResize"),bU!==undefined){for(var c,a,e,b=0;b<3;b++){c=cK[b],ak((b+bU)*aR.x,c.el.style),e=cb+b-1,bR.loop&&bz()>2&&(e=cV(e)),(a=b8(e))&&(cc||a.needsUpdate||!a.bounds)?(cd.cleanSlide(a),cd.setContent(c,e),1===b&&(cd.currItem=a,cd.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===c.index&&e>=0&&cd.setContent(c,e),a&&a.container&&(aS(a,bF),bh(a),aT(a))}cc=!1}bJ=bH=cd.currItem.initialZoomLevel,(br=cd.currItem.bounds)&&(bB.x=br.center.x,bB.y=br.center.y,av(!0)),bj("resize")},zoomTo:function(h,o,d,g,k){o&&(bJ=bH,a7.x=Math.abs(o.x)-bB.x,a7.y=Math.abs(o.y)-bB.y,aI(b2,bB));var b=cZ(h,!1),f={};a0("x",b,f,h),a0("y",b,f,h);var p=bH,m={x:bB.x,y:bB.y};aj(f);var j=function(a){1===a?(bH=h,bB.x=f.x,bB.y=f.y):(bH=(h-p)*a+p,bB.x=(f.x-m.x)*a+m.x,bB.y=(f.y-m.y)*a+m.y),k&&k(a),av(1===a)};d?ay("customZoomTo",0,1,d,g||bV.easing.sine.inOut,j):j(1)}},aP={},cB={},aB={},bX={},cY={},bc=[],dh={},aZ=[],aE={},bI=0,bw={x:0,y:0},bA=0,c3={x:0,y:0},a7={x:0,y:0},aL={x:0,y:0},c7=function(b,a){return b.x===a.x&&b.y===a.y},dk=function(b,a){return Math.abs(b.x-a.x)<25&&Math.abs(b.y-a.y)<25},au=function(b,a){return aE.x=Math.abs(b.x-a.x),aE.y=Math.abs(b.y-a.y),Math.sqrt(aE.x*aE.x+aE.y*aE.y)},aW=function(){cG&&(cw(cG),cG=null)},ai=function(){cm&&(cG=b0(ai),bp())},cj=function(){return !("fit"===bR.scaleMode&&bH===cd.currItem.initialZoomLevel)},cy=function(b,a){return !(!b||b===document)&&!(b.getAttribute("class")&&b.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(a(b)?b:cy(b.parentNode,a))},aK={},aA=function(b,a){return aK.prevent=!cy(b.target,bR.isClickableElement),bj("preventDragEvent",b,a,aK),aK.prevent},bb=function(b,a){return a.x=b.pageX,a.y=b.pageY,a.id=b.identifier,a},c6=function(b,a,c){c.x=0.5*(b.x+a.x),c.y=0.5*(b.y+a.y)},dj=function(c,b,d){if(c-cC>50){var a=aZ.length>2?aZ.shift():{};a.x=b,a.y=d,aZ.push(a),cC=c}},a6=function(){var a=bB.y-cd.currItem.initialPosition.y;return 1-Math.abs(a/(bF.y/2))},ap={},aO={},af=[],ah=function(a){for(;af.length>0;){af.pop()}return cP?(a5=0,bc.forEach(function(b){0===a5?af[0]=b:1===a5&&(af[1]=b),a5++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(af[0]=bb(a.touches[0],ap),a.touches.length>1&&(af[1]=bb(a.touches[1],aO))):(ap.x=a.pageX,ap.y=a.pageY,ap.id="",af[0]=ap),af},a3=function(h,p){var b,g,a,f,q=bB[h]+p[h],m=p[h]>0,k=c3.x+p.x,j=c3.x-dh.x;if(b=q>br.min[h]||q<br.max[h]?bR.panEndFriction:1,q=bB[h]+p[h]*b,(bR.allowPanToNext||bH===cd.currItem.initialZoomLevel)&&(aU?"h"!==aG||"x"!==h||cl||(m?(q>br.min[h]&&(b=bR.panEndFriction,br.min[h],g=br.min[h]-b2[h]),(g<=0||j<0)&&bz()>1?(f=k,j<0&&k>dh.x&&(f=dh.x)):br.min.x!==br.max.x&&(a=q)):(q<br.max[h]&&(b=bR.panEndFriction,br.max[h],g=b2[h]-br.max[h]),(g<=0||j>0)&&bz()>1?(f=k,j>0&&k<dh.x&&(f=dh.x)):br.min.x!==br.max.x&&(a=q))):f=k,"x"===h)){return f!==undefined&&(am(f,!0),bS=f!==dh.x),br.min.x!==br.max.x&&(a!==undefined?bB.x=a:bS||(bB.x+=p.x*b)),f!==undefined}cX||bS||bH>cd.currItem.fitRatio&&(bB[h]+=p[h]*b)},aD=function(c){if(!("mousedown"===c.type&&c.button>0)){if(bs){c.preventDefault()}else{if(!cU||"mousedown"!==c.type){if(aA(c,!0)&&c.preventDefault(),bj("pointerDown"),cP){var b=bV.arraySearch(bc,c.pointerId,"id");b<0&&(b=bc.length),bc[b]={x:c.pageX,y:c.pageY,id:c.pointerId}}var d=ah(c),a=d.length;c8=null,cf(),cm&&1!==a||(cm=ch=!0,bV.bind(window,bY,cd),cL=dp=c4=ck=bS=co=cM=cl=!1,aG=null,bj("firstTouchStart",d),aI(b2,bB),aJ.x=aJ.y=0,aI(bX,d[0]),aI(cY,bX),dh.x=aR.x*db,aZ=[{x:bX.x,y:bX.y}],cC=bG=dd(),cZ(bH,!0),aW(),ai()),!b1&&a>1&&!cX&&!bS&&(bJ=bH,cl=!1,b1=cM=!0,aJ.y=aJ.x=0,aI(b2,bB),aI(aP,d[0]),aI(cB,d[1]),c6(aP,cB,aL),a7.x=Math.abs(aL.x)-bB.x,a7.y=Math.abs(aL.y)-bB.y,cI=cx=au(aP,cB))}}}},ad=function(f){if(f.preventDefault(),cP){var d=bV.arraySearch(bc,f.pointerId,"id");if(d>-1){var g=bc[d];g.x=f.pageX,g.y=f.pageY}}if(cm){var c=ah(f);if(aG||co||b1){c8=c}else{if(c3.x!==aR.x*db){aG="h"}else{var b=Math.abs(c[0].x-bX.x)-Math.abs(c[0].y-bX.y);Math.abs(b)>=10&&(aG=b>0?"h":"v",c8=c)}}}},bp=function(){if(c8){var g=c8.length;if(0!==g){if(aI(aP,c8[0]),aB.x=aP.x-bX.x,aB.y=aP.y-bX.y,b1&&g>1){if(bX.x=aP.x,bX.y=aP.y,!aB.x&&!aB.y&&c7(c8[1],cB)){return}aI(cB,c8[1]),cl||(cl=!0,bj("zoomGestureStarted"));var d=au(aP,cB),j=c2(d);j>cd.currItem.initialZoomLevel+cd.currItem.initialZoomLevel/15&&(dp=!0);var c=1,h=c9(),a=bm();if(j<h){if(bR.pinchToClose&&!dp&&bJ<=cd.currItem.initialZoomLevel){var f=1-(h-j)/(h/1.2);ab(f),bj("onPinchClose",f),c4=!0}else{(c=(h-j)/h)>1&&(c=1),j=h-c*(h/3)}}else{j>a&&((c=(j-a)/(6*h))>1&&(c=1),j=a+c*h)}c<0&&(c=0),cI=d,c6(aP,cB,bw),aJ.x+=bw.x-aL.x,aJ.y+=bw.y-aL.y,aI(aL,bw),bB.x=a9("x",j),bB.y=a9("y",j),cL=j>bH,bH=j,av()}else{if(!aG){return}if(ch&&(ch=!1,Math.abs(aB.x)>=10&&(aB.x-=c8[0].x-cY.x),Math.abs(aB.y)>=10&&(aB.y-=c8[0].y-cY.y)),bX.x=aP.x,bX.y=aP.y,0===aB.x&&0===aB.y){return}if("v"===aG&&bR.closeOnVerticalDrag&&!cj()){aJ.y+=aB.y,bB.y+=aB.y;var b=a6();return ck=!0,bj("onVerticalDrag",b),ab(b),void av()}dj(dd(),aP.x,aP.y),co=!0,br=cd.currItem.bounds,a3("x",aB)||(a3("y",aB),aj(bB),av())}}}},aa=function(h){if(cg.isOldAndroid){if(cU&&"mouseup"===h.type){return}h.type.indexOf("touch")>-1&&(clearTimeout(cU),cU=setTimeout(function(){cU=0},600))}bj("pointerUp"),aA(h,!1)&&h.preventDefault();var o;if(cP){var b=bV.arraySearch(bc,h.pointerId,"id");if(b>-1){if(o=bc.splice(b,1)[0],navigator.pointerEnabled){o.type=h.pointerType||"mouse"}else{var g={4:"mouse",2:"touch",3:"pen"};o.type=g[h.pointerType],o.type||(o.type=h.pointerType||"mouse")}}}var f,q=ah(h),m=q.length;if("mouseup"===h.type&&(m=0),2===m){return c8=null,!0}1===m&&aI(cY,q[0]),0!==m||aG||cX||(o||("mouseup"===h.type?o={x:h.pageX,y:h.pageY,type:"mouse"}:h.changedTouches&&h.changedTouches[0]&&(o={x:h.changedTouches[0].pageX,y:h.changedTouches[0].pageY,type:"touch"})),bj("touchRelease",h,o));var k=-1;if(0===m&&(cm=!1,bV.unbind(window,bY,cd),aW(),b1?k=0:-1!==bA&&(k=dd()-bA)),bA=1===m?dd():-1,f=-1!==k&&k<150?"zoom":"swipe",b1&&m<2&&(b1=!1,1===m&&(f="zoomPointerUp"),bj("zoomGestureEnded")),c8=null,co||cl||cX||ck){if(cf(),cq||(cq=cQ()),cq.calculateSwipeSpeed("x"),ck){if(a6()<bR.verticalDragRange){cd.close()}else{var j=bB.y,a=bk;ay("verticalDrag",0,1,300,bV.easing.cubic.out,function(c){bB.y=(cd.currItem.initialPosition.y-j)*c+j,ab((1-a)*c+a),av()}),bj("onVerticalDrag",1)}}else{if((bS||cX)&&0===m){if(cN(f,cq)){return}f="zoomPointerUp"}cX||("swipe"===f?!bS&&bH>cd.currItem.fitRatio&&aY(cq):bi())}}},cQ=function(){var b,a,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){aZ.length>1?(b=dd()-cC+50,a=aZ[aZ.length-2][d]):(b=dd()-bG,a=cY[d]),c.lastFlickOffset[d]=bX[d]-a,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickDist[d]>20?c.lastFlickSpeed[d]=c.lastFlickOffset[d]/b:c.lastFlickSpeed[d]=0,Math.abs(c.lastFlickSpeed[d])<0.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=0.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(f,d){c.backAnimStarted[f]||(bB[f]>br.min[f]?c.backAnimDestination[f]=br.min[f]:bB[f]<br.max[f]&&(c.backAnimDestination[f]=br.max[f]),c.backAnimDestination[f]!==undefined&&(c.slowDownRatio[f]=0.7,c.slowDownRatioReverse[f]=1-c.slowDownRatio[f],c.speedDecelerationRatioAbs[f]<0.05&&(c.lastFlickSpeed[f]=0,c.backAnimStarted[f]=!0,ay("bounceZoomPan"+f,bB[f],c.backAnimDestination[f],d||300,bV.easing.sine.out,function(e){bB[f]=e,av()}))))},calculateAnimOffset:function(d){c.backAnimStarted[d]||(c.speedDecelerationRatio[d]=c.speedDecelerationRatio[d]*(c.slowDownRatio[d]+c.slowDownRatioReverse[d]-c.slowDownRatioReverse[d]*c.timeDiff/10),c.speedDecelerationRatioAbs[d]=Math.abs(c.lastFlickSpeed[d]*c.speedDecelerationRatio[d]),c.distanceOffset[d]=c.lastFlickSpeed[d]*c.speedDecelerationRatio[d]*c.timeDiff,bB[d]+=c.distanceOffset[d])},panAnimLoop:function(){if(bE.zoomPan&&(bE.zoomPan.raf=b0(c.panAnimLoop),c.now=dd(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),av(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<0.05&&c.speedDecelerationRatioAbs.y<0.05)){return bB.x=Math.round(bB.x),bB.y=Math.round(bB.y),av(),void cS("zoomPan")}}};return c},aY=function(a){if(a.calculateSwipeSpeed("y"),br=cd.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=0.05&&Math.abs(a.lastFlickSpeed.y)<=0.05){return a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0}aw("zoomPan"),a.lastNow=dd(),a.panAnimLoop()},cN=function(h,o){var b;cX||(bI=cb);var g;if("swipe"===h){var f=bX.x-cY.x,q=o.lastFlickDist.x<10;f>30&&(q||o.lastFlickOffset.x>20)?g=-1:f<-30&&(q||o.lastFlickOffset.x<-20)&&(g=1)}var k;g&&((cb+=g)<0?(cb=bR.loop?bz()-1:0,k=!0):cb>=bz()&&(cb=bR.loop?0:bz()-1,k=!0),k&&!bR.loop||(df+=g,db-=g,b=!0));var j,a=aR.x*db,c=Math.abs(a-c3.x);return b||a>c3.x==o.lastFlickSpeed.x>0?(j=Math.abs(o.lastFlickSpeed.x)>0?c/Math.abs(o.lastFlickSpeed.x):333,j=Math.min(j,400),j=Math.max(j,250)):j=333,bI===cb&&(b=!1),cX=!0,bj("mainScrollAnimStart"),ay("mainScroll",c3.x,a,j,bV.easing.cubic.out,am,function(){cf(),cX=!1,bI=-1,(b||bI!==cb)&&cd.updateCurrItem(),bj("mainScrollAnimComplete")}),b&&cd.updateCurrItem(!0),b},c2=function(a){return 1/cx*a*bJ},bi=function(){var d=bH,b=c9(),f=bm();bH<b?d=b:bH>f&&(d=f);var a,c=bk;return c4&&!cL&&!dp&&bH<b?(cd.close(),!0):(c4&&(a=function(g){ab((1-c)*g+c)}),cd.zoomTo(d,0,200,bV.easing.cubic.out,a),!0)};cH("Gestures",{publicMethods:{initGestures:function(){var a=function(d,c,g,b,f){cR=d+c,cD=d+g,cs=d+b,cv=f?d+f:""};(cP=cg.pointerEvent)&&cg.touch&&(cg.touch=!1),cP?navigator.pointerEnabled?a("pointer","down","move","up","cancel"):a("MSPointer","Down","Move","Up","Cancel"):cg.touch?(a("touch","start","move","end","cancel"),cA=!0):a("mouse","down","move","up"),bY=cD+" "+cs+" "+cv,b7=cR,cP&&!cA&&(cA=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),cd.likelyTouchDevice=cA,b5[cR]=aD,b5[cD]=ad,b5[cs]=aa,cv&&(b5[cv]=b5[cs]),cg.touch&&(b7+=" mousedown",bY+=" mousemove mouseup",b5.mousedown=b5[cR],b5.mousemove=b5[cD],b5.mouseup=b5[cs]),cA||(bR.allowPanToNext=!1)}}});var aV,bD,dg,bs,b8,bz,bq,cu=function(c,h,b,a){aV&&clearTimeout(aV),bs=!0,dg=!0;var e;c.initialLayout?(e=c.initialLayout,c.initialLayout=null):e=bR.getThumbBoundsFn&&bR.getThumbBoundsFn(cb);var g=b?bR.hideAnimationDuration:bR.showAnimationDuration,f=function(){cS("initialZoom"),b?(cd.template.removeAttribute("style"),cd.bg.removeAttribute("style")):(ab(1),h&&(h.style.display="block"),bV.addClass(b9,"pswp--animated-in"),bj("initialZoom"+(b?"OutEnd":"InEnd"))),a&&a(),bs=!1};if(!g||!e||e.x===undefined){return bj("initialZoom"+(b?"Out":"In")),bH=c.initialZoomLevel,aI(bB,c.initialPosition),av(),b9.style.opacity=b?0:1,ab(1),void (g?setTimeout(function(){f()},g):f())}!function(){var i=bM,d=!cd.currItem.src||cd.currItem.loadError||bR.showHideOpacity;c.miniImg&&(c.miniImg.style.webkitBackfaceVisibility="hidden"),b||(bH=e.w/c.w,bB.x=e.x,bB.y=e.y-cz,cd[d?"template":"bg"].style.opacity=0.001,av()),aw("initialZoom"),b&&!i&&bV.removeClass(b9,"pswp--animated-in"),d&&(b?bV[(i?"remove":"add")+"Class"](b9,"pswp--animate_opacity"):setTimeout(function(){bV.addClass(b9,"pswp--animate_opacity")},30)),aV=setTimeout(function(){if(bj("initialZoom"+(b?"Out":"In")),b){var k=e.w/c.w,n={x:bB.x,y:bB.y},l=bH,o=bk,j=function(m){1===m?(bH=k,bB.x=e.x,bB.y=e.y-cE):(bH=(k-l)*m+l,bB.x=(e.x-n.x)*m+n.x,bB.y=(e.y-cE-n.y)*m+n.y),av(),d?b9.style.opacity=1-m:ab(o-m*o)};i?ay("initialZoom",0,1,g,bV.easing.cubic.out,j,f):(j(1),aV=setTimeout(f,g+20))}else{bH=c.initialZoomLevel,aI(bB,c.initialPosition),av(),ab(1),d?b9.style.opacity=1:ab(1),aV=setTimeout(f,g+20)}},b?25:90)}()},aq={},bT=[],ar={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return bD.length}},bo=function(c,b,d){var a=c.bounds;a.center.x=Math.round((aq.x-b)/2),a.center.y=Math.round((aq.y-d)/2)+c.vGap.top,a.max.x=b>aq.x?Math.round(aq.x-b):a.center.x,a.max.y=d>aq.y?Math.round(aq.y-d)+c.vGap.top:a.center.y,a.min.x=b>aq.x?0:a.center.x,a.min.y=d>aq.y?c.vGap.top:a.center.y},aS=function(g,f,j){if(g.src&&!g.loadError){var d=!j;if(d&&(g.vGap||(g.vGap={top:0,bottom:0}),bj("parseVerticalMargin",g)),aq.x=f.x,aq.y=f.y-g.vGap.top-g.vGap.bottom,d){var h=aq.x/g.w,c=aq.y/g.h;g.fitRatio=h<c?h:c;var b=bR.scaleMode;"orig"===b?j=1:"fit"===b&&(j=g.fitRatio),j>1&&(j=1),g.initialZoomLevel=j,g.bounds||(g.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}})}if(!j){return}return bo(g,g.w*j,g.h*j),d&&j===g.initialZoomLevel&&(g.initialPosition=g.bounds.center),g.bounds}return g.w=g.h=0,g.initialZoomLevel=g.fitRatio=1,g.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}},g.initialPosition=g.bounds.center,g.bounds},cJ=function(d,b,g,a,f,c){b.loadError||a&&(b.imageAppended=!0,bh(b,a,b===cd.currItem&&ao),g.appendChild(a),c&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500))},b4=function(b){b.loading=!0,b.loaded=!1;var a=b.img=bV.createEl("pswp__img","img"),c=function(){b.loading=!1,b.loaded=!0,b.loadComplete?b.loadComplete(b):b.img=null,a.onload=a.onerror=null,a=null};return a.onload=c,a.onerror=function(){b.loadError=!0,c()},a.src=b.src,a},c0=function(b,a){if(b.src&&b.loadError&&b.container){return a&&(b.container.innerHTML=""),b.container.innerHTML=bR.errorMsg.replace("%url%",b.src),!0}},bh=function(c,b,f){if(c.src){b||(b=c.container.lastChild);var a=f?c.w:Math.round(c.w*c.fitRatio),d=f?c.h:Math.round(c.h*c.fitRatio);c.placeholder&&!c.loaded&&(c.placeholder.style.width=a+"px",c.placeholder.style.height=d+"px"),b.style.width=a+"px",b.style.height=d+"px"}},di=function(){if(bT.length){for(var b,a=0;a<bT.length;a++){(b=bT[a]).holder.index===b.index&&cJ(b.index,b.item,b.baseDiv,b.img,0,b.clearPlaceholder)}bT=[]}};cH("Controller",{publicMethods:{lazyLoadItem:function(b){b=cV(b);var a=b8(b);a&&(!a.loaded&&!a.loading||cc)&&(bj("gettingData",b,a),a.src&&b4(a))},initController:function(){bV.extend(bR,ar,!0),cd.items=bD=bW,b8=cd.getItemAt,bz=bR.getNumItemsFn,bq=bR.loop,bz()<3&&(bR.loop=!1),aF("beforeChange",function(d){var c,g=bR.preload,b=null===d||d>=0,f=Math.min(g[0],bz()),a=Math.min(g[1],bz());for(c=1;c<=(b?a:f);c++){cd.lazyLoadItem(cb+c)}for(c=1;c<=(b?f:a);c++){cd.lazyLoadItem(cb-c)}}),aF("initialLayout",function(){cd.currItem.initialLayout=bR.getThumbBoundsFn&&bR.getThumbBoundsFn(cb)}),aF("mainScrollAnimComplete",di),aF("initialZoomInEnd",di),aF("destroy",function(){for(var b,a=0;a<bD.length;a++){(b=bD[a]).container&&(b.container=null),b.placeholder&&(b.placeholder=null),b.img&&(b.img=null),b.preloader&&(b.preloader=null),b.loadError&&(b.loaded=b.loadError=!1)}bT=null})},getItemAt:function(a){return a>=0&&bD[a]!==undefined&&bD[a]},allowProgressiveImg:function(){return bR.forceProgressiveLoading||!cA||bR.mouseUsed||screen.width>1200},setContent:function(h,c){bR.loop&&(c=cV(c));var k=cd.getItemAt(h.index);k&&(k.container=null);var b,f=cd.getItemAt(c);if(f){bj("gettingData",c,f),h.index=c,h.item=f;var a=f.container=bV.createEl("pswp__zoom-wrap");if(!f.src&&f.html&&(f.html.tagName?a.appendChild(f.html):a.innerHTML=f.html),c0(f),aS(f,bF),!f.src||f.loadError||f.loaded){f.src&&!f.loadError&&((b=bV.createEl("pswp__img","img")).style.opacity=1,b.src=f.src,bh(f,b),cJ(0,f,a,b))}else{if(f.loadComplete=function(d){if(bZ){if(h&&h.index===c){if(c0(d,!0)){return d.loadComplete=d.img=null,aS(d,bF),aT(d),void (h.index===cb&&cd.updateCurrZoomItem())}d.imageAppended?!bs&&d.placeholder&&(d.placeholder.style.display="none",d.placeholder=null):cg.transform&&(cX||bs)?bT.push({item:d,baseDiv:a,img:d.img,index:c,holder:h,clearPlaceholder:!0}):cJ(0,d,a,d.img,0,!0)}d.loadComplete=null,d.img=null,bj("imageLoadComplete",c,d)}},bV.features.transform){var j="pswp__img pswp__img--placeholder";j+=f.msrc?"":" pswp__img--placeholder--blank";var g=bV.createEl(j,f.msrc?"img":"");f.msrc&&(g.src=f.msrc),bh(f,g),a.appendChild(g),f.placeholder=g}f.loading||b4(f),cd.allowProgressiveImg()&&(!dg&&cg.transform?bT.push({item:f,baseDiv:a,img:f.img,index:c,holder:h}):cJ(0,f,a,f.img,0,!0))}dg||c!==cb?aT(f):(aU=a.style,cu(f,b||f.img)),h.el.innerHTML="",h.el.appendChild(a)}else{h.el.innerHTML=""}},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var a2,aH={},bP=function(c,b,f){var a=document.createEvent("CustomEvent"),d={origEvent:c,target:c.target,releasePoint:b,pointerType:f||"touch"};a.initCustomEvent("pswpTap",!0,!0,d),c.target.dispatchEvent(a)};cH("Tap",{publicMethods:{initTap:function(){aF("firstTouchStart",cd.onTapStart),aF("touchRelease",cd.onTapRelease),aF("destroy",function(){aH={},a2=null})},onTapStart:function(a){a.length>1&&(clearTimeout(a2),a2=null)},onTapRelease:function(b,a){if(a&&!co&&!cM&&!bv){var c=a;if(a2&&(clearTimeout(a2),a2=null,dk(c,aH))){return void bj("doubleTap",c)}if("mouse"===a.type){return void bP(b,a,"mouse")}if("BUTTON"===b.target.tagName.toUpperCase()||bV.hasClass(b.target,"pswp__single-tap")){return void bP(b,a)}aI(aH,c),a2=setTimeout(function(){bP(b,a),a2=null},300)}}}});var by;cH("DesktopZoom",{publicMethods:{initDesktopZoom:function(){cO||(cA?aF("mouseUsed",function(){cd.setupDesktopZoom()}):cd.setupDesktopZoom(!0))},setupDesktopZoom:function(c){by={};var e="wheel mousewheel DOMMouseScroll";aF("bindEvents",function(){bV.bind(b9,e,cd.handleMouseWheel)}),aF("unbindEvents",function(){by&&bV.unbind(b9,e,cd.handleMouseWheel)}),cd.mouseZoomedIn=!1;var b,d=function(){cd.mouseZoomedIn&&(bV.removeClass(b9,"pswp--zoomed-in"),cd.mouseZoomedIn=!1),bH<1?bV.addClass(b9,"pswp--zoom-allowed"):bV.removeClass(b9,"pswp--zoom-allowed"),a()},a=function(){b&&(bV.removeClass(b9,"pswp--dragging"),b=!1)};aF("resize",d),aF("afterChange",d),aF("pointerDown",function(){cd.mouseZoomedIn&&(b=!0,bV.addClass(b9,"pswp--dragging"))}),aF("pointerUp",a),c||d()},handleMouseWheel:function(b){if(bH<=cd.currItem.fitRatio){return bR.modal&&(!bR.closeOnScroll||bv||cm?b.preventDefault():cW&&Math.abs(b.deltaY)>2&&(bM=!0,cd.close())),!0}if(b.stopPropagation(),by.x=0,"deltaX" in b){1===b.deltaMode?(by.x=18*b.deltaX,by.y=18*b.deltaY):(by.x=b.deltaX,by.y=b.deltaY)}else{if("wheelDelta" in b){b.wheelDeltaX&&(by.x=-0.16*b.wheelDeltaX),b.wheelDeltaY?by.y=-0.16*b.wheelDeltaY:by.y=-0.16*b.wheelDelta}else{if(!("detail" in b)){return}by.y=b.detail}}cZ(bH,!0);var a=bB.x-by.x,c=bB.y-by.y;(bR.modal||a<=br.min.x&&a>=br.max.x&&c<=br.min.y&&c>=br.max.y)&&b.preventDefault(),cd.panTo(a,c)},toggleDesktopZoom:function(b){b=b||{x:bF.x/2+bg.x,y:bF.y/2+bg.y};var c=bR.getDoubleTapZoom(!0,cd.currItem),a=bH===c;cd.mouseZoomedIn=!a,cd.zoomTo(a?cd.currItem.initialZoomLevel:c,b,333),bV[(a?"remove":"add")+"Class"](b9,"pswp--zoomed-in")}}});var bC,c5,ba,aN,dc,dq,ax,aX,al,cr,cF,aM,aC={history:!0,galleryUID:1},bf=function(){return cF.hash.substring(1)},da=function(){bC&&clearTimeout(bC),ba&&clearTimeout(ba)},dm=function(){var f=bf(),d={};if(f.length<5){return d}var h,c=f.split("&");for(h=0;h<c.length;h++){if(c[h]){var g=c[h].split("=");g.length<2||(d[g[0]]=g[1])}}if(bR.galleryPIDs){var b=d.pid;for(d.pid=0,h=0;h<bD.length;h++){if(bD[h].pid===b){d.pid=h;break}}}else{d.pid=parseInt(d.pid,10)-1}return d.pid<0&&(d.pid=0),d},a8=function(){if(ba&&clearTimeout(ba),bv||cm){ba=setTimeout(a8,500)}else{aN?clearTimeout(c5):aN=!0;var c=cb+1,b=b8(cb);b.hasOwnProperty("pid")&&(c=b.pid);var d=ax+"&gid="+bR.galleryUID+"&pid="+c;aX||-1===cF.hash.indexOf(d)&&(cr=!0);var a=cF.href.split("#")[0]+"#"+d;aM?"#"+d!==window.location.hash&&history[aX?"replaceState":"pushState"]("",document.title,a):aX?cF.replace(a):cF.hash=d,aX=!0,c5=setTimeout(function(){aN=!1},60)}};cH("History",{publicMethods:{initHistory:function(){if(bV.extend(bR,aC,!0),bR.history){cF=window.location,cr=!1,al=!1,aX=!1,ax=bf(),aM="pushState" in history,ax.indexOf("gid=")>-1&&(ax=ax.split("&gid=")[0],ax=ax.split("?gid=")[0]),aF("afterChange",cd.updateURL),aF("unbindEvents",function(){bV.unbind(window,"hashchange",cd.onHashChange)});var b=function(){dq=!0,al||(cr?history.back():ax?cF.hash=ax:aM?history.pushState("",document.title,cF.pathname+cF.search):cF.hash=""),da()};aF("unbindEvents",function(){bM&&b()}),aF("destroy",function(){dq||b()}),aF("firstUpdate",function(){cb=dm().pid});var a=ax.indexOf("pid=");a>-1&&"&"===(ax=ax.substring(0,a)).slice(-1)&&(ax=ax.slice(0,-1)),setTimeout(function(){bZ&&bV.bind(window,"hashchange",cd.onHashChange)},40)}},onHashChange:function(){if(bf()===ax){return al=!0,void cd.close()}aN||(dc=!0,cd.goTo(dm().pid),dc=!1)},updateURL:function(){da(),dc||(aX?bC=setTimeout(a8,800):a8())}}}),bV.extend(cd,bl)}});