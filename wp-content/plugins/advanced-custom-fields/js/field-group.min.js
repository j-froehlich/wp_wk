var acf={ajaxurl:"",admin_url:"",post_id:0,nonce:"",l10n:{},text:{},helpers:{uniqid:null,sortable:null,create_field:null},conditional_logic:null,location:null};(function(c){c.fn.exists=function(){return c(this).length>0};acf.helpers.sortable=function(f,d){d.children().each(function(){c(this).width(c(this).width())});return d};acf.helpers.uniqid=function(g,f){if(typeof g=="undefined"){g=""}var e;var d=function(h,i){h=parseInt(h,10).toString(16);if(i<h.length){return h.slice(h.length-i)}if(i>h.length){return Array(1+(i-h.length)).join("0")+h}return h};if(!this.php_js){this.php_js={}}if(!this.php_js.uniqidSeed){this.php_js.uniqidSeed=Math.floor(Math.random()*123456789)}this.php_js.uniqidSeed++;e=g;e+=d(parseInt(new Date().getTime()/1000,10),8);e+=d(this.php_js.uniqidSeed,5);if(f){e+=(Math.random()*10).toFixed(8).toString()}return e};var b={init:function(){c(document).on("submit","#post",this.submit);return this},submit:function(g){var f=c("#titlewrap #title"),d=c("#submitdiv .spinner").last(),h=c('#submitdiv input[type="submit"]').last();if(!f.val()){g.preventDefault();b.hide_spinner(d);b.enable_submit(h);alert(acf.l10n.title);f.focus()}},hide_spinner:function(d){if(!d.exists()){return}var e=acf.wp_version;if(parseFloat(e)>=4.2){d.removeClass("is-active")}else{d.css("display","none")}},enable_submit:function(d){if(!d.exists()){return}d.removeClass("disabled button-disabled button-primary-disabled")}}.init();c(document).on("click","#submit-delete",function(){var d=confirm(acf.l10n.move_to_trash);if(!d){return false}});c(document).on("change","#acf_fields tr.field_type select",function(){var d=c(this),f=d.closest("tbody"),j=f.closest(".field"),i=j.attr("data-type"),g=j.attr("data-id"),k=d.val();j.removeClass("field_type-"+i).addClass("field_type-"+k);j.attr("data-type",k);if(k=="tab"||k=="message"){f.find('tr.field_name input[type="text"]').val("").trigger("keyup")}if(f.children("tr.field_option_"+k).exists()){f.children("tr.field_option").hide().find("[name]").attr("disabled","true");f.children("tr.field_option_"+k).show().find("[name]").removeAttr("disabled")}else{var h=c('<tr"><td class="label"></td><td><div class="acf-loading"></div></td></tr>');f.children("tr.field_option").hide().find("[name]").attr("disabled","true");if(f.children("tr.conditional-logic").exists()){f.children("tr.conditional-logic").before(h)}else{f.children("tr.field_save").before(h)}var e={action:"acf/field_group/render_options",post_id:acf.post_id,field_key:d.attr("name"),field_type:k,nonce:acf.nonce};c.ajax({url:ajaxurl,data:e,type:"post",dataType:"html",success:function(l){if(!l){h.remove();return}h.replaceWith(l)}})}});c.fn.update_names=function(){var f=c(this),d=f.attr("data-id"),e="field_"+acf.helpers.uniqid();f.attr("data-id",e);f.attr("class",f.attr("class").replace(d,e));f.find(".field_meta td.field_key").text(e);f.find('[id*="'+d+'"]').each(function(){c(this).attr("id",c(this).attr("id").replace(d,e))});f.find('[name*="'+d+'"]').each(function(){c(this).attr("name",c(this).attr("name").replace(d,e))})};function a(){c("#acf_fields .fields").each(function(){c(this).children(".field").each(function(d){c(this).find("td.field_order .circle").first().html(d+1)})})}c(document).on("click","#acf_fields a.acf_edit_field",function(){var d=c(this).closest(".field");if(d.hasClass("form_open")){d.removeClass("form_open");c(document).trigger("acf/field_form-close",[d])}else{d.addClass("form_open");c(document).trigger("acf/field_form-open",[d])}d.children(".field_form_mask").animate({height:"toggle"},250)});c(document).on("click","#acf_fields a.acf_delete_field",function(){var e=c(this),g=e.closest(".field"),d=g.closest(".fields"),f=c('<div style="height:'+g.height()+'px"></div>');g.animate({left:"50px",opacity:0},250,function(){g.before(f);g.remove();if(d.children(".field").length<=1){f.remove();d.children(".no_fields_message").show()}else{f.animate({height:0},250,function(){f.remove()})}a()})});c(document).on("click","#acf_fields a.acf_duplicate_field",function(){var d=c(this),h=d.closest(".field"),g=null;h.find("select").each(function(){c(this).attr("data-val",c(this).val())});g=h.clone();g.update_names();g.find(".field:not(.field_key-field_clone)").each(function(){c(this).update_names()});h.after(g);g.find("select").each(function(){c(this).val(c(this).attr("data-val")).trigger("change")});if(h.hasClass("form_open")){h.find(".acf_edit_field").first().trigger("click")}else{g.find(".acf_edit_field").first().trigger("click")}var f=g.find('tr.field_label:first input[type="text"]'),e=g.find('tr.field_name:first input[type="text"]');e.val("");f.val(f.val()+" ("+acf.l10n.copy+")");f.trigger("blur").trigger("keyup");a()});c(document).on("click","#acf_fields #add_field",function(){var d=c(this).closest(".table_footer").siblings(".fields");var e=d.children(".field_key-field_clone").clone();e.update_names();e.show();d.children(".field_key-field_clone").before(e);if(d.children(".no_fields_message").exists()){d.children(".no_fields_message").hide()}e.find("tr.field_type select").trigger("change");e.find('.field_form input[type="text"]').val("");setTimeout(function(){e.find('.field_form input[type="text"]').first().focus()},500);e.find("a.acf_edit_field").first().trigger("click");a();return false});c(document).on("blur","#acf_fields tr.field_label input.label",function(){var d=c(this),g=d.closest(".field"),i=g.find('tr.field_name:first input[type="text"]'),f=g.attr("data-type");if(f=="tab"||f=="message"){i.val("").trigger("keyup");return}if(i.val()==""){var h=d.val(),e={"ä":"a","æ":"a","å":"a","ö":"o","ø":"o","é":"e","ë":"e","ü":"u","ó":"o","ő":"o","ú":"u","é":"e","á":"a","ű":"u","í":"i"," ":"_","'":"","\\?":""};c.each(e,function(l,j){var m=new RegExp(l,"g");h=h.replace(m,j)});h=h.toLowerCase();i.val(h);i.trigger("keyup")}});c(document).on("keyup","#acf_fields .field_form tr.field_label input.label",function(){var e=c(this).val();var d=c(this).closest(".field").find("td.field_label strong a").first().html(e)});c(document).on("keyup","#acf_fields .field_form tr.field_name input.name",function(){var e=c(this).val();var d=c(this).closest(".field").find("td.field_name").first().html(e)});c(document).on("change","#acf_fields .field_form tr.field_type select",function(){var e=c(this).val();var d=c(this).find('option[value="'+e+'"]').html();c(this).closest(".field").find("td.field_type").first().html(d)});c(document).on("mouseover","#acf_fields td.field_order",function(){var d=c(this).closest(".fields");if(d.hasClass("sortable")){return false}d.addClass("sortable").sortable({update:function(e,f){a()},handle:"td.field_order"})});c(document).ready(function(){acf.location.init();acf.conditional_logic.init()});acf.location={$el:null,init:function(){var d=this;d.$el=c("#acf_location");d.$el.on("click",".location-add-rule",function(){d.add_rule(c(this).closest("tr"));return false});d.$el.on("click",".location-remove-rule",function(){d.remove_rule(c(this).closest("tr"));return false});d.$el.on("click",".location-add-group",function(){d.add_group();return false});d.$el.on("change",".param select",function(){var i=c(this).closest("tr"),h=i.attr("data-id"),f=i.closest(".location-group"),g=f.attr("data-id"),e={action:"acf/field_group/render_location",nonce:acf.nonce,rule_id:h,group_id:g,value:"",param:c(this).val()};var j=c('<div class="acf-loading"></div>');i.find("td.value").html(j);c.ajax({url:acf.ajaxurl,data:e,type:"post",dataType:"html",success:function(k){j.replaceWith(k)}})})},add_rule:function(g){var e=g.clone(),d=e.attr("data-id"),f=acf.helpers.uniqid();e.find("[name]").each(function(){c(this).attr("name",c(this).attr("name").replace(d,f));c(this).attr("id",c(this).attr("id").replace(d,f))});e.attr("data-id",f);g.after(e);return false},remove_rule:function(d){var e=d.siblings("tr").length;if(e==0){this.remove_group(d.closest(".location-group"))}else{d.remove()}},add_group:function(){var g=this.$el.find(".location-group:last"),f=g.clone(),d=f.attr("data-id"),e=acf.helpers.uniqid();f.find("[name]").each(function(){c(this).attr("name",c(this).attr("name").replace(d,e));c(this).attr("id",c(this).attr("id").replace(d,e))});f.attr("data-id",e);f.find("h4").text(acf.l10n.or);f.find("tr:not(:first)").remove();g.after(f)},remove_group:function(d){d.remove()}};c(document).ready(function(){c("#submitdiv #publish").attr("class","acf-button large");c("#submitdiv a.submitdelete").attr("class","delete-field-group").attr("id","submit-delete");var d=c("#hide-on-screen ul.acf-checkbox-list"),e=c('<li><label><input type="checkbox" value="" name="" >'+acf.l10n.hide_show_all+"</label></li>");if(d.find("input:not(:checked)").length==0){e.find("input").attr("checked","checked")}e.on("change","input",function(){var f=c(this).is(":checked");d.find("input").attr("checked",f)});d.prepend(e)});c(document).on("change",'#adv-settings input[name="show-field_key"]',function(){if(c(this).val()=="1"){c("#acf_fields table.acf").addClass("show-field_key")}else{c("#acf_fields table.acf").removeClass("show-field_key")}});acf.helpers.create_field=function(e){var g={type:"text",classname:"",name:"",value:""};e=c.extend(true,g,e);var f="";if(e.type=="text"){f+='<input class="text '+e.classname+'" type="text" id="'+e.name+'" name="'+e.name+'" value="'+e.value+'" />'}else{if(e.type=="select"){var d={};c.each(e.choices,function(i,h){if(h.group===undefined){h.group=0}if(d[h.group]===undefined){d[h.group]=[]}d[h.group].push(h)});f+='<select class="select '+e.classname+'" id="'+e.name+'" name="'+e.name+'">';c.each(d,function(i,h){if(i!=0){f+='<optgroup label="'+i+'">'}c.each(h,function(l,k){var j="";if(k.value==e.value){j='selected="selected"'}f+="<option "+j+' value="'+k.value+'">'+k.label+"</option>"});if(i!=0){f+="</optgroup>"}});f+="</select>"}}f=c(f);return f};acf.conditional_logic={triggers:null,init:function(){var d=this;c(document).on("acf/field_form-open",function(g,f){d.render(f)});c(document).on("change","#acf_fields tr.field_label input.label",function(){c("#acf_fields .field.form_open").each(function(){d.render(c(this))})});c(document).on("change",'tr.conditional-logic input[type="radio"]',function(f){f.preventDefault();d.change_toggle(c(this))});c(document).on("change","select.conditional-logic-field",function(f){f.preventDefault();d.change_trigger(c(this))});c(document).on("click","tr.conditional-logic .acf-button-add",function(f){f.preventDefault();d.add(c(this).closest("tr"))});c(document).on("click","tr.conditional-logic .acf-button-remove",function(f){f.preventDefault();d.remove(c(this).closest("tr"))})},render:function(f){var i=this;var h=[],e=f.attr("data-id"),d=f.parents(".fields"),g=f.find("> .field_form_mask > .field_form > table > tbody > tr.conditional-logic");c.each(d,function(j){var k=(j==0)?acf.l10n.sibling_fields:acf.l10n.parent_fields;c(this).children(".field").each(function(){var m=c(this),o=m.attr("data-id"),l=m.attr("data-type"),n=m.find("tr.field_label input").val();if(o=="field_clone"){return}if(o==e){return}if(l=="select"||l=="checkbox"||l=="true_false"||l=="radio"){h.push({value:o,label:n,group:k})}})});if(h.length==0){h.push({value:"null",label:acf.l10n.no_fields})}g.find(".conditional-logic-field").each(function(){var l=c(this).val(),k=c(this).attr("name");var j=acf.helpers.create_field({type:"select",classname:"conditional-logic-field",name:k,value:l,choices:h});c(this).replaceWith(j);j.trigger("change")})},change_toggle:function(f){var e=f.val(),d=f.closest("tr.conditional-logic");if(e=="1"){d.find(".contional-logic-rules-wrapper").show()}else{d.find(".contional-logic-rules-wrapper").hide()}},change_trigger:function(f){var d=f.val(),k=c(".field_key-"+d),j=k.attr("data-type"),m=f.closest("tr").find(".conditional-logic-value"),n=[];if(j=="true_false"){n=[{value:1,label:acf.l10n.checked}]}else{if(j=="select"||j=="checkbox"||j=="radio"){var e=k.find(".field_option-choices").val().split("\n");if(e){for(var h=0;h<e.length;h++){var g=e[h].split(":");var l=g[0];if(g[1]){l=g[1]}n.push({value:c.trim(g[0]),label:c.trim(l)})}}}}var f=acf.helpers.create_field({type:"select",classname:"conditional-logic-value",name:m.attr("name"),value:m.val(),choices:n});m.replaceWith(f);f.trigger("change")},add:function(d){var e=d.clone(),f=parseFloat(d.attr("data-i")),g=acf.helpers.uniqid();e.find("[name]").each(function(){var i="[conditional_logic][rules]["+f+"]",h="[conditional_logic][rules]["+g+"]";c(this).attr("name",c(this).attr("name").replace(i,h));c(this).attr("id",c(this).attr("id").replace(i,h))});e.attr("data-i",g);d.after(e);d.closest("table").removeClass("remove-disabled")},remove:function(e){var d=e.closest("table");if(d.hasClass("remove-disabled")){return false}e.remove();if(d.find("tr").length<=1){d.addClass("remove-disabled")}}};c(document).on("change",".radio-option-other_choice input",function(){var d=c(this),e=d.closest("td");if(d.is(":checked")){e.find(".radio-option-save_other_choice").show()}else{e.find(".radio-option-save_other_choice").hide();e.find(".radio-option-save_other_choice input").removeAttr("checked")}})})(jQuery);