(function(b){b.fn.stupidtable=function(a){return this.each(function(){var d=b(this);a=a||{};a=b.extend({},b.fn.stupidtable.default_sort_fns,a);d.on("click.stupidtable","thead th",function(){var c=b(this);var i=0;var k=b.fn.stupidtable.dir;c.parents("tr").find("th").slice(0,c.index()+1).each(function(){var e=b(this).attr("colspan")||1;i+=parseInt(e,10)});i=i-1;var l=c.data("sort-default")||k.ASC;if(c.data("sort-dir")){l=c.data("sort-dir")===k.ASC?k.DESC:k.ASC}var j=c.data("sort")||null;if(j===null){return}d.trigger("beforetablesort",{column:c.index(),direction:l});d.css("display");setTimeout(function(){var e=a[j];d.children("tbody").each(function(f,g){var p=[];var h=b(g);var o=h.children("tr").not("[data-sort-ignore]");o.each(function(u,n){var v=b(n).children().eq(i);var t=v.data("sort-value");var m=typeof(t)!=="undefined"?t:v.text();p.push([m,n])});p.sort(function(m,n){return e(m[0],n[0])});if(l!=k.ASC){p.reverse()}o=b.map(p,function(m){return m[1]});h.append(o)});d.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc");c.data("sort-dir",l).addClass("sorting-"+l);d.trigger("aftertablesort",{column:c.index(),direction:l});d.css("display")},10)})})};b.fn.stupidtable.dir={ASC:"asc",DESC:"desc"};b.fn.stupidtable.default_sort_fns={"int":function(a,e){return parseInt(a,10)-parseInt(e,10)},"float":function(a,e){return parseFloat(a)-parseFloat(e)},string:function(a,e){return a.localeCompare(e)},"string-ins":function(a,e){a=a.toLocaleLowerCase();e=e.toLocaleLowerCase();return a.localeCompare(e)}}})(jQuery);