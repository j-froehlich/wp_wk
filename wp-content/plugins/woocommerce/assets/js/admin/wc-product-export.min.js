(function(b,a){var c=function(d){this.$form=d;this.xhr=false;this.$form.find(".woocommerce-exporter-progress").val(0);this.processStep=this.processStep.bind(this);d.on("submit",{productExportForm:this},this.onSubmit)};c.prototype.onSubmit=function(d){d.preventDefault();d.data.productExportForm.$form.addClass("woocommerce-exporter__exporting");d.data.productExportForm.$form.find(".woocommerce-exporter-progress").val(0);d.data.productExportForm.$form.find(".woocommerce-exporter-button").prop("disabled",true);d.data.productExportForm.processStep(1,b(this).serialize(),"")};c.prototype.processStep=function(h,i,g){var j=this,f=b(".woocommerce-exporter-columns").val(),e=b("#woocommerce-exporter-meta:checked").length?1:0,d=b(".woocommerce-exporter-types").val();b.ajax({type:"POST",url:ajaxurl,data:{form:i,action:"woocommerce_do_ajax_product_export",step:h,columns:g,selected_columns:f,export_meta:e,export_types:d,security:wc_product_export_params.export_nonce},dataType:"json",success:function(k){if(k.success){if("done"===k.data.step){j.$form.find(".woocommerce-exporter-progress").val(k.data.percentage);a.location=k.data.url;setTimeout(function(){j.$form.removeClass("woocommerce-exporter__exporting");j.$form.find(".woocommerce-exporter-button").prop("disabled",false)},2000)}else{j.$form.find(".woocommerce-exporter-progress").val(k.data.percentage);j.processStep(parseInt(k.data.step,10),i,k.data.columns)}}}}).fail(function(k){a.console.log(k)})};b.fn.wc_product_export_form=function(){new c(this);return this};b(".woocommerce-exporter").wc_product_export_form()})(jQuery,window);