jQuery(function(d){if(typeof wc_add_to_cart_params==="undefined"){return false}var c=function(){d(document.body).on("click",".add_to_cart_button",this.onAddToCart).on("click",".remove_from_cart_button",this.onRemoveFromCart).on("added_to_cart",this.updateButton).on("added_to_cart",this.updateCartPage).on("added_to_cart removed_from_cart",this.updateFragments)};c.prototype.onAddToCart=function(a){var e=d(this);if(e.is(".ajax_add_to_cart")){if(!e.attr("data-product_id")){return true}a.preventDefault();e.removeClass("added");e.addClass("loading");var b={};d.each(e.data(),function(h,f){b[h]=f});d(document.body).trigger("adding_to_cart",[e,b]);d.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),b,function(f){if(!f){return}if(f.error&&f.product_url){window.location=f.product_url;return}if(wc_add_to_cart_params.cart_redirect_after_add==="yes"){window.location=wc_add_to_cart_params.cart_url;return}d(document.body).trigger("added_to_cart",[f.fragments,f.cart_hash,e])})}};c.prototype.onRemoveFromCart=function(a){var b=d(this),e=b.closest(".woocommerce-mini-cart-item");a.preventDefault();e.block({message:null,overlayCSS:{opacity:0.6}});d.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_from_cart"),{cart_item_key:b.data("cart_item_key")},function(f){if(!f||!f.fragments){window.location=b.attr("href");return}d(document.body).trigger("removed_from_cart",[f.fragments,f.cart_hash])}).fail(function(){window.location=b.attr("href");return})};c.prototype.updateButton=function(a,h,e,b){b=typeof b==="undefined"?false:b;if(b){b.removeClass("loading");b.addClass("added");if(!wc_add_to_cart_params.is_cart&&b.parent().find(".added_to_cart").length===0){b.after(' <a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+wc_add_to_cart_params.i18n_view_cart+"</a>")}d(document.body).trigger("wc_cart_button_updated",[b])}};c.prototype.updateCartPage=function(){var a=window.location.toString().replace("add-to-cart","added-to-cart");d(".shop_table.cart").load(a+" .shop_table.cart:eq(0) > *",function(){d(".shop_table.cart").stop(true).css("opacity","1").unblock();d(document.body).trigger("cart_page_refreshed")});d(".cart_totals").load(a+" .cart_totals:eq(0) > *",function(){d(".cart_totals").stop(true).css("opacity","1").unblock();d(document.body).trigger("cart_totals_refreshed")})};c.prototype.updateFragments=function(a,b){if(b){d.each(b,function(f){d(f).addClass("updating").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:0.6}})});d.each(b,function(h,g){d(h).replaceWith(g);d(h).stop(true).css("opacity","1").unblock()});d(document.body).trigger("wc_fragments_loaded")}};new c()});