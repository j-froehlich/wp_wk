define(["views/widgets/forms/formsTableBody","views/widgets/forms/formsTableLoading","models/formCollection"],function(c,d,a){var b=Marionette.View.extend({template:"#tmpl-nf-widget-forms-table",className:"nf-table-display",tagName:"table",initialize:function(){var e=this;this.listenTo(nfRadio.channel("dashboard"),"fetch:forms",function(f){e.showChildView("body",new c({collection:f}))})},regions:{body:{el:"tbody",replaceElement:true}},ui:{sortable:".sortable",body:"tbody",action2:".action2",more:".more",less:".less"},onRender:function(){this.getUI("less").hide();var e=nfRadio.channel("dashboard").request("get:forms");if("undefined"==typeof e){this.showChildView("body",new d())}else{this.showChildView("body",new c({collection:e}))}this.maybeHideMoreButton()},events:{"click @ui.sortable":"sortFormsTable","click @ui.more":"showMore","click @ui.less":"showLess"},sortFormsTable:function(f){this.getUI("sortable").removeClass("sorted-asc");this.getUI("sortable").removeClass("sorted-desc");var h=jQuery(f.target).data("sort");var e=jQuery(f.target).data("reverse")||0;if(e){jQuery(f.target).addClass("sorted-desc");jQuery(f.target).removeClass("sorted-asc")}else{jQuery(f.target).addClass("sorted-asc");jQuery(f.target).removeClass("sorted-desc")}var g=this.getChildView("body").collection;g.comparator=function(j,i){name1=j.get(h).toLowerCase();name2=i.get(h).toLowerCase();if(name1<name2){ret=-1}else{if(name1>name2){ret=1}else{ret=0}}if(e){ret=-ret}return ret};g.sort();if(e){g.models.reverse();jQuery(f.target).data("reverse",0)}else{jQuery(f.target).data("reverse",1)}},showMore:function(){this.getUI("more").hide();this.getUI("less").show();this.getUI("body").addClass("more")},showLess:function(){this.getUI("less").hide();this.getUI("more").show();this.getUI("body").removeClass("more")},maybeHideMoreButton:function(){if("undefined"!==typeof this.collection&&10<this.collection.length){return}this.getUI("action2").hide()}});return b});