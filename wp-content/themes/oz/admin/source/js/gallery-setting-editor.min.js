!function(a,b,c,d){_.extend(b.mce.View.prototype,{replaceMarkers:function(){this.getMarkers(function(a,b){var c;if(!this.loader&&d(b).text()!==this.text)return void a.dom.setAttrib(b,"data-wpview-marker",null);if("gallery"==this.type){var e=this.shortcode.attrs.named.spacing?this.shortcode.attrs.named.spacing:"none",f=this.shortcode.attrs.named.style?this.shortcode.attrs.named.style:"none";c=a.$('<div data-spacing="'+e+'" data-style="'+f+'" class="wpview wpview-wrap" data-wpview-text="'+this.encodedText+'" data-wpview-type="'+this.type+'" contenteditable="false"></div>')}else c=a.$('<div class="wpview wpview-wrap" data-wpview-text="'+this.encodedText+'" data-wpview-type="'+this.type+'" contenteditable="false"></div>');a.$(b).replaceWith(c)})},render:function(a,b){null!=a&&(this.content=a),a=this.getContent(),(this.loader||a)&&(b&&this.unbind(),this.replaceMarkers(),a?this.setContent(a,function(a,b){if(d(b).data("rendered",!0),"gallery"==this.type){var c=this.shortcode.attrs.named.spacing?this.shortcode.attrs.named.spacing:"none",e=this.shortcode.attrs.named.style?this.shortcode.attrs.named.style:"none";d(b).attr("data-spacing",c),d(b).attr("data-style",e),"none"!==e&&d(".gallery-icon",d(b)).each(function(a,b){var c=d(this),e=c.find("img");c.css({"background-image":"url("+e.attr("src")+")"})})}this.bindNode.call(this,a,b)},!!b&&null):this.setLoader())}})}(window,window.wp,window.wp.shortcode,window.jQuery);