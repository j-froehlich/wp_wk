(function(j,k,h,i){var l=function(a){this.$form=a;this.$attributeFields=a.find(".variations select");this.$singleVariation=a.find(".single_variation");this.$singleVariationWrap=a.find(".single_variation_wrap");this.$resetVariations=a.find(".reset_variations");this.$product=a.closest(".product");this.variationData=a.data("product_variations");this.useAjax=false===this.variationData;this.xhr=false;this.$singleVariationWrap.show();this.$form.off(".wc-variation-form");this.getChosenAttributes=this.getChosenAttributes.bind(this);this.findMatchingVariations=this.findMatchingVariations.bind(this);this.isMatch=this.isMatch.bind(this);this.toggleResetLink=this.toggleResetLink.bind(this);a.on("click.wc-variation-form",".reset_variations",{variationForm:this},this.onReset);a.on("reload_product_variations",{variationForm:this},this.onReload);a.on("hide_variation",{variationForm:this},this.onHide);a.on("show_variation",{variationForm:this},this.onShow);a.on("click",".single_add_to_cart_button",{variationForm:this},this.onAddToCart);a.on("reset_data",{variationForm:this},this.onResetDisplayedVariation);a.on("reset_image",{variationForm:this},this.onResetImage);a.on("change.wc-variation-form",".variations select",{variationForm:this},this.onChange);a.on("found_variation.wc-variation-form",{variationForm:this},this.onFoundVariation);a.on("check_variations.wc-variation-form",{variationForm:this},this.onFindVariation);a.on("update_variation_values.wc-variation-form",{variationForm:this},this.onUpdateAttributes);setTimeout(function(){a.trigger("check_variations");a.trigger("wc_variation_form")},100)};l.prototype.onReset=function(a){a.preventDefault();a.data.variationForm.$attributeFields.val("").change();a.data.variationForm.$form.trigger("reset_data")};l.prototype.onReload=function(a){var b=a.data.variationForm;b.variationData=b.$form.data("product_variations");b.useAjax=false===b.variationData;b.$form.trigger("check_variations")};l.prototype.onHide=function(a){a.preventDefault();a.data.variationForm.$form.find(".single_add_to_cart_button").removeClass("wc-variation-is-unavailable").addClass("disabled wc-variation-selection-needed");a.data.variationForm.$form.find(".woocommerce-variation-add-to-cart").removeClass("woocommerce-variation-add-to-cart-enabled").addClass("woocommerce-variation-add-to-cart-disabled")};l.prototype.onShow=function(a,b,c){a.preventDefault();if(c){a.data.variationForm.$form.find(".single_add_to_cart_button").removeClass("disabled wc-variation-selection-needed wc-variation-is-unavailable");a.data.variationForm.$form.find(".woocommerce-variation-add-to-cart").removeClass("woocommerce-variation-add-to-cart-disabled").addClass("woocommerce-variation-add-to-cart-enabled")}else{a.data.variationForm.$form.find(".single_add_to_cart_button").removeClass("wc-variation-selection-needed").addClass("disabled wc-variation-is-unavailable");a.data.variationForm.$form.find(".woocommerce-variation-add-to-cart").removeClass("woocommerce-variation-add-to-cart-enabled").addClass("woocommerce-variation-add-to-cart-disabled")}};l.prototype.onAddToCart=function(a){if(j(this).is(".disabled")){a.preventDefault();if(j(this).is(".wc-variation-is-unavailable")){k.alert(wc_add_to_cart_variation_params.i18n_unavailable_text)}else{if(j(this).is(".wc-variation-selection-needed")){k.alert(wc_add_to_cart_variation_params.i18n_make_a_selection_text)}}}};l.prototype.onResetDisplayedVariation=function(a){var b=a.data.variationForm;b.$product.find(".product_meta").find(".sku").wc_reset_content();b.$product.find(".product_weight").wc_reset_content();b.$product.find(".product_dimensions").wc_reset_content();b.$form.trigger("reset_image");b.$singleVariation.slideUp(200).trigger("hide_variation")};l.prototype.onResetImage=function(a){a.data.variationForm.$form.wc_variations_image_update(false)};l.prototype.onFindVariation=function(b){var c=b.data.variationForm,f=c.getChosenAttributes(),e=f.data;if(f.count===f.chosenCount){if(c.useAjax){if(c.xhr){c.xhr.abort()}c.$form.block({message:null,overlayCSS:{background:"#fff",opacity:0.6}});e.product_id=parseInt(c.$form.data("product_id"),10);e.custom_data=c.$form.data("custom_data");c.xhr=j.ajax({url:wc_add_to_cart_variation_params.wc_ajax_url.toString().replace("%%endpoint%%","get_variation"),type:"POST",data:e,success:function(n){if(n){c.$form.trigger("found_variation",[n])}else{c.$form.trigger("reset_data");c.$form.find(".single_variation").after('<p class="wc-no-matching-variations woocommerce-info">'+wc_add_to_cart_variation_params.i18n_no_matching_variations_text+"</p>");c.$form.find(".wc-no-matching-variations").slideDown(200)}},complete:function(){c.$form.unblock()}})}else{c.$form.trigger("update_variation_values");var a=c.findMatchingVariations(c.variationData,e),d=a.shift();if(d){c.$form.trigger("found_variation",[d])}else{c.$form.trigger("reset_data");c.$form.find(".single_variation").after('<p class="wc-no-matching-variations woocommerce-info">'+wc_add_to_cart_variation_params.i18n_no_matching_variations_text+"</p>");c.$form.find(".wc-no-matching-variations").slideDown(200)}}}else{c.$form.trigger("update_variation_values");c.$form.trigger("reset_data")}c.toggleResetLink(f.chosenCount>0)};l.prototype.onFoundVariation=function(u,s){var t=u.data.variationForm,r=t.$product.find(".product_meta").find(".sku"),v=t.$product.find(".product_weight"),b=t.$product.find(".product_dimensions"),d=t.$singleVariationWrap.find(".quantity"),e=true,f="",a=false,c="";if(s.sku){r.wc_set_content(s.sku)}else{r.wc_reset_content()}if(s.weight){v.wc_set_content(s.weight_html)}else{v.wc_reset_content()}if(s.dimensions){b.wc_set_content(s.dimensions_html)}else{b.wc_reset_content()}t.$form.wc_variations_image_update(s);if(!s.variation_is_visible){a=wp.template("unavailable-variation-template")}else{a=wp.template("variation-template");f=s.variation_id}c=a({variation:s});c=c.replace("/*<![CDATA[*/","");c=c.replace("/*]]>*/","");t.$singleVariation.html(c);t.$form.find('input[name="variation_id"], input.variation_id').val(s.variation_id).change();if(s.is_sold_individually==="yes"){d.find("input.qty").val("1").attr("min","1").attr("max","");d.hide()}else{d.find("input.qty").attr("min",s.min_qty).attr("max",s.max_qty);d.show()}if(!s.is_purchasable||!s.is_in_stock||!s.variation_is_visible){e=false}if(j.trim(t.$singleVariation.text())){t.$singleVariation.slideDown(200).trigger("show_variation",[s,e])}else{t.$singleVariation.show().trigger("show_variation",[s,e])}};l.prototype.onChange=function(a){var b=a.data.variationForm;b.$form.find('input[name="variation_id"], input.variation_id').val("").change();b.$form.find(".wc-no-matching-variations").remove();if(b.useAjax){b.$form.trigger("check_variations")}else{b.$form.trigger("woocommerce_variation_select_change");b.$form.trigger("check_variations");j(this).blur()}b.$form.trigger("woocommerce_variation_has_changed")};l.prototype.addSlashes=function(a){a=a.replace(/'/g,"\\'");a=a.replace(/"/g,'\\"');return a};l.prototype.onUpdateAttributes=function(a){var b=a.data.variationForm,d=b.getChosenAttributes(),c=d.data;if(b.useAjax){return}b.$attributeFields.each(function(I,P){var Q=j(P),M=Q.data("attribute_name")||Q.attr("name"),H=j(P).data("show_option_none"),O=":gt(0)",C=0,E=j("<select/>"),R=Q.val()||"",J=true;if(!Q.data("attribute_html")){var L=Q.clone();L.find("option").removeAttr("disabled attached").removeAttr("selected");Q.data("attribute_options",L.find("option"+O).get());Q.data("attribute_html",L.html())}E.html(Q.data("attribute_html"));var K=j.extend(true,{},c);K[M]="";var D=b.findMatchingVariations(b.variationData,K);for(var G in D){if(typeof(D[G])!=="undefined"){var N=D[G].attributes;for(var f in N){if(N.hasOwnProperty(f)){var e=N[f],F="";if(f===M){if(D[G].variation_is_active){F="enabled"}if(e){e=j("<div/>").html(e).text();E.find('option[value="'+b.addSlashes(e)+'"]').addClass("attached "+F)}else{E.find("option:gt(0)").addClass("attached "+F)}}}}}}C=E.find("option.attached").length;if(R&&(C===0||E.find('option.attached.enabled[value="'+b.addSlashes(R)+'"]').length===0)){J=false}if(C>0&&R&&J&&("no"===H)){E.find("option:first").remove();O=""}E.find("option"+O+":not(.attached)").remove();Q.html(E.html());Q.find("option"+O+":not(.enabled)").prop("disabled",true);if(R){if(J){Q.val(R)}else{Q.val("").change()}}else{Q.val("")}});b.$form.trigger("woocommerce_update_variation_values")};l.prototype.getChosenAttributes=function(){var a={};var b=0;var c=0;this.$attributeFields.each(function(){var e=j(this).data("attribute_name")||j(this).attr("name");var d=j(this).val()||"";if(d.length>0){c++}b++;a[e]=d});return{count:b,chosenCount:c,data:a}};l.prototype.findMatchingVariations=function(b,e){var a=[];for(var c=0;c<b.length;c++){var d=b[c];if(this.isMatch(d.attributes,e)){a.push(d)}}return a};l.prototype.isMatch=function(a,f){var e=true;for(var b in a){if(a.hasOwnProperty(b)){var c=a[b];var d=f[b];if(c!==i&&d!==i&&c.length!==0&&d.length!==0&&c!==d){e=false}}}return e};l.prototype.toggleResetLink=function(a){if(a){if(this.$resetVariations.css("visibility")==="hidden"){this.$resetVariations.css("visibility","visible").hide().fadeIn()}}else{this.$resetVariations.css("visibility","hidden")}};j.fn.wc_variation_form=function(){new l(this);return this};j.fn.wc_set_content=function(a){if(i===this.attr("data-o_content")){this.attr("data-o_content",this.text())}this.text(a)};j.fn.wc_reset_content=function(){if(i!==this.attr("data-o_content")){this.text(this.attr("data-o_content"))}};j.fn.wc_set_variation_attr=function(b,a){if(i===this.attr("data-o_"+b)){this.attr("data-o_"+b,(!this.attr(b))?"":this.attr(b))}if(false===a){this.removeAttr(b)}else{this.attr(b,a)}};j.fn.wc_reset_variation_attr=function(a){if(i!==this.attr("data-o_"+a)){this.attr(a,this.attr("data-o_"+a))}};j.fn.wc_maybe_trigger_slide_position_reset=function(c){var f=j(this),a=f.closest(".product"),b=a.find(".images"),d=false,e=(c&&c.image_id)?c.image_id:"";if(f.attr("current-image")!==e){d=true}f.attr("current-image",e);if(d){b.trigger("woocommerce_gallery_reset_slide_position")}};j.fn.wc_variations_image_update=function(p){var a=this,f=a.closest(".product"),e=f.find(".images"),d=f.find(".flex-control-nav"),r=d.find("li:eq(0) img"),q=e.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),b=q.find(".wp-post-image"),c=q.find("a").eq(0);if(p&&p.image&&p.image.src&&p.image.src.length>1){if(d.find('li img[src="'+p.image.thumb_src+'"]').length>0){d.find('li img[src="'+p.image.thumb_src+'"]').trigger("click");a.attr("current-image",p.image_id);return}else{b.wc_set_variation_attr("src",p.image.src);b.wc_set_variation_attr("height",p.image.src_h);b.wc_set_variation_attr("width",p.image.src_w);b.wc_set_variation_attr("srcset",p.image.srcset);b.wc_set_variation_attr("sizes",p.image.sizes);b.wc_set_variation_attr("title",p.image.title);b.wc_set_variation_attr("alt",p.image.alt);b.wc_set_variation_attr("data-src",p.image.full_src);b.wc_set_variation_attr("data-large_image",p.image.full_src);b.wc_set_variation_attr("data-large_image_width",p.image.full_src_w);b.wc_set_variation_attr("data-large_image_height",p.image.full_src_h);q.wc_set_variation_attr("data-thumb",p.image.src);r.wc_set_variation_attr("src",p.image.thumb_src);c.wc_set_variation_attr("href",p.image.full_src)}}else{b.wc_reset_variation_attr("src");b.wc_reset_variation_attr("width");b.wc_reset_variation_attr("height");b.wc_reset_variation_attr("srcset");b.wc_reset_variation_attr("sizes");b.wc_reset_variation_attr("title");b.wc_reset_variation_attr("alt");b.wc_reset_variation_attr("data-src");b.wc_reset_variation_attr("data-large_image");b.wc_reset_variation_attr("data-large_image_width");b.wc_reset_variation_attr("data-large_image_height");q.wc_reset_variation_attr("data-thumb");r.wc_reset_variation_attr("src");c.wc_reset_variation_attr("href")}k.setTimeout(function(){j(k).trigger("resize");a.wc_maybe_trigger_slide_position_reset(p);e.trigger("woocommerce_gallery_init_zoom")},20)};j(function(){if(typeof wc_add_to_cart_variation_params!=="undefined"){j(".variations_form").each(function(){j(this).wc_variation_form()})}});var g={find_matching_variations:function(b,c){var a=[];for(var d=0;d<b.length;d++){var e=b[d];if(g.variations_match(e.attributes,c)){a.push(e)}}return a},variations_match:function(a,b){var f=true;for(var c in a){if(a.hasOwnProperty(c)){var d=a[c];var e=b[c];if(d!==i&&e!==i&&d.length!==0&&e.length!==0&&d!==e){f=false}}}return f}}})(jQuery,window,document);