"use strict";(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(d){function b(f,g,e){f=f.getWrapperElement().appendChild(document.createElement("div"));f.className=e?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top";"string"==typeof g?f.innerHTML=g:f.appendChild(g);return f}function a(e,f){e.state.currentNotificationClose&&e.state.currentNotificationClose();e.state.currentNotificationClose=f}d.defineExtension("openDialog",function(i,m,c){function o(e){if("string"==typeof e){p.value=e}else{if(!l&&(l=!0,n.parentNode.removeChild(n),j.focus(),c.onClose)){c.onClose(n)}}}c||(c={});a(this,null);var n=b(this,i,c.bottom),l=!1,j=this,p=n.getElementsByTagName("input")[0];if(p){p.focus();c.value&&(p.value=c.value,!1!==c.selectValueOnOpen&&p.select());if(c.onInput){d.on(p,"input",function(e){c.onInput(e,p.value,o)})}if(c.onKeyUp){d.on(p,"keyup",function(e){c.onKeyUp(e,p.value,o)})}d.on(p,"keydown",function(e){if(!(c&&c.onKeyDown&&c.onKeyDown(e,p.value,o))){if(27==e.keyCode||!1!==c.closeOnEnter&&13==e.keyCode){p.blur(),d.e_stop(e),o()}13==e.keyCode&&m(p.value,e)}});if(!1!==c.closeOnBlur){d.on(p,"blur",o)}}else{if(i=n.getElementsByTagName("button")[0]){d.on(i,"click",function(){o();j.focus()});if(!1!==c.closeOnBlur){d.on(i,"blur",o)}i.focus()}}return o});d.defineExtension("openConfirm",function(r,l,q){function o(){j||(j=!0,m.parentNode.removeChild(m),i.focus())}a(this,null);var m=b(this,r,q&&q.bottom);r=m.getElementsByTagName("button");var j=!1,i=this,p=1;r[0].focus();for(q=0;q<r.length;++q){var c=r[q];(function(e){d.on(c,"click",function(f){d.e_preventDefault(f);o();e&&e(i)})})(l[q]);d.on(c,"blur",function(){--p;setTimeout(function(){0>=p&&o()},200)});d.on(c,"focus",function(){++p})}});d.defineExtension("openNotification",function(i,k){function c(){l||(l=!0,clearTimeout(j),m.parentNode.removeChild(m))}a(this,c);var m=b(this,i,k&&k.bottom),l=!1,j;i=k&&"undefined"!==typeof k.duration?k.duration:5000;d.on(m,"click",function(e){d.e_preventDefault(e);c()});i&&(j=setTimeout(c,i));return c})});