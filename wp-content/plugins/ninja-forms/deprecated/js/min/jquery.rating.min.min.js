if(window.jQuery){(function(b){if(!b.support.opacity&&!b.support.style){try{document.execCommand("BackgroundImageCache",false,true)}catch(a){}}b.fn.rating=function(c){if(this.length==0){return this}if(typeof arguments[0]=="string"){if(this.length>1){var d=arguments;return this.each(function(){b.fn.rating.apply(b(this),d)})}b.fn.rating[arguments[0]].apply(this,b.makeArray(arguments).slice(1)||[]);return this}var c=b.extend({},b.fn.rating.options,c||{});b.fn.rating.calls++;this.not(".ninja-forms-star-rating-applied").addClass("ninja-forms-star-rating-applied").each(function(){var h,e=b(this);var k=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,"");var v=b(this.form||document.body);var g=v.data("rating");if(!g||g.call!=b.fn.rating.calls){g={count:0,call:b.fn.rating.calls}}var t=g[k]||v.data("rating"+k);if(t){h=t.data("rating")}if(t&&h){h.count++}else{h=b.extend({},c||{},(b.metadata?e.metadata():b.meta?e.data():null)||{},{count:0,stars:[],inputs:[]});h.serial=g.count++;t=b('<span class="ninja-forms-star-rating-control"/>');e.before(t);t.addClass("rating-to-be-drawn");if(e.attr("disabled")||e.hasClass("disabled")){h.readOnly=true}if(e.hasClass("required")){h.required=true}t.append(h.cancel=b('<div class="rating-cancel"><a title="'+h.cancel+'">'+h.cancelValue+"</a></div>").on("mouseover",function(){b(this).rating("drain");b(this).addClass("ninja-forms-star-rating-cancel-hover")}).on("mouseout",function(){b(this).rating("draw");b(this).removeClass("ninja-forms-star-rating-cancel-hover")}).on("click",function(){b(this).rating("select")}).data("rating",h))}var q=b('<div role="text" aria-label="'+this.title+'" class="ninja-forms-star-rating rater-'+h.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");t.append(q);if(this.id){q.attr("id",this.id)}if(this.className){q.addClass(this.className)}if(h.half){h.split=2}if(typeof h.split=="number"&&h.split>0){var m=(b.fn.width?q.width():0)||h.starWidth;var j=h.count%h.split,p=Math.floor(m/h.split);q.width(p).find("a").css({"margin-left":"-"+j*p+"px"})}if(h.readOnly){q.addClass("ninja-forms-star-rating-readonly")}else{q.addClass("ninja-forms-star-rating-live").on("mouseover",function(){b(this).rating("fill");b(this).rating("focus")}).on("mouseout",function(){b(this).rating("draw");b(this).rating("blur")}).on("click",function(){b(this).rating("select")})}if(this.checked){h.current=q}if(this.nodeName=="A"){if(b(this).hasClass("selected")){h.current=q}}e.hide();e.on("change.rating",function(f){if(f.selfTriggered){return false}b(this).rating("select")});q.data("rating.input",e.data("rating.star",q));h.stars[h.stars.length]=q[0];h.inputs[h.inputs.length]=e[0];h.rater=g[k]=t;h.context=v;e.data("rating",h);t.data("rating",h);q.data("rating",h);v.data("rating",g);v.data("rating"+k,t)});b(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn");return this};b.extend(b.fn.rating,{calls:0,focus:function(){var c=this.data("rating");if(!c){return this}if(!c.focus){return this}var d=b(this).data("rating.input")||b(this.tagName=="INPUT"?this:null);if(c.focus){c.focus.apply(d[0],[d.val(),b("a",d.data("rating.star"))[0]])}},blur:function(){var c=this.data("rating");if(!c){return this}if(!c.blur){return this}var d=b(this).data("rating.input")||b(this.tagName=="INPUT"?this:null);if(c.blur){c.blur.apply(d[0],[d.val(),b("a",d.data("rating.star"))[0]])}},fill:function(){var c=this.data("rating");if(!c){return this}if(c.readOnly){return}this.rating("drain");this.prevAll().addBack().filter(".rater-"+c.serial).addClass("ninja-forms-star-rating-hover")},drain:function(){var c=this.data("rating");if(!c){return this}if(c.readOnly){return}c.rater.children().filter(".rater-"+c.serial).removeClass("ninja-forms-star-rating-on").removeClass("ninja-forms-star-rating-hover")},draw:function(){var c=this.data("rating");if(!c){return this}this.rating("drain");var e=b(c.current);var d=e.length?e.prevAll().addBack().filter(".rater-"+c.serial):null;if(d){d.addClass("ninja-forms-star-rating-on")}c.cancel[c.readOnly||c.required?"hide":"show"]();this.siblings()[c.readOnly?"addClass":"removeClass"]("ninja-forms-star-rating-readonly")},select:function(d,h){var f=this.data("rating");if(!f){return this}if(f.readOnly){return}f.current=null;if(typeof d!="undefined"||this.length>1){if(typeof d=="number"){return b(f.stars[d]).rating("select",undefined,h)}if(typeof d=="string"){b.each(f.stars,function(){if(b(this).data("rating.input").val()==d){b(this).rating("select",undefined,h)}});return this}}else{f.current=this[0].tagName=="INPUT"?this.data("rating.star"):this.is(".rater-"+f.serial)?this:null}this.data("rating",f);this.rating("draw");var c=b(f.current?f.current.data("rating.input"):null);var e=b(f.inputs).filter(":checked");var g=b(f.inputs).not(c);g.prop("checked",false);c.prop("checked",true);b(c.length?c:e).trigger({type:"change",selfTriggered:true});if((h||h==undefined)&&f.callback){f.callback.apply(c[0],[c.val(),b("a",f.current)[0]])}return this},readOnly:function(c,e){var d=this.data("rating");if(!d){return this}d.readOnly=c||c==undefined?true:false;if(e){b(d.inputs).attr("disabled","disabled")}else{b(d.inputs).removeAttr("disabled")}this.data("rating",d);this.rating("draw")},disable:function(){this.rating("readOnly",true,true)},enable:function(){this.rating("readOnly",false,false)}});b.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16};b(function(){b("input[type=radio].ninja-forms-star").rating()})})(jQuery)};