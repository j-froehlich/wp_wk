(function(b,a){var c=function(d){this.$form=d;this.xhr=false;this.mapping=wc_product_import_params.mapping;this.position=0;this.file=wc_product_import_params.file;this.update_existing=wc_product_import_params.update_existing;this.delimiter=wc_product_import_params.delimiter;this.security=wc_product_import_params.import_nonce;this.imported=0;this.failed=0;this.updated=0;this.skipped=0;this.$form.find(".woocommerce-importer-progress").val(0);this.run_import=this.run_import.bind(this);this.run_import()};c.prototype.run_import=function(){var d=this;b.ajax({type:"POST",url:ajaxurl,data:{action:"woocommerce_do_ajax_product_import",position:d.position,mapping:d.mapping,file:d.file,update_existing:d.update_existing,delimiter:d.delimiter,security:d.security},dataType:"json",success:function(e){if(e.success){d.position=e.data.position;d.imported+=e.data.imported;d.failed+=e.data.failed;d.updated+=e.data.updated;d.skipped+=e.data.skipped;d.$form.find(".woocommerce-importer-progress").val(e.data.percentage);if("done"===e.data.position){a.location=e.data.url+"&products-imported="+parseInt(d.imported,10)+"&products-failed="+parseInt(d.failed,10)+"&products-updated="+parseInt(d.updated,10)+"&products-skipped="+parseInt(d.skipped,10)}else{d.run_import()}}}}).fail(function(e){a.console.log(e)})};b.fn.wc_product_importer=function(){new c(this);return this};b(".woocommerce-importer").wc_product_importer()})(jQuery,window);