function ninja_forms_escape_html(a){var b=document.createElement("textarea");return b.innerHTML=a,b.innerHTML}!function(a){a.fn.serializeFullArray=function(){var d=a(this).serializeArray(),f={};for(var g in d){if(d.hasOwnProperty(g)){var j=d[g].name.split(/\]|\[/);j=a.grep(j,function(i){return""!=i});var c=f;for(var e in j){if(j.hasOwnProperty(e)){var b=j[e],k={};if(e==j.length-1){var k=d[g].value}var h={};h[b]=k,a.extend(!0,c,h),c=c[b]}}}}return f}}(jQuery),jQuery.fn.tinymce_textareas=function(){tinyMCE.init({skin:"wp_theme"})},jQuery.fn.nextElementInDom=function(f,g){var d={stopAt:"body"};g=jQuery.extend(d,g);var b=jQuery(this).parent(),c=b.find(f);switch(!0){case c.length>0:return c;case 0===b.length||b.is(g.stopAt):return jQuery([]);default:return b.nextElementInDom(f)}},jQuery.fn.nfAdminModal=function(f,g){if(0==jQuery("#nf-admin-modal-backdrop").length){var d='<div id="nf-admin-modal-backdrop" style="display: none;"></div><div id="nf-admin-modal-wrap" class="wp-core-ui" style="display: none;"><div id="nf-admin-modal" tabindex="-1"><div id="admin-modal-title"><span id="nf-modal-title"></span><button type="button" id="nf-admin-modal-close" class="modal-close"><span class="screen-reader-text modal-close">Close</span></button></div><div id="modal-contents-wrapper" style="padding:20px;"><div id="nf-admin-modal-content" class="admin-modal-inside"></div><div class="submitbox" style="display:block;"></div></div></div></div>';jQuery("body").append(d)}"object"==typeof f&&(g=f);var b={title:"",buttons:!1,backgroundClose:!1};if("undefined"==typeof g?(g=jQuery(this).data("nfAdminModal"),"undefined"==typeof g&&(g=jQuery.extend(b,g))):g=jQuery.extend(b,g),jQuery(this).data("nfAdminModal",g),jQuery(this).hide(),jQuery("#nf-admin-modal-content").html(this.html()),jQuery("#nf-modal-title").html(g.title),g.buttons){jQuery(g.buttons).hide();var c=jQuery(g.buttons).html();jQuery("#modal-contents-wrapper").find(".submitbox").html(c),jQuery("#nf-admin-modal-content").addClass("admin-modal-inside"),jQuery("#modal-contents-wrapper").find(".submitbox").show()}else{jQuery("#nf-admin-modal-content").removeClass("admin-modal-inside"),jQuery("#modal-contents-wrapper").find(".submitbox").hide()}jQuery("#nf-admin-modal-backdrop").data("backgroundClose",g.backgroundClose),"close"==f?jQuery.fn.nfAdminModal.close():"open"==f&&jQuery.fn.nfAdminModal.open()},jQuery(document).on("click","#nf-admin-modal-backdrop",function(){1==jQuery(this).data("backgroundClose")&&jQuery.fn.nfAdminModal.close()}),jQuery(document).on("click",".modal-close",function(a){a.preventDefault(),jQuery.fn.nfAdminModal.close()}),jQuery.fn.nfAdminModal.close=function(){jQuery("#nf-admin-modal-backdrop").hide(),jQuery("#nf-admin-modal-wrap").hide(),jQuery(document).triggerHandler("nfAdminModalClose")},jQuery.fn.nfAdminModal.open=function(){jQuery("#nf-admin-modal-backdrop").show(),jQuery("#nf-admin-modal-wrap").show(),jQuery(document).triggerHandler("nfAdminModalOpen")},jQuery(document).ready(function(a){a(".ninja-forms-admin-date").datepicker(ninja_forms_settings.datepicker_args),a(".ninja-forms-select-all").click(function(){var c=this.title,b=this.checked;a("."+c).prop("checked",b)}),a("#side-sortables").sortable({placeholder:"ui-state-highlight",helper:"clone",handle:".hndl",stop:function(){var d=a("#side-sortables").sortable("toArray"),c=a("#_page").val(),b=a("#_tab").val();a.post(ajaxurl,{order:d,page:c,tab:b,action:"ninja_forms_side_sortable",nf_ajax_nonce:ninja_forms_settings.nf_ajax_nonce},function(){})}}),a(document).on("keydown","form input",function(c){if(13==c.keyCode){var b=a(this).attr("type");if("textarea"!=b){return !1}}}),a(document).on("click",".metabox-item-edit",function(b){b.preventDefault(),a(this).parent().parent().find(".inside").slideToggle("fast")}),a(".hndle").dblclick(function(){a(this).prevAll(".item-controls:first").find("a").click()}),a(document).on("keyup",".ninja-forms-field-label",function(){var c=this.id.replace("ninja_forms_field_","");c=c.replace("_label","");var b=this.value;b=ninja_forms_escape_html(b),""==a.trim(b)&&(b=a(this).parent().parent().parent().prev().find(".item-type:first").prop("innerHTML")),a("#ninja_forms_field_"+c+"_title").prop("innerHTML",b),b.length>15&&(b=b.substring(0,15),b+="..."),a(".ninja-forms-field-conditional-cr-field option[value='"+c+"']").each(function(){a(this).text(c+" - "+b)}),a(".ninja-forms-calc-select option[value='"+c+"']").each(function(){a(this).text(c+" - "+b)})}),a(document).on("change",".ninja-forms-show-help",function(){var b=this.id.replace("ninja_forms_field_","");b=b.replace("_show_help",""),this.checked?a("#ninja_forms_field_"+b+"_help_span").show():a("#ninja_forms_field_"+b+"_help_span").hide()}),a(document).on("change",".ninja-forms-show-desc",function(){var b=this.id.replace("ninja_forms_field_","");b=b.replace("_show_desc",""),this.checked?a("#ninja_forms_field_"+b+"_desc_span").show():a("#ninja_forms_field_"+b+"_desc_span").hide()}),a(".ninja-forms-delete-form").click(function(d){d.preventDefault();var c=this.id.replace("ninja_forms_delete_form_",""),b=confirm("Really delete this form? (Irreversible)");b&&a.post(ajaxurl,{form_id:c,action:"ninja_forms_delete_form",nf_ajax_nonce:ninja_forms_settings.nf_ajax_nonce},function(){a("#ninja_forms_form_"+c+"_tr").css("background-color","#FF0000").fadeOut("slow",function(){a(this).remove()})})}),a(".ninja-forms-delete-sub").click(function(d){d.preventDefault();var c=this.id.replace("ninja_forms_sub_",""),b=confirm("Permenantly delete this item?");b&&a.post(ajaxurl,{sub_id:c,action:"ninja_forms_delete_sub",nf_ajax_nonce:ninja_forms_settings.nf_ajax_nonce},function(){a("#ninja_forms_sub_"+c+"_tr").css("background-color","#FF0000").fadeOut("slow",function(){a(this).remove()})})}),a(document).on("change",".ninja-forms-_text-default-value",function(){var b=this.id.replace("default_value_","");"_custom"==this.value||"querystring"==this.value?(a("#ninja_forms_field_"+b+"_default_value").val(""),a("#default_value_label_"+b).show(),a("#ninja_forms_field_"+b+"_default_value").focus()):(a(".querystring-error").hide(),a("#ninja_forms_field_"+b+"_default_value").removeClass("error"),a("#default_value_label_"+b).hide(),a("#ninja_forms_field_"+b+"_default_value").val(this.value)),"querystring"!=this.value&&(a(".querystring-error").hide(),a("#ninja_forms_field_"+b+"_default_value").removeClass("error"),a(".nf-save-admin-fields").attr("disabled",!1)),""!=this.value&&"today"!=this.value&&a("#ninja_forms_field_"+b+"_datepicker").prop("checked",!1)}),a(document).on("keyup",".nf-default-value-text",function(){var b=a(this).data("field-id");-1!=wp_reserved_terms.indexOf(this.value)&&"querystring"==a("#default_value_"+b).val()?(a(".querystring-error").show(),a(this).addClass("error"),a(".nf-save-admin-fields").attr("disabled",!0)):(a(".querystring-error").hide(),a(this).removeClass("error"),a(".nf-save-admin-fields").attr("disabled",!1))}),a(document).on("change",".ninja-forms-_text-mask",function(){var b=this.id.replace("mask_","");"_custom"==this.value?(a("#ninja_forms_field_"+b+"_mask").val(""),a("#mask_label_"+b).show(),a("#ninja_forms_field_"+b+"_mask").focus()):(a("#mask_label_"+b).hide(),a("#ninja_forms_field_"+b+"_mask").val(this.value)),""!=this.value&&a("#ninja_forms_field_"+b+"_datepicker").prop("checked",!1)}),a(document).on("click",".ninja-forms-mask-help",function(b){b.preventDefault(),a("#tab-panel-mask_help").is(":visible")||(a("#tab-link-mask_help").find("a").click(),a("#contextual-help-link").click().focus())}),a(document).on("change",".ninja-forms-_text-datepicker",function(){var b=this.id.replace("ninja_forms_field_","");b=b.replace("_datepicker",""),1==this.checked&&("today"!=a("#ninja_forms_field_"+b+"_mask").val()&&a("#ninja_forms_field_"+b+"_mask").val(""),a("#default_value_"+b).val(""),a("#default_value_label_"+b).hide(),a("#mask_"+b).val(""),a("#mask_label_"+b).hide())}),a(document).on("click",".ninja-forms-field-collapse-options",function(c){c.preventDefault();var b=this.id.replace("ninja_forms_field_","");b=b.replace("_collapse_options",""),a("#ninja_forms_field_"+b+"_list_span").slideToggle(function(){})}),a(document).on("change",".ninja-forms-_list-list_type",function(){var b=this.id.replace("ninja_forms_field_","");b=b.replace("_list_type",""),"multi"==this.value?a("#ninja_forms_field_"+b+"_multi_size_p").show():a("#ninja_forms_field_"+b+"_multi_size_p").hide(),"radio"==this.value||"checkbox"==this.value?(a("#ninja_forms_field_"+b+"_label_pos").val("left"),a("#ninja_forms_field_"+b+"_label_pos option[value='inside']").attr("disabled",!0)):a("#ninja_forms_field_"+b+"_label_pos option[value='inside']").attr("disabled",!1)}),a(".ninja-forms-field-list-options").sortable({helper:"clone",handle:".ninja-forms-drag",items:"div",placeholder:"ui-state-highlight"}),a(document).on("change",".ninja-forms-field-list-show-value",function(){var b=this.id.replace("ninja_forms_field_","");b=b.replace("_list_show_value",""),this.checked?a(".ninja-forms-field-"+b+"-list-option-value").show():a(".ninja-forms-field-"+b+"-list-option-value").hide()}),a(document).on("click",".ninja-forms-field-add-list-option",function(e){e.preventDefault();var d=this.id.replace("ninja_forms_field_","");d=d.replace("_list_add_option","");var b=a(".ninja-forms-field-"+d+"-list-option").length,c=a("#ninja_forms_field_"+d+"_list_show_value").prop("checked");c=c?1:0,a.post(ajaxurl,{field_id:d,x:b,hidden_value:c,action:"ninja_forms_add_list_option",nf_ajax_nonce:ninja_forms_settings.nf_ajax_nonce},function(f){a("#ninja_forms_field_"+d+"_list_options").append(f),a("#ninja_forms_field_"+d+"_list_option_"+b).fadeIn(),a(".ninja-forms-field-conditional-value-list").each(function(){a(this).append("<option value='' title='"+b+"'></option>")}),a("[name='ninja_forms_field_"+d+"\\[list\\]\\[options\\]\\["+b+"\\]\\[label\\]']").focus()})}),a(document).on("click",".nf-remove-list-option",function(d){d.preventDefault();var c=this.id.replace("ninja_forms_field_","");c=c.replace("_list_remove_option","");var b=a(this).parent().prop("id");b=b.replace("ninja_forms_field_"+c+"_list_option_",""),a(this).parent().parent().parent().parent().parent().fadeOut(300,function(){a(this).remove()}),a(".ninja-forms-field-conditional-value-list").each(function(){a(this).children("option").each(function(){this.title==b&&a(this).remove()})})}),a(document).on("keydown",".ninja-forms-field-list-option-label",function(c){if(13==c.keyCode){var b=this.id.replace("option_label","add_option");return a("#"+b).click(),!1}}),a(document).on("keydown",".ninja-forms-field-list-option-value",function(c){if(13==c.keyCode){var b=this.id.replace("option_value","add_option");return a("#"+b).click(),!1}}),a(document).on("keydown",".ninja-forms-field-list-option-calc",function(c){if(13==c.keyCode){var b=this.id.replace("option_calc","add_option");return a("#"+b).click(),!1}}),a(document).on("keyup",".ninja-forms-field-list-option-label",function(){var e=this.id.replace("ninja_forms_field_","");e=e.replace("_list_option_label","");var d=this.value,b=a(this).parent().prop("id").replace("ninja_forms_field_"+e+"_list_option_",""),c=a("#ninja_forms_field_"+e+"_list_show_value").prop("checked");a(".ninja-forms-field-conditional-cr-field").each(function(){this.value==e&&a(this).nextElementInDom(".ninja-forms-field-conditional-cr-value-list").each(function(){a(this).children("option").each(function(){this.title==b&&(this.text=d,c||(this.value=d))})})}),a(".ninja-forms-field-"+e+"-conditional-value").children("option").each(function(){this.title==b&&(this.text=d,c||(this.value=d))})}),a(document).on("keyup",".ninja-forms-field-list-option-value",function(){var d=this.id.replace("ninja_forms_field_","");d=d.replace("_list_option_value","");var c=this.value,b=a(this).parent().parent().prop("id").replace("ninja_forms_field_"+d+"_list_option_","");a(".ninja-forms-field-conditional-cr-field").each(function(){this.value==d&&a(this).nextElementInDom(".ninja-forms-field-conditional-cr-value-list").each(function(){a(this).children("option").each(function(){this.title==b&&(this.value=c)})})}),a(".ninja-forms-field-"+d+"-conditional-value").children("option").each(function(){this.title==b&&(this.value=c)})}),a(document).on("change",".ninja-forms-hidden-default-value",function(){var b=a(this).attr("rel");"custom"==this.value?(a("#ninja_forms_field_"+b+"_default_value").val(""),a("#default_value_label_"+b).show(),a("#ninja_forms_field_"+b+"_default_value").focus()):(a("#ninja_forms_field_"+b+"_default_value").val(this.value),a("#default_value_label_"+b).hide())}),a(".cancel-list-import").click(function(b){b.preventDefault(),tb_remove()}),a(document).on("click",".save-list-import",function(d){d.preventDefault();var c=a(this).parent().find("textarea").val(),b=a(this).attr("rel");a.post(ajaxurl,{options:c,field_id:b,action:"ninja_forms_import_list_options",nf_ajax_nonce:ninja_forms_settings.nf_ajax_nonce},function(e){a("#ninja_forms_field_"+b+"_list_options").append(e),tb_remove()})}),a(document).on("change",".ninja-forms-list-populate-term",function(){var b=a(this).attr("rel");""!=this.value?a.post(ajaxurl,{field_id:b,tax_name:this.value,from_ajax:1,action:"ninja_forms_list_terms_checkboxes",nf_ajax_nonce:ninja_forms_settings.nf_ajax_nonce},function(c){a("#ninja_forms_field_"+b+"_exclude_terms").html(c),a("#ninja_forms_field_"+b+"_exclude_terms").show()}):a("#ninja_forms_field_"+b+"_exclude_terms").hide()}),a(document).on("change",".ninja-forms-_profile_pass-reg_password",function(){this.checked?a(".reg-password").parent().parent().show():a(".reg-password").parent().parent().hide()}),a(document).on("click",".ninja-forms-field-add-calc",function(e){e.preventDefault();var d=a(this).attr("rel"),b=a(this).next(".spinner");a(b).show();var c=a("#ninja_forms_field_"+d+"_calc").find(".ninja-forms-calc-row:last").attr("rel");isNaN(c)?c=0:(c=parseInt(c),c+=1),a.post(ajaxurl,{field_id:d,x:c,action:"ninja_forms_add_calc_row",nf_ajax_nonce:ninja_forms_settings.nf_ajax_nonce},function(f){a("#ninja_forms_field_"+d+"_calc").append(f),a(b).hide()})}),a(document).on("click",".ninja-forms-field-remove-calc",function(d){d.preventDefault();var c=a(this).attr("rel"),b=a(this).attr("name");a("#ninja_forms_field_"+c+"_calc_row_"+b).hide(function(){a("#ninja_forms_field_"+c+"_calc_row_"+b).remove()})}),a(document).on("keyup",".ninja-forms-calc-name",function(){var c=a(this).prop("id");c=c.replace("ninja_forms_field_",""),c=c.replace("_calc_name","");var b=this.value;b=ninja_forms_escape_html(b),""==a.trim(b)&&(b="calc_name"),a(this).parent().parent().parent().prev().find(".ninja-forms-field-title").html(b)}),a(document).bind("addField",function(c,b){a(".ninja-forms-calc-select").each(function(){a(this).append('<option value="'+b.new_id+'">'+b.new_id+" - "+b.new_type+"</option>")})}),a(document).bind("removeField",function(c,b){a(".ninja-forms-calc-select option[value='"+b+"']").remove()}),a(document).on("change",".ninja-forms-calc-display",function(){var b=this.id.replace("ninja_forms_field_","");b=b.replace("_calc_display_type",""),"html"==this.value?(a("#ninja_forms_field_"+b+"_calc_text_display").hide(),a("#ninja_forms_field_"+b+"_calc_html_display").show(),a("#ninja_forms_field_"+b+"_calc_extra_display").show(),a("#ninja_forms_field_"+b+"_label").val("")):"text"==this.value?(a("#ninja_forms_field_"+b+"_calc_text_display").show(),a("#ninja_forms_field_"+b+"_calc_html_display").hide(),a("#ninja_forms_field_"+b+"_calc_extra_display").show()):(a("#ninja_forms_field_"+b+"_calc_text_display").hide(),a("#ninja_forms_field_"+b+"_calc_html_display").hide(),a("#ninja_forms_field_"+b+"_calc_extra_display").hide(),a("#ninja_forms_field_"+b+"_label").val(""))}),a(document).on("change",".ninja-forms-calc-method",function(){"auto"==this.value?(a(this).parent().parent().parent().find(".ninja-forms-calculations").hide(),a(this).parent().parent().parent().find(".ninja-forms-eq").hide()):"fields"==this.value?(a(this).parent().parent().parent().find(".ninja-forms-calculations").show(),a(this).parent().parent().parent().find(".ninja-forms-eq").hide()):(a(this).parent().parent().parent().find(".ninja-forms-calculations").hide(),a(this).parent().parent().parent().find(".ninja-forms-eq").show())}),a(document).on("change",".user-info-group-name",function(){"custom"==this.value?(a(this).parent().parent().next().find(".user-info-custom-group").show(),a(this).parent().parent().next().find("label").show()):(a(this).parent().parent().next().find("label").hide(),a(this).parent().parent().next().find(".user-info-custom-group").hide())}),a(document).on("click",".ninja-forms-field-add-fav",function(g){g.preventDefault();var e=this.id.replace("ninja_forms_field_","");e=e.replace("_fav","");var c=new Object,d=this.id;a("[name*='ninja_forms_field_"+e+"']").each(function(){tmp=this.name.replace("ninja_forms_field_"+e+"[",""),tmp=tmp.replace("]",""),"checkbox"==this.type?this.checked&&(c['"'+tmp+'"']=this.value):c['"'+tmp+'"']=this.value});var f=prompt(ninja_forms_settings.add_fav_prompt,"");if(f.length>=1){a.post(ajaxurl,{fav_name:f,field_data:c,field_id:e,action:"ninja_forms_add_fav",nf_ajax_nonce:ninja_forms_settings.nf_ajax_nonce},function(h){a("#ninja_forms_field_"+e+"_fav").removeClass("ninja-forms-field-add-fav"),a("#ninja_forms_field_"+e+"_fav").addClass("ninja-forms-field-remove-fav"),a("#ninja_forms_sidebar_fav_fields").append(h.link_html),a("#ninja_forms_field_"+e+"_title").nextElementInDom(".item-type-name:first").prop("innerHTML",h.fav_name),a("#ninja_forms_field_"+e+"_fav_id").val(h.fav_id)})}else{var b=confirm(ninja_forms_settings.add_fav_error);b&&a("#"+d).click()}}),a(document).on("click",".ninja-forms-field-remove-fav",function(c){c.preventDefault();var b=this.id.replace("ninja_forms_field_","");b=b.replace("_fav",""),a.post(ajaxurl,{field_id:b,action:"ninja_forms_remove_fav",nf_ajax_nonce:ninja_forms_settings.nf_ajax_nonce},function(d){a("#ninja_forms_insert_fav_field_"+d.fav_id+"_p").remove(),a(".ninja-forms-field-fav-id").each(function(){if(this.value==d.fav_id){var e=this.id.replace("ninja_forms_field_","");e=e.replace("_fav_id",""),a("#ninja_forms_field_"+e+"_fav").removeClass("ninja-forms-field-remove-fav"),a("#ninja_forms_field_"+e+"_fav").addClass("ninja-forms-field-add-fav"),a("#ninja_forms_field_"+e+"_title").nextElementInDom(".item-type-name:first").prop("innerHTML",d.type_name)}})})}),a(document).on("click",".ninja-forms-field-add-def",function(g){g.preventDefault();var e=this.id.replace("ninja_forms_field_","");e=e.replace("_def","");var c=new Object,d=this.id;a("[name*='ninja_forms_field_"+e+"']").each(function(){tmp=this.name.replace("ninja_forms_field_"+e+"[",""),tmp=tmp.replace("]",""),"checkbox"==this.type?this.checked&&(c['"'+tmp+'"']=this.value):c['"'+tmp+'"']=this.value});var f=prompt("What would you like to name this Defined Field?","");if(f.length>=1){a.post(ajaxurl,{def_name:f,field_data:c,field_id:e,action:"ninja_forms_add_def",nf_ajax_nonce:ninja_forms_settings.nf_ajax_nonce},function(h){a("#ninja_forms_sidebar_def_fields").append(h.link_html),a("#ninja_forms_field_"+e+"_title").nextElementInDom(".item-type:first").prop("innerHTML",h.def_name),a("#ninja_forms_field_"+e+"_def_id").val(h.def_id)})}else{var b=confirm("You must supply a name for this Defined Field.");b&&a("#"+d).click()}}),a(document).on("click",".ninja-forms-field-remove-def",function(c){c.preventDefault();var b=this.id.replace("ninja_forms_field_","");b=b.replace("_def",""),a.post(ajaxurl,{field_id:b,action:"ninja_forms_remove_def",nf_ajax_nonce:ninja_forms_settings.nf_ajax_nonce},function(d){a("#ninja_forms_insert_def_field_"+d.def_id+"_p").remove()})}),a(document).on("click","#nf_deactivate_all_licenses",function(){var b=confirm(ninja_forms_settings.deactivate_all_licenses_confirm);return b?void 0:!1}),a(".nf-delete-on-uninstall-prompt").nfAdminModal({title:nf_nuke_title,buttons:".nf-delete-on-uninstall-prompt-buttons"}),a(document).on("click","#delete_on_uninstall",function(){this.checked&&(this.checked=!1,a(".nf-delete-on-uninstall-prompt").nfAdminModal("open"))}),a(document).on("click",".nf-delete-on-uninstall-yes",function(b){b.preventDefault(),a("#delete_on_uninstall").attr("checked",!0),a(".nf-delete-on-uninstall-prompt").nfAdminModal("close")}),a("#nf-conversion-reset").nfAdminModal({title:nf_conversion_title,buttons:"#nf-conversion-reset-buttons"}),a(document).on("click",".nf-reset-form-conversion",function(b){b.preventDefault(),a("#nf-conversion-reset").nfAdminModal("open")})});