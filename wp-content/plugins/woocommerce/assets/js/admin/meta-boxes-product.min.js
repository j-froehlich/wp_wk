jQuery(function(d){d(function(){d('[id$="-all"] > ul.categorychecklist').each(function(){var m=d(this);var n=m.find(":checked").first();if(!n.length){return}var k=m.find("input").position().top;var l=n.position().top;m.closest(".tabs-panel").scrollTop(l-k+5)})});d("#upsell_product_data").bind("keypress",function(k){if(k.keyCode===13){return false}});d(".type_box").appendTo("#woocommerce-product-data .hndle span");d(function(){d("#woocommerce-product-data").find(".hndle").unbind("click.postboxes");d("#woocommerce-product-data").on("click",".hndle",function(k){if(d(k.target).filter("input, option, label, select").length){return}d("#woocommerce-product-data").toggleClass("closed")})});d("#catalog-visibility").find(".edit-catalog-visibility").click(function(){if(d("#catalog-visibility-select").is(":hidden")){d("#catalog-visibility-select").slideDown("fast");d(this).hide()}return false});d("#catalog-visibility").find(".save-post-visibility").click(function(){d("#catalog-visibility-select").slideUp("fast");d("#catalog-visibility").find(".edit-catalog-visibility").show();var k=d("input[name=_visibility]:checked").attr("data-label");if(d("input[name=_featured]").is(":checked")){k=k+", "+woocommerce_admin_meta_boxes.featured_label;d("input[name=_featured]").attr("checked","checked")}d("#catalog-visibility-display").text(k);return false});d("#catalog-visibility").find(".cancel-post-visibility").click(function(){d("#catalog-visibility-select").slideUp("fast");d("#catalog-visibility").find(".edit-catalog-visibility").show();var m=d("#current_visibility").val();var k=d("#current_featured").val();d("input[name=_visibility]").removeAttr("checked");d("input[name=_visibility][value="+m+"]").attr("checked","checked");var l=d("input[name=_visibility]:checked").attr("data-label");if("yes"===k){l=l+", "+woocommerce_admin_meta_boxes.featured_label;d("input[name=_featured]").attr("checked","checked")}else{d("input[name=_featured]").removeAttr("checked")}d("#catalog-visibility-display").text(l);return false});d("select#product-type").change(function(){var k=d(this).val();if("variable"===k){d("input#_manage_stock").change();d("input#_downloadable").prop("checked",false);d("input#_virtual").removeAttr("checked")}else{if("grouped"===k){d("input#_downloadable").prop("checked",false);d("input#_virtual").removeAttr("checked")}else{if("external"===k){d("input#_downloadable").prop("checked",false);d("input#_virtual").removeAttr("checked")}}}i();d("ul.wc-tabs li:visible").eq(0).find("a").click();d(document.body).trigger("woocommerce-product-type-change",k,d(this))}).change();d("input#_downloadable, input#_virtual").change(function(){i()});function i(){var m=d("select#product-type").val();var k=d("input#_virtual:checked").length;var o=d("input#_downloadable:checked").length;var n=".hide_if_downloadable, .hide_if_virtual";var l=".show_if_downloadable, .show_if_virtual";d.each(woocommerce_admin_meta_boxes.product_types,function(p,q){n=n+", .hide_if_"+q;l=l+", .show_if_"+q});d(n).show();d(l).hide();if(o){d(".show_if_downloadable").show()}if(k){d(".show_if_virtual").show()}d(".show_if_"+m).show();if(o){d(".hide_if_downloadable").hide()}if(k){d(".hide_if_virtual").hide()}d(".hide_if_"+m).hide();d("input#_manage_stock").change();d(".woocommerce_options_panel").each(function(){var p=d(this).children(".options_group");if(0===p.length){return}var q=p.filter(function(){return"none"===d(this).css("display")});if(q.length===p.length){var r=d(this).prop("id");d(".product_data_tabs").find('li a[href="#'+r+'"]').parent().hide()}})}d(".sale_price_dates_fields").each(function(){var l=d(this);var m=false;var k=l.closest("div, table");l.find("input").each(function(){if(""!==d(this).val()){m=true}});if(m){k.find(".sale_schedule").hide();k.find(".sale_price_dates_fields").show()}else{k.find(".sale_schedule").show();k.find(".sale_price_dates_fields").hide()}});d("#woocommerce-product-data").on("click",".sale_schedule",function(){var k=d(this).closest("div, table");d(this).hide();k.find(".cancel_sale_schedule").show();k.find(".sale_price_dates_fields").show();return false});d("#woocommerce-product-data").on("click",".cancel_sale_schedule",function(){var k=d(this).closest("div, table");d(this).hide();k.find(".sale_schedule").show();k.find(".sale_price_dates_fields").hide();k.find(".sale_price_dates_fields").find("input").val("");return false});d("#woocommerce-product-data").on("click",".downloadable_files a.insert",function(){d(this).closest(".downloadable_files").find("tbody").append(d(this).data("row"));return false});d("#woocommerce-product-data").on("click",".downloadable_files a.delete",function(){d(this).closest("tr").remove();return false});d("input#_manage_stock").change(function(){if(d(this).is(":checked")){d("div.stock_fields").show()}else{d("div.stock_fields").hide()}}).change();function c(m){var l=d(m).next().is(".hasDatepicker")?"minDate":"maxDate",n="minDate"===l?d(m).next():d(m).prev(),k=d(m).datepicker("getDate");d(n).datepicker("option",l,k);d(m).change()}d(".sale_price_dates_fields").each(function(){d(this).find("input").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:true,onSelect:function(){c(d(this))}});d(this).find("input").each(function(){c(d(this))})});var j=d(".product_attributes").find(".woocommerce_attribute").get();j.sort(function(l,k){var n=parseInt(d(l).attr("rel"),10);var m=parseInt(d(k).attr("rel"),10);return(n<m)?-1:(n>m)?1:0});d(j).each(function(k,l){d(".product_attributes").append(l)});function e(){d(".product_attributes .woocommerce_attribute").each(function(k,l){d(".attribute_position",l).val(parseInt(d(l).index(".product_attributes .woocommerce_attribute"),10))})}d(".product_attributes .woocommerce_attribute").each(function(k,l){if(d(l).css("display")!=="none"&&d(l).is(".taxonomy")){d("select.attribute_taxonomy").find('option[value="'+d(l).data("taxonomy")+'"]').attr("disabled","disabled")}});d("button.add_attribute").on("click",function(){var l=d(".product_attributes .woocommerce_attribute").length;var m=d("select.attribute_taxonomy").val();var o=d(this).closest("#product_attributes");var k=o.find(".product_attributes");var p=d("select#product-type").val();var n={action:"woocommerce_add_attribute",taxonomy:m,i:l,security:woocommerce_admin_meta_boxes.add_attribute_nonce};o.block({message:null,overlayCSS:{background:"#fff",opacity:0.6}});d.post(woocommerce_admin_meta_boxes.ajax_url,n,function(q){k.append(q);if("variable"!==p){k.find(".enable_variation").hide()}d(document.body).trigger("wc-enhanced-select-init");e();o.unblock();d(document.body).trigger("woocommerce_added_attribute")});if(m){d("select.attribute_taxonomy").find('option[value="'+m+'"]').attr("disabled","disabled");d("select.attribute_taxonomy").val("")}return false});d(".product_attributes").on("blur","input.attribute_name",function(){d(this).closest(".woocommerce_attribute").find("strong.attribute_name").text(d(this).val())});d(".product_attributes").on("click","button.select_all_attributes",function(){d(this).closest("td").find("select option").attr("selected","selected");d(this).closest("td").find("select").change();return false});d(".product_attributes").on("click","button.select_no_attributes",function(){d(this).closest("td").find("select option").removeAttr("selected");d(this).closest("td").find("select").change();return false});d(".product_attributes").on("click",".remove_row",function(){if(window.confirm(woocommerce_admin_meta_boxes.remove_attribute)){var k=d(this).parent().parent();if(k.is(".taxonomy")){k.find("select, input[type=text]").val("");k.hide();d("select.attribute_taxonomy").find('option[value="'+k.data("taxonomy")+'"]').removeAttr("disabled")}else{k.find("select, input[type=text]").val("");k.hide();e()}}return false});d(".product_attributes").sortable({items:".woocommerce_attribute",cursor:"move",axis:"y",handle:"h3",scrollSensitivity:40,forcePlaceholderSize:true,helper:"clone",opacity:0.65,placeholder:"wc-metabox-sortable-placeholder",start:function(k,l){l.item.css("background-color","#f6f6f6")},stop:function(k,l){l.item.removeAttr("style");e()}});d(".product_attributes").on("click","button.add_new_attribute",function(){d(".product_attributes").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}});var n=d(this).closest(".woocommerce_attribute");var l=n.data("taxonomy");var k=window.prompt(woocommerce_admin_meta_boxes.new_attribute_prompt);if(k){var m={action:"woocommerce_add_new_attribute",taxonomy:l,term:k,security:woocommerce_admin_meta_boxes.add_attribute_nonce};d.post(woocommerce_admin_meta_boxes.ajax_url,m,function(o){if(o.error){window.alert(o.error)}else{if(o.slug){n.find("select.attribute_values").append('<option value="'+o.term_id+'" selected="selected">'+o.name+"</option>");n.find("select.attribute_values").change()}}d(".product_attributes").unblock()})}else{d(".product_attributes").unblock()}return false});d(".save_attributes").on("click",function(){d("#woocommerce-product-data").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}});var k={post_id:woocommerce_admin_meta_boxes.post_id,product_type:d("#product-type").val(),data:d(".product_attributes").find("input, select, textarea").serialize(),action:"woocommerce_save_attributes",security:woocommerce_admin_meta_boxes.save_attributes_nonce};d.post(woocommerce_admin_meta_boxes.ajax_url,k,function(){var l=window.location.toString();l=l.replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&");d("#variable_product_options").load(l+" #variable_product_options_inner",function(){d("#variable_product_options").trigger("reload")})})});var h;var b;d(document.body).on("click",".upload_file_button",function(l){var k=d(this);b=k.closest("tr").find("td.file_url input");l.preventDefault();if(h){h.open();return}var m=[new wp.media.controller.Library({library:wp.media.query(),multiple:true,title:k.data("choose"),priority:20,filterable:"uploaded"})];h=wp.media.frames.downloadable_file=wp.media({title:k.data("choose"),library:{type:""},button:{text:k.data("update")},multiple:true,states:m});h.on("select",function(){var n="";var o=h.state().get("selection");o.map(function(p){p=p.toJSON();if(p.url){n=p.url}});b.val(n).change()});h.on("ready",function(){h.uploader.options.uploader.params={type:"downloadable_product"}});h.open()});d(".downloadable_files tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:true,helper:"clone",opacity:0.65});var a;var g=d("#product_image_gallery");var f=d("#product_images_container").find("ul.product_images");d(".add_product_images").on("click","a",function(l){var k=d(this);l.preventDefault();if(a){a.open();return}a=wp.media.frames.product_gallery=wp.media({title:k.data("choose"),button:{text:k.data("update")},states:[new wp.media.controller.Library({title:k.data("choose"),filterable:"all",multiple:true})]});a.on("select",function(){var m=a.state().get("selection");var n=g.val();m.map(function(p){p=p.toJSON();if(p.id){n=n?n+","+p.id:p.id;var o=p.sizes&&p.sizes.thumbnail?p.sizes.thumbnail.url:p.url;f.append('<li class="image" data-attachment_id="'+p.id+'"><img src="'+o+'" /><ul class="actions"><li><a href="#" class="delete" title="'+k.data("delete")+'">'+k.data("text")+"</a></li></ul></li>")}});g.val(n)});a.open()});f.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:true,forceHelperSize:false,helper:"clone",opacity:0.65,placeholder:"wc-metabox-sortable-placeholder",start:function(k,l){l.item.css("background-color","#f6f6f6")},stop:function(k,l){l.item.removeAttr("style")},update:function(){var k="";d("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var l=d(this).attr("data-attachment_id");k=k+l+","});g.val(k)}});d("#product_images_container").on("click","a.delete",function(){d(this).closest("li.image").remove();var k="";d("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var l=d(this).attr("data-attachment_id");k=k+l+","});g.val(k);d("#tiptip_holder").removeAttr("style");d("#tiptip_arrow").removeAttr("style");return false})});