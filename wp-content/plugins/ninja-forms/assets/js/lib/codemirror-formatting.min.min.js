!function(){function b(h){for(var j=[/for\s*?\((.*?)\)/,/\"(.*?)(\"|$)/,/\'(.*?)(\'|$)/,/\/\*(.*?)(\*\/|$)/,/\/\/.*/],g=[],f=0;f<j.length;f++){for(var i=0;i<h.length;){var d=h.substr(i).match(j[f]);if(null==d){break}g.push({start:i+d.index,end:i+d.index+d[0].length}),i+=d.index+Math.max(1,d[0].length)}}return g.sort(function(k,l){return k.start-l.start}),g}function c(d,f){return CodeMirror.innerMode(d.getMode(),d.getTokenAt(f).state).mode}function a(q,h,f,x){var g=q.getMode(),w=q.getLine(h);if(null==x&&(x=w.length),!g.innerMode){return[{from:f,to:x,mode:g}]}var p=q.getTokenAt({line:h,ch:f}).state,y=CodeMirror.innerMode(g,p).mode,v=[],u=new CodeMirror.StringStream(w);for(u.pos=u.start=f;;){g.token(u,p);var k=CodeMirror.innerMode(g,p).mode;if(k!=y){var j=u.start;"xml"==y.name&&">"==w.charAt(u.pos-1)&&(j=u.pos),v.push({from:f,to:j,mode:y}),f=j,y=k}if(u.pos>=x){break}u.start=u.pos}return x>f&&v.push({from:f,to:x,mode:y}),v}CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(d){return d.replace(new RegExp("(;|\\{|\\})([^\r\n])","g"),"$1\n$2")}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(j){var g=0,f=this.jsonMode?function(i){return i.replace(/([,{])/g,"$1\n").replace(/}/g,"\n}")}:function(i){return i.replace(/(;|\{|\})([^\r\n;])/g,"$1\n$2")},h=b(j),d="";if(null!=h){for(var e=0;e<h.length;e++){h[e].start>g&&(d+=f(j.substring(g,h[e].start)),g=h[e].start),h[e].start<=g&&h[e].end>=g&&(d+=j.substring(g,h[e].end),g=h[e].end)}g<j.length&&(d+=f(j.substr(g)))}else{d=f(j)}return d.replace(/^\n*|\n*$/,"")}}),CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",wordWrapChars:[">"],autoFormatLineBreaks:function(j){for(var l=j.split("\n"),h=new RegExp("(^\\s*?<|^[^<]*?)(.+)(>\\s*?$|[^>]*?$)"),g=new RegExp("<","g"),k=new RegExp("(>)([^\r\n])","g"),d=0;d<l.length;d++){var f=l[d].match(h);null!=f&&f.length>3&&(l[d]=f[1]+f[2].replace(g,"\n$&").replace(k,"$1\n$2")+f[3])}return l.join("\n")}}),CodeMirror.defineExtension("commentRange",function(h,g,f){var i=c(this,g),d=this;this.operation(function(){if(h){d.replaceRange(i.commentEnd,f),d.replaceRange(i.commentStart,g),g.line==f.line&&g.ch==f.ch&&d.setCursor(g.line,g.ch+i.commentStart.length)}else{var k=d.getRange(g,f),e=k.indexOf(i.commentStart),j=k.lastIndexOf(i.commentEnd);e>-1&&j>-1&&j>e&&(k=k.substr(0,e)+k.substring(e+i.commentStart.length,j)+k.substr(j+i.commentEnd.length)),d.replaceRange(k,g,f)}})}),CodeMirror.defineExtension("autoIndentRange",function(f,g){var d=this;this.operation(function(){for(var e=f.line;e<=g.line;e++){d.indentLine(e,"smart")}})}),CodeMirror.defineExtension("autoFormatRange",function(f,g){var d=this;d.operation(function(){for(var e=f.line,t=g.line;t>=e;++e){for(var k={line:e,ch:e==f.line?f.ch:0},w={line:e,ch:e==t?g.ch:null},r=a(d,e,k.ch,w.ch),q="",j=d.getRange(k,w),h=0;h<r.length;++h){var v=r.length>1?j.slice(r[h].from,r[h].to):j;q&&(q+="\n"),q+=r[h].mode.autoFormatLineBreaks?r[h].mode.autoFormatLineBreaks(v):j}if(q!=j){for(var p=0,n=q.indexOf("\n");-1!=n;n=q.indexOf("\n",n+1),++p){}d.replaceRange(q,k,w),e+=p,t+=p}}for(var e=f.line+1;t>=e;++e){d.indentLine(e,"smart")}d.setSelection(f,d.getCursor(!1))})})}();