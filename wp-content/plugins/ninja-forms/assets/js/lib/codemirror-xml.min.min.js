CodeMirror.defineMode("xml",function(K,ab){function P(c,h){function d(e){return h.tokenize=e,e(c,h)}var i=c.next();if("<"==i){if(c.eat("!")){return c.eat("[")?c.match("CDATA[")?d(af("atom","]]>")):null:c.match("--")?d(af("comment","-->")):c.match("DOCTYPE",!0,!0)?(c.eatWhile(/[\w\._\-]/),d(X(1))):null}if(c.eat("?")){return c.eatWhile(/[\w\._\-]/),h.tokenize=af("meta","?>"),"meta"}var a=c.eat("/");ae="";for(var b;b=c.eat(/[^\s\u00a0=<>\"\'\/?]/);){ae+=b}return ae?(O=a?"closeTag":"openTag",h.tokenize=S,"tag"):"tag error"}if("&"==i){var g;return g=c.eat("#")?c.eat("x")?c.eatWhile(/[a-fA-F\d]/)&&c.eat(";"):c.eatWhile(/[\d]/)&&c.eat(";"):c.eatWhile(/[\w\.\-:]/)&&c.eat(";"),g?"atom":"error"}return c.eatWhile(/[^&<]/),null}function S(c,d){var f=c.next();if(">"==f||"/"==f&&c.eat(">")){return d.tokenize=P,O=">"==f?"endTag":"selfcloseTag","tag"}if("="==f){return O="equals",null}if("<"==f){d.tokenize=P;var b=d.tokenize(c,d);return b?b+" error":"error"}return/[\'\"]/.test(f)?(d.tokenize=R(f),d.stringStartCol=c.column(),d.tokenize(c,d)):(c.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function R(a){var b=function(d,c){for(;!d.eol();){if(d.next()==a){c.tokenize=S;break}}return"string"};return b.isInAttribute=!0,b}function af(a,b){return function(d,c){for(;!d.eol();){if(d.match(b)){c.tokenize=P;break}d.next()}return a}}function X(a){return function(b,d){for(var c;null!=(c=b.next());){if("<"==c){return d.tokenize=X(a+1),d.tokenize(b,d)}if(">"==c){if(1==a){d.tokenize=P;break}return d.tokenize=X(a-1),d.tokenize(b,d)}}return"meta"}}function V(){for(var a=arguments.length-1;a>=0;a--){G.cc.push(arguments[a])}}function J(){return V.apply(null,arguments),!0}function aa(a,c){var b=q.doNotIndent.hasOwnProperty(a)||G.context&&G.context.noIndent;G.context={prev:G.context,tagName:a,indent:G.indented,startOfLine:c,noIndent:b}}function ac(){G.context&&(G.context=G.context.prev)}function ad(a){if("openTag"==a){return G.tagName=ae,G.tagStart=j.column(),J(Q,L(G.startOfLine))}if("closeTag"==a){var b=!1;return G.context?G.context.tagName!=ae&&(q.implicitlyClosed.hasOwnProperty(G.context.tagName.toLowerCase())&&ac(),b=!G.context||G.context.tagName!=ae):b=!0,b&&(H="error"),J(U(b))}return J()}function L(a){return function(c){var b=G.tagName;return G.tagName=G.tagStart=null,"selfcloseTag"==c||"endTag"==c&&q.autoSelfClosers.hasOwnProperty(b.toLowerCase())?(Z(b.toLowerCase()),J()):"endTag"==c?(Z(b.toLowerCase()),aa(b,a),J()):J()}}function U(a){return function(b){return a&&(H="error"),"endTag"==b?(ac(),J()):(H="error",J(arguments.callee))}}function Z(a){for(var b;;){if(!G.context){return}if(b=G.context.tagName.toLowerCase(),!q.contextGrabbers.hasOwnProperty(b)||!q.contextGrabbers[b].hasOwnProperty(a)){return}ac()}}function Q(a){return"word"==a?(H="attribute",J(Y,Q)):"endTag"==a||"selfcloseTag"==a?V():(H="error",J(Q))}function Y(a){if("equals"==a){return J(F,Q)}if(q.allowMissing){if("word"==a){return H="attribute",J(Y,Q)}}else{H="error"}return"endTag"==a||"selfcloseTag"==a?V():J()}function F(a){return"string"==a?J(W):"word"==a&&q.allowUnquoted?(H="string",J()):(H="error","endTag"==a||"selfCloseTag"==a?V():J())}function W(a){return"string"==a?J(W):V()}var ae,O,G,j,H,B=K.indentUnit,A=ab.multilineTagIndentFactor||1,D=ab.multilineTagIndentPastTag||!0,q=ab.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},E=ab.alignCDATA;return{startState:function(){return{tokenize:P,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(a,c){if(!c.tagName&&a.sol()&&(c.startOfLine=!0,c.indented=a.indentation()),a.eatSpace()){return null}H=O=ae=null;var b=c.tokenize(a,c);if(c.type=O,(b||O)&&"comment"!=b){for(G=c,j=a;;){var d=c.cc.pop()||ad;if(d(O||b)){break}}}return c.startOfLine=!1,H&&(b="error"==H?b+" error":H),b},indent:function(c,d,f){var b=c.context;if(c.tokenize.isInAttribute){return c.stringStartCol+1}if(c.tokenize!=S&&c.tokenize!=P||b&&b.noIndent){return f?f.match(/^(\s*)/)[0].length:0}if(c.tagName){return D?c.tagStart+c.tagName.length+2:c.tagStart+B*A}if(E&&/<!\[CDATA\[/.test(d)){return 0}for(b&&/^<\//.test(d)&&(b=b.prev);b&&!b.startOfLine;){b=b.prev}return b?b.indent+B:0},electricChars:"/",blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:ab.htmlMode?"html":"xml",helperType:ab.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});