(function(a,b){if(typeof define==="function"){define("pikaday-responsive",["exports"],function(c){return(c["default"]=b())})}else{if(typeof module==="object"){module.exports=b()}else{a.pikadayResponsive=b()}}}(this,function(){var b=jQuery;if(!moment){console.error("You need to load moment.js in order to use pikaday-responsive.");return}if(!jQuery){console.error("You need to load jQuery in order to use pikaday-responsive.");return}if(!Pikaday){console.error("You need to load pikaday in order to use pikaday-responsive.");return}var a={format:"YYYY-MM-DD",outputFormat:"YYYY-MM-DD",checkIfNativeDate:function(){return false},classes:"",placeholder:"",pikadayOptions:{},dayOffset:0};return function(d,m){var l=b(d);var f=b.extend({},a,m);var k;var i;var c;var h={pikaday:null,value:null,date:null,element:l[0]};if(!l.length||l[0].tagName!=="INPUT"){console.error("pikadayResponsive expects an input-field as its first element.",l[0]);return false}l.attr("type","hidden");l.wrap("<div class='pikaday__container'></div>");k=l.parent(".pikaday__container");if(f.checkIfNativeDate()){i=b("<input type='date' class='pikaday__invisible' placeholder='"+f.placeholder+"' />");k.append(i);c=b("<input type='text' readonly='readonly' class='pikaday__display pikaday__display--native "+f.classes+"' placeholder='"+f.placeholder+"' />");k.append(c);i.on("change",function(){var n=b(this).val();c.removeClass("is-empty");if(!n){h.date=null;h.value=null;c.addClass("is-empty")}else{h.date=moment(n,"YYYY-MM-DD");h.value=h.date.format(f.outputFormat)}if(h.value*1===parseInt(h.value,10)){h.value*=1}l.val(h.value);if(h.date){c.val(h.date.format(f.format))}else{c.val(null)}l.trigger("change");l.trigger("change-date",[h])})}else{i=b("<input type='text' class='pikaday__display pikaday__display--pikaday "+f.classes+"' placeholder='"+f.placeholder+"' />");k.append(i);var g=false;var e=null;h.pikaday=new Pikaday(b.extend({},f.pikadayOptions,{field:i[0],format:f.format}));i.on("change",function(){if(g){return}g=true;e=window.setTimeout(function(){g=false},10);var n=b(this).val();i.removeClass("is-empty");if(!n){h.date=null;h.value=null;i.addClass("is-empty")}else{h.date=moment(n,f.format);h.date.add(f.dayOffset,"day");h.value=h.date.format(f.outputFormat);b(this).val(h.date.format(f.format))}if(h.value*1===parseInt(h.value,10)){h.value*=1}l.val(h.value);setTimeout(function(){l.trigger("change");l.trigger("change-date",[h])},1)})}var j=function(n,o){if(!n){if(h.pikaday){h.pikaday.setDate(null)}else{i.val(null);i.trigger("change")}return null}if(typeof n==="object"&&typeof n.format!=="function"){n=moment(n)}if(typeof n==="string"){if(typeof o==="undefined"||!o){o=f.outputFormat}n=moment(n,o)}if(typeof n==="number"){n=moment(n)}if(h.pikaday){h.pikaday.setMoment(n)}else{i.val(n.format("YYYY-MM-DD"));i.trigger("change")}return n};if(l.val()){j(l.val())}h.setDate=j;return h}}));