"use strict";(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){var c={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},b={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};a.defineMode("xml",function(R,P){function W(f,k){function e(l){k.tokenize=l;return l(f,k)}var h=f.next();if("<"==h){if(f.eat("!")){return f.eat("[")?f.match("CDATA[")?e(N("atom","]]\x3e")):null:f.match("--")?e(N("comment","--\x3e")):f.match("DOCTYPE",!0,!0)?(f.eatWhile(/[\w\._\-]/),e(L(1))):null}if(f.eat("?")){return f.eatWhile(/[\w\._\-]/),k.tokenize=N("meta","?>"),"meta"}U=f.eat("/")?"closeTag":"openTag";k.tokenize=K;return"tag bracket"}if("&"==h){return(f.eat("#")?f.eat("x")?f.eatWhile(/[a-fA-F\d]/)&&f.eat(";"):f.eatWhile(/[\d]/)&&f.eat(";"):f.eatWhile(/[\w\.\-:]/)&&f.eat(";"))?"atom":"error"}f.eatWhile(/[^&<]/);return null}function K(f,h){var e=f.next();if(">"==e||"/"==e&&f.eat(">")){return h.tokenize=W,U=">"==e?"endTag":"selfcloseTag","tag bracket"}if("="==e){return U="equals",null}if("<"==e){return h.tokenize=W,h.state=T,h.tagName=h.tagStart=null,(f=h.tokenize(f,h))?f+" tag error":"tag error"}if(/[\'\"]/.test(e)){return h.tokenize=J(e),h.stringStartCol=f.column(),h.tokenize(f,h)}f.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}function J(e){var f=function(h,k){for(;!h.eol();){if(h.next()==e){k.tokenize=K;break}}return"string"};f.isInAttribute=!0;return f}function N(e,f){return function(h,k){for(;!h.eol();){if(h.match(f)){k.tokenize=W;break}h.next()}return e}}function L(e){return function(k,f){for(var h;null!=(h=k.next());){if("<"==h){return f.tokenize=L(e+1),f.tokenize(k,f)}if(">"==h){if(1==e){f.tokenize=W;break}else{return f.tokenize=L(e-1),f.tokenize(k,f)}}}return"meta"}}function D(f,h,e){this.prev=f.context;this.tagName=h;this.indent=f.indented;this.startOfLine=e;if(Y.doNotIndent.hasOwnProperty(h)||f.context&&f.context.noIndent){this.noIndent=!0}}function E(e){e.context&&(e.context=e.context.prev)}function g(f,h){for(var e;f.context;){e=f.context.tagName;if(!Y.contextGrabbers.hasOwnProperty(e)||!Y.contextGrabbers[e].hasOwnProperty(h)){break}E(f)}}function T(f,h,e){return"openTag"==f?(e.tagStart=h.column(),d):"closeTag"==f?o:T}function d(f,h,e){if("word"==f){return e.tagName=h.current(),X="tag",V}X="error";return d}function o(f,h,e){if("word"==f){f=h.current();e.context&&e.context.tagName!=f&&Y.implicitlyClosed.hasOwnProperty(e.context.tagName)&&E(e);if(e.context&&e.context.tagName==f||!1===Y.matchClosing){return X="tag",s}X="tag error";return Q}X="error";return Q}function s(f,h,e){if("endTag"!=f){return X="error",s}E(e);return T}function Q(f,h,e){X="error";return s(f,h,e)}function V(f,k,e){if("word"==f){return X="attribute",j}if("endTag"==f||"selfcloseTag"==f){k=e.tagName;var h=e.tagStart;e.tagName=e.tagStart=null;"selfcloseTag"==f||Y.autoSelfClosers.hasOwnProperty(k)?g(e,k):(g(e,k),e.context=new D(e,k,h==e.indented));return T}X="error";return V}function j(f,h,e){if("equals"==f){return O}Y.allowMissing||(X="error");return V(f,h,e)}function O(f,h,e){if("string"==f){return M}if("word"==f&&Y.allowUnquoted){return X="string",V}X="error";return V(f,h,e)}function M(f,h,e){return"string"==f?M:V(f,h,e)}var i=R.indentUnit,Y={};R=P.htmlMode?c:b;for(var S in R){Y[S]=R[S]}for(S in P){Y[S]=P[S]}var U,X;W.isInText=!0;return{startState:function(e){var f={tokenize:W,state:T,indented:e||0,tagName:null,tagStart:null,context:null};null!=e&&(f.baseIndent=e);return f},token:function(f,h){!h.tagName&&f.sol()&&(h.indented=f.indentation());if(f.eatSpace()){return null}U=null;var e=h.tokenize(f,h);(e||U)&&"comment"!=e&&(X=null,h.state=h.state(U||e,f,h),X&&(e="error"==X?e+" error":X));return e},indent:function(f,k,e){var h=f.context;if(f.tokenize.isInAttribute){return f.tagStart==f.indented?f.stringStartCol+1:f.indented+i}if(h&&h.noIndent){return a.Pass}if(f.tokenize!=K&&f.tokenize!=W){return e?e.match(/^(\s*)/)[0].length:0}if(f.tagName){return !1!==Y.multilineTagIndentPastTag?f.tagStart+f.tagName.length+2:f.tagStart+i*(Y.multilineTagIndentFactor||1)}if(Y.alignCDATA&&/<!\[CDATA\[/.test(k)){return 0}if((k=k&&/^<(\/)?([\w_:\.-]*)/.exec(k))&&k[1]){for(;h;){if(h.tagName==k[2]){h=h.prev;break}else{if(Y.implicitlyClosed.hasOwnProperty(h.tagName)){h=h.prev}else{break}}}}else{if(k){for(;h;){if((e=Y.contextGrabbers[h.tagName])&&e.hasOwnProperty(k[2])){h=h.prev}else{break}}}}for(;h&&h.prev&&!h.startOfLine;){h=h.prev}return h?h.indent+i:f.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:Y.htmlMode?"html":"xml",helperType:Y.htmlMode?"html":"xml",skipAttribute:function(e){e.state==O&&(e.state=V)}}});a.defineMIME("text/xml","xml");a.defineMIME("application/xml","xml");a.mimeModes.hasOwnProperty("text/html")||a.defineMIME("text/html",{name:"xml",htmlMode:!0})});