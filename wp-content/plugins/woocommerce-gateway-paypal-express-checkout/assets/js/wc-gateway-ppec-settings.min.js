(function(e,d,a){var c={frames:[],init:function(){e("button.image_upload").on("click",this.onClickUploadButton);e("button.image_remove").on("click",this.removeProductImage)},onClickUploadButton:function(h){h.preventDefault();var i=e(h.target).data();if("undefined"!==typeof c.frames[i.fieldId]){c.frames[i.fieldId].open();return false}c.frames[i.fieldId]=wp.media({title:i.mediaFrameTitle,button:{text:i.mediaFrameButton},multiple:false});var g={fieldId:i.fieldId};c.frames[i.fieldId].on("select",c.onSelectAttachment,g);c.frames[i.fieldId].open()},onSelectAttachment:function(){var i=c.frames[this.fieldId].state().get("selection").first().toJSON();var h=e("#"+this.fieldId);var g=e("<img />").attr("src",b(i));h.siblings(".image-preview-wrapper").html(g);h.val(i.id);h.siblings("button.image_remove").show();h.siblings("button.image_upload").hide()},removeProductImage:function(h){h.preventDefault();var j=e(h.target);var i=j.data();var g=e("#"+i.fieldId);g.val("");g.siblings(".image-preview-wrapper").html(" ");j.hide();g.siblings("button.image_upload").show()}};function b(g){if(g.sizes&&g.sizes.medium){return g.sizes.medium.url}if(g.sizes&&g.sizes.thumbnail){return g.sizes.thumbnail.url}return g.url}function f(){c.init()}e(f)}(jQuery));