jQuery(function(c){if(typeof wc_single_product_params==="undefined"){return false}c("body").on("init",".wc-tabs-wrapper, .woocommerce-tabs",function(){c(".wc-tab, .woocommerce-tabs .panel:not(.panel .panel)").hide();var a=window.location.hash;var b=window.location.href;var f=c(this).find(".wc-tabs, ul.tabs").first();if(a.toLowerCase().indexOf("comment-")>=0||a==="#reviews"||a==="#tab-reviews"){f.find("li.reviews_tab a").click()}else{if(b.indexOf("comment-page-")>0||b.indexOf("cpage=")>0){f.find("li.reviews_tab a").click()}else{if(a==="#tab-additional_information"){f.find("li.additional_information_tab a").click()}else{f.find("li:first a").click()}}}}).on("click",".wc-tabs li a, ul.tabs li a",function(a){a.preventDefault();var b=c(this);var e=b.closest(".wc-tabs-wrapper, .woocommerce-tabs");var h=e.find(".wc-tabs, ul.tabs");h.find("li").removeClass("active");e.find(".wc-tab, .panel:not(.panel .panel)").hide();b.closest("li").addClass("active");e.find(b.attr("href")).show()}).on("click","a.woocommerce-review-link",function(){c(".reviews_tab a").click();return true}).on("init","#rating",function(){c("#rating").hide().before('<p class="stars"><span><a class="star-1" href="#">1</a><a class="star-2" href="#">2</a><a class="star-3" href="#">3</a><a class="star-4" href="#">4</a><a class="star-5" href="#">5</a></span></p>')}).on("click","#respond p.stars a",function(){var f=c(this),b=c(this).closest("#respond").find("#rating"),a=c(this).closest(".stars");b.val(f.text());f.siblings("a").removeClass("active");f.addClass("active");a.addClass("selected");return false}).on("click","#respond #submit",function(){var a=c(this).closest("#respond").find("#rating"),b=a.val();if(a.length>0&&!b&&wc_single_product_params.review_rating_required==="yes"){window.alert(wc_single_product_params.i18n_required_rating_text);return false}});c(".wc-tabs-wrapper, .woocommerce-tabs, #rating").trigger("init");var d=function(b,a){this.$target=b;this.$images=c(".woocommerce-product-gallery__image",b);if(0===this.$images.length){this.$target.css("opacity",1);return}b.data("product_gallery",this);this.flexslider_enabled=c.isFunction(c.fn.flexslider)&&wc_single_product_params.flexslider_enabled;this.zoom_enabled=c.isFunction(c.fn.zoom)&&wc_single_product_params.zoom_enabled;this.photoswipe_enabled=typeof PhotoSwipe!=="undefined"&&wc_single_product_params.photoswipe_enabled;if(a){this.flexslider_enabled=false===a.flexslider_enabled?false:this.flexslider_enabled;this.zoom_enabled=false===a.zoom_enabled?false:this.zoom_enabled;this.photoswipe_enabled=false===a.photoswipe_enabled?false:this.photoswipe_enabled}if(1===this.$images.length){this.flexslider_enabled=false}this.initFlexslider=this.initFlexslider.bind(this);this.initZoom=this.initZoom.bind(this);this.initZoomForTarget=this.initZoomForTarget.bind(this);this.initPhotoswipe=this.initPhotoswipe.bind(this);this.onResetSlidePosition=this.onResetSlidePosition.bind(this);this.getGalleryItems=this.getGalleryItems.bind(this);this.openPhotoswipe=this.openPhotoswipe.bind(this);if(this.flexslider_enabled){this.initFlexslider();b.on("woocommerce_gallery_reset_slide_position",this.onResetSlidePosition)}else{this.$target.css("opacity",1)}if(this.zoom_enabled){this.initZoom();b.on("woocommerce_gallery_init_zoom",this.initZoom)}if(this.photoswipe_enabled){this.initPhotoswipe()}};d.prototype.initFlexslider=function(){var b=this.$target,a=this;b.flexslider({selector:".woocommerce-product-gallery__wrapper > .woocommerce-product-gallery__image",animation:wc_single_product_params.flexslider.animation,smoothHeight:wc_single_product_params.flexslider.smoothHeight,directionNav:wc_single_product_params.flexslider.directionNav,controlNav:wc_single_product_params.flexslider.controlNav,slideshow:wc_single_product_params.flexslider.slideshow,animationSpeed:wc_single_product_params.flexslider.animationSpeed,animationLoop:wc_single_product_params.flexslider.animationLoop,allowOneSlide:wc_single_product_params.flexslider.allowOneSlide,start:function(){b.css("opacity",1)},after:function(f){a.initZoomForTarget(a.$images.eq(f.currentSlide))}});c(".woocommerce-product-gallery__wrapper .woocommerce-product-gallery__image:eq(0) .wp-post-image").one("load",function(){var f=c(this);if(f){setTimeout(function(){var h=f.closest(".woocommerce-product-gallery__image").height();var e=f.closest(".flex-viewport");if(h&&e){e.height(h)}},100)}}).each(function(){if(this.complete){c(this).load()}})};d.prototype.initZoom=function(){this.initZoomForTarget(this.$images.first())};d.prototype.initZoomForTarget=function(a){if(!this.zoom_enabled){return false}var h=this.$target.width(),g=false;c(a).each(function(j,e){var f=c(e).find("img");if(f.data("large_image_width")>h){g=true;return false}});if(g){var b={touch:false};if("ontouchstart" in window){b.on="click"}a.trigger("zoom.destroy");a.zoom(b)}};d.prototype.initPhotoswipe=function(){if(this.zoom_enabled&&this.$images.length>0){this.$target.prepend('<a href="#" class="woocommerce-product-gallery__trigger">üîç</a>');this.$target.on("click",".woocommerce-product-gallery__trigger",this.openPhotoswipe)}this.$target.on("click",".woocommerce-product-gallery__image a",this.openPhotoswipe)};d.prototype.onResetSlidePosition=function(){this.$target.flexslider(0)};d.prototype.getGalleryItems=function(){var a=this.$images,b=[];if(a.length>0){a.each(function(p,o){var q=c(o).find("img"),i=q.attr("data-large_image"),m=q.attr("data-large_image_width"),r=q.attr("data-large_image_height"),n={src:i,w:m,h:r,title:q.attr("data-caption")?q.attr("data-caption"):q.attr("title")};b.push(n)})}return b};d.prototype.openPhotoswipe=function(a){a.preventDefault();var k=c(".pswp")[0],m=this.getGalleryItems(),b=c(a.target),e;if(b.is(".woocommerce-product-gallery__trigger")||b.is(".woocommerce-product-gallery__trigger img")){e=this.$target.find(".flex-active-slide")}else{e=b.closest(".woocommerce-product-gallery__image")}var l=c.extend({index:c(e).index()},wc_single_product_params.photoswipe_options);var n=new PhotoSwipe(k,PhotoSwipeUI_Default,m,l);n.init()};c.fn.wc_product_gallery=function(a){new d(this,a);return this};c(".woocommerce-product-gallery").each(function(){c(this).wc_product_gallery()})});