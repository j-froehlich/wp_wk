jQuery(function(a){if(typeof wc_add_to_cart_params==="undefined"){return false}var b=function(){a(document.body).on("click",".add_to_cart_button",this.onAddToCart).on("click",".remove_from_cart_button",this.onRemoveFromCart).on("added_to_cart",this.updateButton).on("added_to_cart",this.updateCartPage).on("added_to_cart removed_from_cart",this.updateFragments)};b.prototype.onAddToCart=function(f){var c=a(this);if(c.is(".ajax_add_to_cart")){if(!c.attr("data-product_id")){return true}f.preventDefault();c.removeClass("added");c.addClass("loading");var d={};a.each(c.data(),function(e,g){d[e]=g});a(document.body).trigger("adding_to_cart",[c,d]);a.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),d,function(e){if(!e){return}if(e.error&&e.product_url){window.location=e.product_url;return}if(wc_add_to_cart_params.cart_redirect_after_add==="yes"){window.location=wc_add_to_cart_params.cart_url;return}a(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,c])})}};b.prototype.onRemoveFromCart=function(f){var d=a(this),c=d.closest(".woocommerce-mini-cart-item");f.preventDefault();c.block({message:null,overlayCSS:{opacity:0.6}});a.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_from_cart"),{cart_item_key:d.data("cart_item_key")},function(e){if(!e||!e.fragments){window.location=d.attr("href");return}a(document.body).trigger("removed_from_cart",[e.fragments,e.cart_hash])}).fail(function(){window.location=d.attr("href");return})};b.prototype.updateButton=function(g,c,d,f){f=typeof f==="undefined"?false:f;if(f){f.removeClass("loading");f.addClass("added");if(!wc_add_to_cart_params.is_cart&&f.parent().find(".added_to_cart").length===0){f.after(' <a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+wc_add_to_cart_params.i18n_view_cart+"</a>")}a(document.body).trigger("wc_cart_button_updated",[f])}};b.prototype.updateCartPage=function(){var c=window.location.toString().replace("add-to-cart","added-to-cart");a(".shop_table.cart").load(c+" .shop_table.cart:eq(0) > *",function(){a(".shop_table.cart").stop(true).css("opacity","1").unblock();a(document.body).trigger("cart_page_refreshed")});a(".cart_totals").load(c+" .cart_totals:eq(0) > *",function(){a(".cart_totals").stop(true).css("opacity","1").unblock();a(document.body).trigger("cart_totals_refreshed")})};b.prototype.updateFragments=function(d,c){if(c){a.each(c,function(e){a(e).addClass("updating").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:0.6}})});a.each(c,function(e,f){a(e).replaceWith(f);a(e).stop(true).css("opacity","1").unblock()});a(document.body).trigger("wc_fragments_loaded")}};new b()});