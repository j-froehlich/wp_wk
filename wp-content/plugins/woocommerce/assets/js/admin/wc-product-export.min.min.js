(function(d,e){var f=function(a){this.$form=a;this.xhr=false;this.$form.find(".woocommerce-exporter-progress").val(0);this.processStep=this.processStep.bind(this);a.on("submit",{productExportForm:this},this.onSubmit)};f.prototype.onSubmit=function(a){a.preventDefault();a.data.productExportForm.$form.addClass("woocommerce-exporter__exporting");a.data.productExportForm.$form.find(".woocommerce-exporter-progress").val(0);a.data.productExportForm.$form.find(".woocommerce-exporter-button").prop("disabled",true);a.data.productExportForm.processStep(1,d(this).serialize(),"")};f.prototype.processStep=function(c,b,k){var a=this,l=d(".woocommerce-exporter-columns").val(),m=d("#woocommerce-exporter-meta:checked").length?1:0,n=d(".woocommerce-exporter-types").val();d.ajax({type:"POST",url:ajaxurl,data:{form:b,action:"woocommerce_do_ajax_product_export",step:c,columns:k,selected_columns:l,export_meta:m,export_types:n,security:wc_product_export_params.export_nonce},dataType:"json",success:function(g){if(g.success){if("done"===g.data.step){a.$form.find(".woocommerce-exporter-progress").val(g.data.percentage);e.location=g.data.url;setTimeout(function(){a.$form.removeClass("woocommerce-exporter__exporting");a.$form.find(".woocommerce-exporter-button").prop("disabled",false)},2000)}else{a.$form.find(".woocommerce-exporter-progress").val(g.data.percentage);a.processStep(parseInt(g.data.step,10),b,g.data.columns)}}}}).fail(function(g){e.console.log(g)})};d.fn.wc_product_export_form=function(){new f(this);return this};d(".woocommerce-exporter").wc_product_export_form()})(jQuery,window);