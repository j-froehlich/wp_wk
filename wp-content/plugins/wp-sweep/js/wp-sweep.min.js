(function(a){a(function(){var c=a("body"),b=function(e){var d=e.parents("tr");c.addClass("sweep-active");e.prop("disabled",true).text(wp_sweep.text_sweeping);return a.get(ajaxurl,{action:e.data("action"),sweep_name:e.data("sweep_name"),sweep_type:e.data("sweep_type"),_wpnonce:e.data("nonce")},function(g){if(g.success){var f=parseInt(g.data.count,10);a(".sweep-count",d).text(f.toLocaleString());a(".sweep-percentage",d).text(g.data.percentage);if(f===0){e.parent("td").html(wp_sweep.text_na)}a.each(g.data.stats,function(h,i){a(".sweep-count-type-"+h).text(parseInt(i,10).toLocaleString())});d.parents(".table-sweep").prev(".sweep-message").html('<div class="updated"><p>'+g.data.sweep+"</p></div>");a(".sweep-details",d).html("").hide();c.removeClass("sweep-active");e.prop("disabled",false).text(wp_sweep.text_sweep)}})};a(".btn-sweep").click(function(d){d.preventDefault();b(a(this))});a(".btn-sweep-details").click(function(d){d.preventDefault();var e=a(this);a.get(ajaxurl,{action:e.data("action"),sweep_name:e.data("sweep_name"),sweep_type:e.data("sweep_type"),_wpnonce:e.data("nonce")},function(g){if(g.success){if(g.data.length>0){var f="";a.each(g.data,function(h,j){f+="<li>"+j+"</li>"});a(".sweep-details",e.parents("tr")).html("<ol>"+f+"</ol>").show()}}})});a(".btn-sweep-all").click(function(e){e.preventDefault();var f=a(this),d=a(".btn-sweep"),g;f.prop("disabled",true).text(wp_sweep.text_sweeping);g=d.toArray().reduce(function(i,h){return i.then(function(){return b(a(h))})},a().promise());g.done(function(){c.removeClass("sweep-active");f.prop("disabled",false).text(wp_sweep.text_sweep_all)})});a(window).on("beforeunload",function(d){if(c.hasClass("sweep-active")){(d||window.event).returnValue=wp_sweep.text_close_warning;return wp_sweep.text_close_warning}})})})(jQuery);