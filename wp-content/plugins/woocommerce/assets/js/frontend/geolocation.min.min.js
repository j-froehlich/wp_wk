jQuery(function(i){var f=window.location.toString();var j=function(){if(wc_geolocation_params.hash){i('a[href^="'+wc_geolocation_params.home_url+'"]:not(a[href*="v="]), a[href^="/"]:not(a[href*="v="])').each(function(){var a=i(this),c=a.attr("href"),b=c.split("#");c=b[0];if(c.indexOf("?")>0){c=c+"&v="+wc_geolocation_params.hash}else{c=c+"?v="+wc_geolocation_params.hash}if(typeof b[1]!=="undefined"&&b[1]!==null){c=c+"#"+b[1]}a.attr("href",c)})}};var h=function(a){if(f.indexOf("?v=")>0||f.indexOf("&v=")>0){f=f.replace(/v=[^&]+/,"v="+a)}else{if(f.indexOf("?")>0){f=f+"&v="+a}else{f=f+"?v="+a}}window.location=f};var g={url:wc_geolocation_params.wc_ajax_url.toString().replace("%%endpoint%%","get_customer_location"),type:"GET",success:function(a){if(a.success&&a.data.hash&&a.data.hash!==wc_geolocation_params.hash){h(a.data.hash)}}};if("1"===wc_geolocation_params.is_available){i.ajax(g);i("form").each(function(){var b=i(this);var a=b.attr("method");if(a&&"get"===a.toLowerCase()){b.append('<input type="hidden" name="v" value="'+wc_geolocation_params.hash+'" />')}else{var c=b.attr("action");if(c){if(c.indexOf("?")>0){b.attr("action",c+"&v="+wc_geolocation_params.hash)}else{b.attr("action",c+"?v="+wc_geolocation_params.hash)}}}});j()}i(document.body).on("added_to_cart",function(){j()})});